/*! 2016-08-25 */!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};e[a][0].call(f.exports,function(t){var n=e[a][1][t];return i(n?n:t)},f,f.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){function r(t){var e=t.split("/");t=e.length>1?["Object",e[e.length-1]].join("."):e[0],t=t.replace(/.<$/gi,".<anonymous>"),t=t.replace(/^Anonymous function$/,"<anonymous>");var e=t.split(".");return t=e.length>1?e[e.length-1]:e[0]}e.exports=function(t){return t.map(function(t){return t.functionName&&(t.functionName=r(t.functionName)),t})}},{}],2:[function(t,e,n){(function(r){!function(i,o){"use strict";"function"==typeof r&&r.amd?r("error-stack-parser",["stackframe"],o):"object"==typeof n?e.exports=o(t("stackframe")):i.ErrorStackParser=o(i.StackFrame)}(this,function(t){"use strict";var e=/(^|@)\S+\:\d+/,n=/\s+at .*(\S+\:\d+|\(native\))/;return{parse:function(t){if("undefined"!=typeof t.stacktrace||"undefined"!=typeof t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(n))return this.parseV8OrIE(t);if(t.stack&&t.stack.match(e))return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=t.replace(/[\(\)\s]/g,"").split(":"),n=e.pop(),r=e[e.length-1];if(!isNaN(parseFloat(r))&&isFinite(r)){var i=e.pop();return[e.join(":"),i,n]}return[e.join(":"),n,void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(t){return!!t.match(n)},this).map(function(e){var n=e.replace(/^\s+/,"").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),i=n[0]?n[0]:void 0;return"Anonymous"===n[0]&&"function"===n[1]&&(i=n.slice(0,2).join(" ")),new t(i,void 0,r[0],r[1],r[2],e)},this)},parseFFOrSafari:function(n){return n.stack.split("\n").filter(function(t){return!!t.match(e)},this).map(function(e){var n=e.split("@"),r=this.extractLocation(n.pop()),i=n.shift()||void 0;return new t(i,void 0,r[0],r[1],r[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),i=[],o=2,a=r.length;a>o;o+=2){var s=n.exec(r[o]);s&&i.push(new t(void 0,void 0,s[2],s[1],void 0,r[o]))}return i},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),i=[],o=0,a=r.length;a>o;o+=2){var s=n.exec(r[o]);s&&i.push(new t(s[3]||void 0,void 0,s[2],s[1],void 0,r[o]))}return i},parseOpera11:function(n){return n.stack.split("\n").filter(function(t){return!!t.match(e)&&!t.match(/^Error created at/)},this).map(function(e){var n,r=e.split("@"),i=this.extractLocation(r.pop()),o=r.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(n=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new t(a,s,i[0],i[1],i[2],e)},this)}}})}).call(this,void 0)},{stackframe:8}],3:[function(t,e,n){(function(n,r,i){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return"function"==typeof t}function s(t){return"object"==typeof t&&null!==t}function u(t){J=t}function c(t){X=t}function f(){return function(){n.nextTick(g)}}function l(){return function(){W(g)}}function p(){var t=0,e=new Z(g),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function h(){var t=new MessageChannel;return t.port1.onmessage=g,function(){t.port2.postMessage(0)}}function d(){return function(){setTimeout(g,1)}}function g(){for(var t=0;K>t;t+=2){var e=nt[t],n=nt[t+1];e(n),nt[t]=void 0,nt[t+1]=void 0}K=0}function m(){try{var e=t,n=e("vertx");return W=n.runOnLoop||n.runOnContext,l()}catch(r){return d()}}function v(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function w(t){try{return t.then}catch(e){return at.error=e,at}}function x(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function _(t,e,n){X(function(t){var r=!1,i=x(n,e,function(n){r||(r=!0,e!==n?O(t,n):E(t,n))},function(e){r||(r=!0,F(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,F(t,i))},t)}function N(t,e){e._state===it?E(t,e._result):e._state===ot?F(t,e._result):j(e,void 0,function(e){O(t,e)},function(e){F(t,e)})}function S(t,e){if(e.constructor===t.constructor)N(t,e);else{var n=w(e);n===at?F(t,at.error):void 0===n?E(t,e):a(n)?_(t,e,n):E(t,e)}}function O(t,e){t===e?F(t,y()):o(e)?S(t,e):E(t,e)}function k(t){t._onerror&&t._onerror(t._result),A(t)}function E(t,e){t._state===rt&&(t._result=e,t._state=it,0!==t._subscribers.length&&X(A,t))}function F(t,e){t._state===rt&&(t._state=ot,t._result=e,X(k,t))}function j(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+it]=n,i[o+ot]=r,0===o&&t._state&&X(A,t)}function A(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?P(n,r,i,o):i(o);t._subscribers.length=0}}function C(){this.error=null}function T(t,e){try{return t(e)}catch(n){return st.error=n,st}}function P(t,e,n,r){var i,o,s,u,c=a(n);if(c){if(i=T(n,r),i===st?(u=!0,o=i.error,i=null):s=!0,e===i)return void F(e,b())}else i=r,s=!0;e._state!==rt||(c&&s?O(e,i):u?F(e,o):t===it?E(e,i):t===ot&&F(e,i))}function I(t,e){try{e(function(e){O(t,e)},function(e){F(t,e)})}catch(n){F(t,n)}}function M(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(v),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?E(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&E(n.promise,n._result))):F(n.promise,n._validationError())}function L(t){return new ut(this,t).promise}function R(t){function e(t){O(i,t)}function n(t){F(i,t)}var r=this,i=new r(v);if(!G(t))return F(i,new TypeError("You must pass an array to race.")),i;for(var o=t.length,a=0;i._state===rt&&o>a;a++)j(r.resolve(t[a]),void 0,e,n);return i}function U(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(v);return O(n,t),n}function $(t){var e=this,n=new e(v);return F(n,t),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(t){this._id=ht++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==t&&(a(t)||z(),this instanceof V||q(),I(this,t))}function H(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=dt)}var B;B=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var W,J,D,G=B,K=0,X=({}.toString,function(t,e){nt[K]=t,nt[K+1]=e,K+=2,2===K&&(J?J(g):D())}),Y="undefined"!=typeof window?window:void 0,Q=Y||{},Z=Q.MutationObserver||Q.WebKitMutationObserver,tt="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,nt=new Array(1e3);D=tt?f():Z?p():et?h():void 0===Y&&"function"==typeof t?m():d();var rt=void 0,it=1,ot=2,at=new C,st=new C;M.prototype._validateInput=function(t){return G(t)},M.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},M.prototype._init=function(){this._result=new Array(this.length)};var ut=M;M.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,i=0;n._state===rt&&e>i;i++)t._eachEntry(r[i],i)},M.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;s(t)?t.constructor===r&&t._state!==rt?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},M.prototype._settledAt=function(t,e,n){var r=this,i=r.promise;i._state===rt&&(r._remaining--,t===ot?F(i,n):r._result[e]=n),0===r._remaining&&E(i,r._result)},M.prototype._willSettleAt=function(t,e){var n=this;j(t,void 0,function(t){n._settledAt(it,e,t)},function(t){n._settledAt(ot,e,t)})};var ct=L,ft=R,lt=U,pt=$,ht=0,dt=V;V.all=ct,V.race=ft,V.resolve=lt,V.reject=pt,V._setScheduler=u,V._setAsap=c,V._asap=X,V.prototype={constructor:V,then:function(t,e){var n=this,r=n._state;if(r===it&&!t||r===ot&&!e)return this;var i=new this.constructor(v),o=n._result;if(r){var a=arguments[r-1];X(function(){P(r,i,a,o)})}else j(n,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var gt=H,mt={Promise:dt,polyfill:gt};"function"==typeof i&&i.amd?i(function(){return mt}):"undefined"!=typeof e&&e.exports?e.exports=mt:"undefined"!=typeof this&&(this.ES6Promise=mt),gt()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},void 0)},{_process:4}],4:[function(t,e,n){function r(){f=!1,s.length?c=s.concat(c):l=-1,c.length&&i()}function i(){if(!f){var t=setTimeout(r);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,u=e.exports={},c=[],f=!1,l=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||f||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],5:[function(t,e,n){e.exports=t("./lib/simple_lru.js")},{"./lib/simple_lru.js":6}],6:[function(t,e,n){"use strict";function r(t,e,n,r){this.before=t,this.next=e,this.key=n,this.value=r}function i(t){t||(t={}),this.maxSize=t.maxSize,this.reset()}r.prototype.setKey=function(t){this.key=t},r.prototype.setValue=function(t){this.value=t},i.prototype.reset=function(){this.size=0,this.cache={},this.tail=void 0,this.head=void 0},i.prototype.get=function(t,e){var n=this.cache[t];return e=void 0!=e&&null!=e?e:!0,n&&e?(this.hit(n),n.value):void 0},i.prototype.set=function(t,e,n){var i=this.cache[t];if(n=void 0!=n&&null!=n?n:!0,i)i.value=e,n&&this.hit(i);else{var o;if(this.size>=this.maxSize){var a=this.tail.key;this.detach(this.tail),o=this.cache[a],delete this.cache[a],o.next=void 0,o.before=void 0,o.setKey(t),o.setValue(e)}o=o?o:new r(void 0,void 0,t,e),this.cache[t]=o,this.attach(o)}},i.prototype.del=function(t){var e=this.cache[t];e&&(this.detach(e),delete this.cache[t])},i.prototype.hit=function(t){this.detach(t),this.attach(t)},i.prototype.attach=function(t){t&&(t.before=void 0,t.next=this.head,this.head=t,t.next?t.next.before=t:this.tail=t,this.size++)},i.prototype.detach=function(t){if(t){var e=t.before,n=t.next;e?e.next=n:this.head=n,n?n.before=e:this.tail=e,this.size--}},i.prototype.forEach=function(t){var e=this;Object.keys(this.cache).forEach(function(n){var r=e.cache[n];t(r.value,n)})},e.exports=i},{}],7:[function(t,e,n){(function(r){!function(i,o){"use strict";"function"==typeof r&&r.amd?r("stack-generator",["stackframe"],o):"object"==typeof n?e.exports=o(t("stackframe")):i.StackGenerator=o(i.StackFrame)}(this,function(t){return{backtrace:function(e){var n=[],r=10;"object"==typeof e&&"number"==typeof e.maxStackSize&&(r=e.maxStackSize);for(var i=arguments.callee;i&&n.length<r;){for(var o=new Array(i.arguments.length),a=0;a<o.length;++a)o[a]=i.arguments[a];/function(?:\s+([\w$]+))+\s*\(/.test(i.toString())?n.push(new t(RegExp.$1||void 0,o)):n.push(new t(void 0,o));try{i=i.caller}catch(s){break}}return n}}})}).call(this,void 0)},{stackframe:8}],8:[function(t,e,n){(function(t){!function(r,i){"use strict";"function"==typeof t&&t.amd?t("stackframe",[],i):"object"==typeof n?e.exports=i():r.StackFrame=i()}(this,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,n,r,i,o){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==i&&this.setColumnNumber(i),void 0!==o&&this.setSource(o)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){var e=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",i=t(this.getLineNumber())?":"+this.getLineNumber():"",o=t(this.getColumnNumber())?":"+this.getColumnNumber():"";return e+n+r+i+o}},e})}).call(this,void 0)},{}],9:[function(t,e,n){var r=t("es6-promise").Promise,i=t("../lib/utils"),o=t("../lib/fileFetcher");e.exports={_findSourceMappingURL:function(t){var e=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)[\s]*$/.exec(t);return e&&e[1]?e[1]:null},getFileSourceMapUrl:function(t){var e,n=this;return t?(e=t.split("/").length>1?t.split("/").slice(0,-1).join("/")+"/":"/",new r(function(r,i){o.getFile(t).then(function(t){var o=n._findSourceMappingURL(t);o?(o=e+o,r(o)):i("no sourceMapUrl")},i)})):r.reject("no fileUrl")},getExceptionContexts:function(t,e){return t&&e?new r(function(n,r){o.getFile(t).then(function(t){e-=1;var o=t.split("\n"),a=5,s=5,u={preContext:[],contextLine:null,postContext:[]};if(o.length){var c;if(c=t.indexOf("<html")>-1?!1:this.isSourceMinified(t))return r();for(var f=Math.max(0,e-a-1),l=Math.min(o.length,e-1),p=f;l>=p;++p)i.isUndefined(o[p])||u.preContext.push(o[p]);u.contextLine=o[e];for(var h=Math.min(o.length,e+1),d=Math.min(o.length,e+s),g=h;d>=g;++g)i.isUndefined(o[g])||u.postContext.push(o[g])}var m=1e3;u.contextLine.length>m&&r("aborting generating contexts, as line is over 1000 chars"),u.preContext.forEach(function(t){t.length>m&&r("aborting generating contexts, as preContext line is over 1000 chars")}),u.postContext.forEach(function(t){t.length>m&&r("aborting generating contexts, as postContext line is over 1000 chars")}),n(u)}.bind(this),r)}.bind(this)):r.reject("no line or url")},isSourceMinified:function(t){var e,n=50,r=5,i=250,o=0,a=0,s=0,u=0,c=!1;if(!t)return!1;for(t=t.replace(/\/\*[\S\s]*?\*\/|\/\/(.+|\n)/g,"");s++<n&&(o=t.indexOf("\n",a),-1!==o);){if(/^\s+/.test(t.slice(a,o))&&u++,o-a>i){c=!0;break}a=o+1}return e=r>u/s*100||c}}},{"../lib/fileFetcher":15,"../lib/utils":18,"es6-promise":3}],10:[function(t,e,n){var r=t("es6-promise").Promise,i=t("../lib/logger"),o=t("../lib/config"),a=t("../lib/transport"),s=t("../lib/utils"),u=t("./context"),c=t("./stacktrace"),f=function(t){for(var e=r.resolve(),n=[],i=0;i<t.length;++i)n.push(e=e.then(t[i]));return r.all(n)};e.exports={getFramesForCurrent:function(){return c.get().then(function(t){var e=t.map(function(t){return this.buildOpbeatFrame.bind(this,t)}.bind(this)),n=f(e);return n.then(function(t){return t})}.bind(this))},buildOpbeatFrame:function(t){return new r(function(e,n){if(!t.fileName&&!t.lineNumber)return e({});if(!t.columnNumber&&!t.lineNumber)return e({});var r=this.cleanFilePath(t.fileName),i=this.filePathToFileName(r);this.isFileInline(r)&&(i="(inline script)");var o={filename:i,lineno:t.lineNumber,colno:t.columnNumber,"function":t.functionName||"<anonymous>",abs_path:t.fileName,in_app:this.isFileInApp(r)},a=u.getFileSourceMapUrl(r);a.then(function(t){o.sourcemap_url=t,e(o)},function(){var n=this.cleanFilePath(t.fileName),r=u.getExceptionContexts(n,t.lineNumber);r.then(function(t){o.pre_context=t.preContext,o.context_line=t.contextLine,o.post_context=t.postContext,e(o)})["catch"](function(){e(o)})}.bind(this))}.bind(this))},stackInfoToOpbeatException:function(t){return new r(function(e,n){if(t.stack&&t.stack.length){var r=t.stack.map(function(t){return this.buildOpbeatFrame.bind(this,t)}.bind(this)),i=f(r);i.then(function(n){t.frames=n,t.stack=null,e(t)})}else e(t)}.bind(this))},processOpbeatException:function(t){var e,n=t.type,r=String(t.message)||"Script error",u=this.cleanFilePath(t.fileurl),c=this.filePathToFileName(u),f=t.frames||[];f&&f.length?f.reverse():c&&f.push({filename:c,lineno:t.lineno});var l={frames:f};if(!c&&f.length){var p=f[f.length-1];c=p.filename?p.filename:"(inline script)"}e=this.isFileInline(u)?"(inline script)":c;var h={message:n+": "+r,culprit:e,exception:{type:n,value:r},http:{url:window.location.href},stacktrace:l,user:o.get("context.user"),level:null,logger:null,machine:null};h.extra=this.getBrowserSpecificMetadata(),o.get("context.extra")&&(h.extra=s.mergeObject(h.extra,o.get("context.extra"))),i.log("opbeat.exceptions.processOpbeatException",h),a.sendError(h)},cleanFilePath:function(t){return t||(t=""),"<anonymous>"===t&&(t=""),t},filePathToFileName:function(t){var e=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");return t.indexOf(e)>-1&&(t=t.replace(e+"/","")),t},isFileInline:function(t){return t?0===window.location.href.indexOf(t):!1},isFileInApp:function(t){var e=o.get("libraryPathPattern");return!RegExp(e).test(t)},getBrowserSpecificMetadata:function(){var t=s.getViewPortInfo(),e={environment:{utcOffset:(new Date).getTimezoneOffset()/-60,browserWidth:t.width,browserHeight:t.height,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language,userAgent:navigator.userAgent,platform:navigator.platform},page:{referer:document.referrer,host:document.domain,location:window.location.href}};return e}}},{"../lib/config":14,"../lib/logger":16,"../lib/transport":17,"../lib/utils":18,"./context":9,"./stacktrace":12,"es6-promise":3}],11:[function(t,e,n){function r(t,e,n,r,s){if("Script error."!==e||n){var u={message:t?t.message:e,type:t?t.name:null,fileurl:n||null,lineno:r||null,colno:s||null};u.type||u.message.indexOf(":")>-1&&(u.type=u.message.split(":")[0]);var c;c=t?o.fromError(t):new i(function(t,e){t([{fileName:n,lineNumber:r,columnNumber:s}])}),c.then(function(t){return u.stack=t||[],a.stackInfoToOpbeatException(u).then(function(t){a.processOpbeatException(t)})})["catch"](function(){})}}var i=t("es6-promise").Promise,o=t("./stacktrace"),a=t("./frames"),s=function(){};s.prototype.install=function(){window.onerror=function(t,e,n,i,o){r.call(this,o,t,e,n,i)}.bind(this)},s.prototype.uninstall=function(){window.onerror=null},s.prototype.processError=function(t){r(t)},e.exports=s},{"./frames":10,"./stacktrace":12,"es6-promise":3}],12:[function(t,e,n){function r(t){return t.stack||t["opera#sourceloc"]}var i=t("error-stack-parser"),o=t("stack-generator"),a=t("es6-promise").Promise,s=t("../lib/utils"),u=t("error-stack-normalizer"),c={filter:function(t){return-1===(t.functionName||"").indexOf("StackTrace$$")&&-1===(t.functionName||"").indexOf("ErrorStackParser$$")&&-1===(t.functionName||"").indexOf("StackGenerator$$")&&-1===(t.functionName||"").indexOf("opbeatFunctionWrapper")&&-1===(t.fileName||"").indexOf("angular-opbeat.js")&&-1===(t.fileName||"").indexOf("angular-opbeat.min.js")&&-1===(t.fileName||"").indexOf("opbeat.js")&&-1===(t.fileName||"").indexOf("opbeat.min.js")}};e.exports={get:function(t){try{throw new Error}catch(e){return r(e)?this.fromError(e,t):this.generateArtificially(t)}},generateArtificially:function(t){t=s.mergeObject(c,t);var e=o.backtrace(t);return"function"==typeof t.filter&&(e=e.filter(t.filter)),e=u(e),a.resolve(e)},fromError:function(t,e){return e=s.mergeObject(c,e),new a(function(n){var r=i.parse(t);"function"==typeof e.filter&&(r=r.filter(e.filter)),r=u(r),n(a.all(r.map(function(t){return new a(function(e){e(t)})})))})}}},{"../lib/utils":18,"error-stack-normalizer":1,"error-stack-parser":2,"es6-promise":3,"stack-generator":7}],13:[function(t,e,n){function r(t,e){if(this.q=[],this.opbeat=t,this.execute=i.functionBind(this.execute,this),this.push=i.functionBind(this.push,this),e)for(var n=0;n<e.length;n++){var r=e[n];this.push.apply(this,r)}}var i=t("./utils");r.prototype.execute=function(t,e){return this.opbeat[t].apply(this.opbeat,e)},r.prototype.push=function(){var t=Array.prototype.slice.call(arguments),e=t.slice(0,1)[0],n=t.slice(1);this.execute(e,n)},e.exports=r},{"./utils":18}],14:[function(t,e,n){function r(){this.config={},this.defaults={VERSION:"v1.2.11",apiHost:"intake.opbeat.com",isInstalled:!1,orgId:null,appId:null,angularAppName:null,performance:{enable:!0,enableStackFrames:!1},libraryPathPattern:"(node_modules|bower_components|webpack)",context:{user:{},extra:null}};var t=1===o.getRandomInt(0,10);t&&(this.defaults.performance.enableStackFrames=t)}function i(t){var e={},n=/^data\-([\w\-]+)$/;if(t)for(var r=t.attributes,i=0;i<r.length;i++){var a=r[i];if(n.test(a.nodeName)){var s=a.nodeName.match(n)[1];s=o.arrayMap(s.split("-"),function(t,e){return e>0?t.charAt(0).toUpperCase()+t.substring(1):t}).join(""),e[s]=a.value||a.nodeValue}}return e}var o=t("./utils");r.prototype.init=function(){var t=a();this.setConfig(t)},r.prototype.get=function(t){return o.arrayReduce(t.split("."),function(t,e){return t[e]},this.config)},r.prototype.set=function(t,e){var n=t.split("."),r=n.length-1,i=this.config;o.arraySome(n,function(t,n){if("undefined"==typeof t)return!0;if(n===r)i[t]=e;else{var o=i[t]||{};i[t]=o,i=o}})},r.prototype.setConfig=function(t){t=t||{};var e=o.mergeObject(this.defaults,this.config);this.config=o.mergeObject(e,t)},r.prototype.isValid=function(){var t=["appId","orgId"],e=o.arrayMap(t,o.functionBind(function(t){return null===this.config[t]||void 0===this.config[t]},this));return-1===o.arrayIndexOf(e,!0)};var a=function(){var t=o.getCurrentScript(),e=i(t);return e};e.exports=new r},{"./utils":18}],15:[function(t,e,n){var r=t("es6-promise").Promise,i=t("simple-lru-cache"),o=t("./transport"),a=new i({maxSize:1e3}),s={},u=function(t){return new r(function(e,n){return s[t]?void s[t].push(e):(s[t]=[],void o.getFile(t).then(function(n){a.set(t,n),e(n),s[t]&&s[t].forEach(function(t){t()}),s[t]=null},function(e){s[t]=null,n(e)}))})},c=function(t,e){return new r(function(e,n){var r=a.get(t);r?e(r):n()})};e.exports={getFile:function(t){return new r(function(e,n){c(t).then(function(t){e(t)},function(){u(t).then(function(t){e(t)},n)})})}}},{"./transport":17,"es6-promise":3,"simple-lru-cache":5}],16:[function(t,e,n){var r=t("./config"),i=[];e.exports={getLogStack:function(){return i},error:function(t,e){return this.log("%c "+t,"color: red",e)},warning:function(t,e){return this.log("%c "+t,"background-color: ffff00",e)},log:function(t,e){for(var n=new Array(arguments.length),o=0,a=arguments.length;a>o;o++)n[o]=arguments[o];var s=r.get("debug")===!0||"true"===r.get("debug"),u=window.console;return i.push({msg:t,data:n.slice(1)}),s&&u?"function"==typeof Function.prototype.bind?window.console.log.apply(window.console,n):Function.prototype.apply.call(window.console.log,window.console,n):void 0}}},{"./config":14}],17:[function(t,e,n){function r(t,e){o.log("opbeat.transport.sendToOpbeat",e);var n="https://"+a.get("apiHost")+"/api/v1/organizations/"+a.get("orgId")+"/apps/"+a.get("appId")+"/client-side/"+t+"/",r={"X-Opbeat-Client":"opbeat-js/"+a.get("VERSION")};return i(n,"POST","JSON",e,r)}function i(t,e,n,r,i){return new s(function(a,s){var u=new window.XMLHttpRequest;if(u.open(e,t,!0),u.timeout=1e4,"JSON"===n&&u.setRequestHeader("Content-Type","application/json"),i)for(var c in i)i.hasOwnProperty(c)&&u.setRequestHeader(c.toLowerCase(),i[c]);u.onreadystatechange=function(e){if(4===u.readyState){var n=u.status;if(0===n||n>399&&600>n){var r=new Error(t+" HTTP status: "+n);r.xhr=u,s(r),o.log("opbeat.transport.makeRequest.error",r)}else a(u.responseText),o.log("opbeat.transport.makeRequest.success")}},u.onerror=function(t){s(t),o.log("opbeat.transport.makeRequest.error",t)},"JSON"===n&&(r=JSON.stringify(r)),u.send(r)})}var o=t("./logger"),a=t("./config"),s=t("es6-promise").Promise;e.exports={sendError:function(t){return r("errors",t)},sendTransaction:function(t){return r("transactions",t)},getFile:function(t){return i(t,"GET","",{})}}},{"./config":14,"./logger":16,"es6-promise":3}],18:[function(t,e,n){e.exports={getViewPortInfo:function(){var t=document.documentElement,e=document.getElementsByTagName("body")[0],n=window.innerWidth||t.clientWidth||e.clientWidth,r=window.innerHeight||t.clientHeight||e.clientHeight;return{width:n,height:r}},mergeObject:function(t,e){var n,r={};for(n in t)r[n]=t[n];for(n in e)r[n]=e[n];return r},arrayReduce:function(t,e,n){if(null==t)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=Object(t),i=r.length>>>0,o=0;if(!n){for(;i>o&&!(o in r);)o++;if(o>=i)throw new TypeError("Reduce of empty array with no initial value");n=r[o++]}for(;i>o;o++)o in r&&(n=e(n,r[o],o,r));return n},arraySome:function(t,e,n){if(null==t)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;var r=Object(t),i=r.length>>>0;n||(n=void 0);for(var o=0;i>o;o++)if(o in r&&e.call(n,r[o],o,r))return!0;return!1},arrayMap:function(t,e,n){var r,i,o;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(t),s=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(r=n),i=new Array(s),o=0;s>o;){var u,c;o in a&&(u=a[o],c=e.call(r,u,o,a),i[o]=c),o++}return i},arrayIndexOf:function(t,e,n){var r;if(null==t)throw new TypeError('"arrayVal" is null or not defined');var i=Object(t),o=i.length>>>0;if(0===o)return-1;var a=+n||0;if(Math.abs(a)===1/0&&(a=0),a>=o)return-1;for(r=Math.max(a>=0?a:o-Math.abs(a),0);o>r;){if(r in i&&i[r]===e)return r;r++}return-1},functionBind:function(t,e){var n=Array.prototype.slice.call(arguments,2),r=function(){},i=function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=t.prototype,i.prototype=new r,i},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},isUndefined:function(t){return"undefined"==typeof t},isCORSSupported:function(){var t=new window.XMLHttpRequest;return"withCredentials"in t},getCurrentScript:function(){return document.currentScript||function(){var t=document.getElementsByTagName("script");return t[t.length-1]}()},generateUuid:function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return t()+t(!0)+t(!0)+t()}}},{}],19:[function(t,e,n){function r(){this._config=a,this._config.init();var t=[];window._opbeat&&(t=window._opbeat.q),this.api=new u(this,t),window._opbeat=this.api.push,this.install()}var i=t("./lib/logger"),o=t("./lib/utils"),a=t("./lib/config"),s=t("./exceptions"),u=t("./lib/api");r.prototype.VERSION="v1.2.11",r.prototype.isPlatformSupport=function(){return"function"==typeof Array.prototype.forEach&&"function"==typeof JSON.stringify&&"function"==typeof Function.bind&&window.performance&&"function"==typeof window.performance.now&&o.isCORSSupported()},r.prototype.config=function(t){return t&&a.setConfig(t),this.install(),this._config},r.prototype.install=function(){return a.isValid()?this.isPlatformSupport()?this._config.get("isInstalled")?(i.warning("opbeat.install.already.installed"),this):(this._exceptions=new s,this._exceptions.install(),this._config.set("isInstalled",!0),this):(i.warning("opbeat.install.platform.unsupported"),this):(i.warning("opbeat.install.config.invalid"),this)},r.prototype.uninstall=function(){return this._exceptions.uninstall(),this._config.set("isInstalled",!1),this},r.prototype.captureException=function(t,e){return this._config.get("isInstalled")?t instanceof Error?(this._exceptions.processError(t,e),this):(i.error("Can't capture exception. Passed exception needs to be an instanceof Error"),this):(i.error("Can't capture exception. Opbeat isn't intialized"),this)},r.prototype.setUserContext=function(t){return a.set("context.user",t),this},r.prototype.setExtraContext=function(t){return a.set("context.extra",t),this},e.exports=new r},{"./exceptions":11,"./lib/api":13,"./lib/config":14,"./lib/logger":16,"./lib/utils":18}]},{},[19]);
 (function(){function r(r,e,n){var t=e&&n||0,u=0;for(e=e||[],r.toLowerCase().replace(/[0-9a-f]{2}/g,function(r){16>u&&(e[t+u++]=v[r])});16>u;)e[t+u++]=0;return e}function e(r,e){var n=e||0,t=l;return t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]}function n(r,n,t){var u=n&&t||0,o=n||[];r=r||{};var a=null!=r.clockseq?r.clockseq:m,f=null!=r.msecs?r.msecs:(new Date).getTime(),i=null!=r.nsecs?r.nsecs:w+1,c=f-g+(i-w)/1e4;if(0>c&&null==r.clockseq&&(a=a+1&16383),(0>c||f>g)&&null==r.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=f,w=i,m=a,f+=122192928e5;var s=(1e4*(268435455&f)+i)%4294967296;o[u++]=s>>>24&255,o[u++]=s>>>16&255,o[u++]=s>>>8&255,o[u++]=255&s;var l=f/4294967296*1e4&268435455;o[u++]=l>>>8&255,o[u++]=255&l,o[u++]=l>>>24&15|16,o[u++]=l>>>16&255,o[u++]=a>>>8|128,o[u++]=255&a;for(var v=r.node||p,d=0;6>d;d++)o[u+d]=v[d];return n?n:e(o)}function t(r,n,t){var o=n&&t||0;"string"==typeof r&&(n="binary"==r?new s(16):null,r=null),r=r||{};var a=r.random||(r.rng||u)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var f=0;16>f;f++)n[o+f]=a[f];return n||e(a)}var u,o=this;if("function"==typeof o.require)try{var a=o.require("crypto").randomBytes;u=a&&function(){return a(16)}}catch(f){}if(!u&&o.crypto&&crypto.getRandomValues){var i=new Uint8Array(16);u=function(){return crypto.getRandomValues(i),i}}if(!u){var c=new Array(16);u=function(){for(var r,e=0;16>e;e++)0===(3&e)&&(r=4294967296*Math.random()),c[e]=r>>>((3&e)<<3)&255;return c}}for(var s="function"==typeof o.Buffer?o.Buffer:Array,l=[],v={},d=0;256>d;d++)l[d]=(d+256).toString(16).substr(1),v[l[d]]=d;var y=u(),p=[1|y[0],y[1],y[2],y[3],y[4],y[5]],m=16383&(y[6]<<8|y[7]),g=0,w=0,h=t;if(h.v1=n,h.v4=t,h.parse=r,h.unparse=e,h.BufferClass=s,"function"==typeof define&&define.amd)define(function(){return h});else if("undefined"!=typeof module&&module.exports)module.exports=h;else{var q=o.uuid;h.noConflict=function(){return o.uuid=q,h},o.uuid=h}}).call(this);
 !function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){function i(){h=!1,a.length?u=a.concat(u):f=-1,u.length&&r()}function r(){if(!h){var t=setTimeout(i);h=!0;for(var e=u.length;e;){for(a=u,u=[];++f<e;)a&&a[f].run();f=-1,e=u.length}a=null,h=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,c=e.exports={},u=[],h=!1,f=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new o(t,e)),1!==u.length||h||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],2:[function(t,e,n){var i=t("./core");t("../lib/Persist");"undefined"!=typeof window&&(window.ForerunnerDB=i),e.exports=i},{"../lib/Persist":27,"./core":3}],3:[function(t,e,n){var i=t("../lib/Core");t("../lib/Shim.IE8");"undefined"!=typeof window&&(window.ForerunnerDB=i),e.exports=i},{"../lib/Core":7,"../lib/Shim.IE8":33}],4:[function(t,e,n){"use strict";var i=t("./Shared"),r=t("./Path"),o=function(t,e,n){this.init.apply(this,arguments)};o.prototype.init=function(t,e,n,i){this._store=[],this._keys=[],void 0!==e&&this.index(e),void 0!==n&&this.compareFunc(n),void 0!==i&&this.hashFunc(i),void 0!==t&&this.data(t)},i.addModule("BinaryTree",o),i.mixin(o.prototype,"Mixin.ChainReactor"),i.mixin(o.prototype,"Mixin.Sorting"),i.mixin(o.prototype,"Mixin.Common"),i.synthesize(o.prototype,"compareFunc"),i.synthesize(o.prototype,"hashFunc"),i.synthesize(o.prototype,"indexDir"),i.synthesize(o.prototype,"keys"),i.synthesize(o.prototype,"index",function(t){return void 0!==t&&this.keys(this.extractKeys(t)),this.$super.call(this,t)}),o.prototype.extractKeys=function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push({key:e,val:t[e]});return n},o.prototype.data=function(t){return void 0!==t?(this._data=t,this._hashFunc&&(this._hash=this._hashFunc(t)),this):this._data},o.prototype.push=function(t){return void 0!==t?(this._store.push(t),this):!1},o.prototype.pull=function(t){if(void 0!==t){var e=this._store.indexOf(t);if(e>-1)return this._store.splice(e,1),this}return!1},o.prototype._compareFunc=function(t,e){var n,i,r=0;for(n=0;n<this._keys.length;n++)if(i=this._keys[n],1===i.val?r=this.sortAsc(t[i.key],e[i.key]):-1===i.val&&(r=this.sortDesc(t[i.key],e[i.key])),0!==r)return r;return r},o.prototype._hashFunc=function(t){return t[this._keys[0].key]},o.prototype.insert=function(t){var e,n,i,r;if(t instanceof Array){for(n=[],i=[],r=0;r<t.length;r++)this.insert(t[r])?n.push(t[r]):i.push(t[r]);return{inserted:n,failed:i}}return this._data?(e=this._compareFunc(this._data,t),0===e?(this.push(t),this._left?this._left.insert(t):this._left=new o(t,this._index,this._compareFunc,this._hashFunc),!0):-1===e?(this._right?this._right.insert(t):this._right=new o(t,this._index,this._compareFunc,this._hashFunc),!0):1===e?(this._left?this._left.insert(t):this._left=new o(t,this._index,this._compareFunc,this._hashFunc),!0):!1):(this.data(t),!0)},o.prototype.lookup=function(t,e){var n=this._compareFunc(this._data,t);return e=e||[],0===n&&(this._left&&this._left.lookup(t,e),e.push(this._data),this._right&&this._right.lookup(t,e)),-1===n&&this._right&&this._right.lookup(t,e),1===n&&this._left&&this._left.lookup(t,e),e},o.prototype.inOrder=function(t,e){switch(e=e||[],this._left&&this._left.inOrder(t,e),t){case"hash":e.push(this._hash);break;case"data":e.push(this._data);break;default:e.push({key:this._data,arr:this._store})}return this._right&&this._right.inOrder(t,e),e},o.prototype.findRange=function(t,e,n,i,o,s){o=o||[],s=s||new r(e),this._left&&this._left.findRange(t,e,n,i,o,s);var a=s.value(this._data),c=this.sortAsc(a,n),u=this.sortAsc(a,i);if(!(0!==c&&1!==c||0!==u&&-1!==u))switch(t){case"hash":o.push(this._hash);break;case"data":o.push(this._data);break;default:o.push({key:this._data,arr:this._store})}return this._right&&this._right.findRange(t,e,n,i,o,s),o},o.prototype.match=function(t,e){var n,i,o,s=new r,a=[],c=0;for(n=s.parseArr(this._index,{verbose:!0}),i=s.parseArr(t,{ignore:/\$/,verbose:!0}),o=0;o<n.length;o++)i[o]===n[o]&&(c++,a.push(i[o]));return{matchedKeys:a,totalKeyCount:i.length,score:c}},i.finishModule("BinaryTree"),e.exports=o},{"./Path":26,"./Shared":32}],5:[function(t,e,n){"use strict";var i,r,o,s,a,c,u,h,f,l;i=t("./Shared");var d=function(t){this.init.apply(this,arguments)};d.prototype.init=function(t,e){this._primaryKey="_id",this._primaryIndex=new s("primary"),this._primaryCrc=new s("primaryCrc"),this._crcLookup=new s("crcLookup"),this._name=t,this._data=[],this._metrics=new o,this._options=e||{changeTimestamp:!1},this._metaData={},this._deferQueue={insert:[],update:[],remove:[],upsert:[]},this._deferThreshold={insert:100,update:100,remove:100,upsert:100},this._deferTime={insert:1,update:1,remove:1,upsert:1},this._deferredCalls=!0,this.subsetOf(this)},i.addModule("Collection",d),i.mixin(d.prototype,"Mixin.Common"),i.mixin(d.prototype,"Mixin.Events"),i.mixin(d.prototype,"Mixin.ChainReactor"),i.mixin(d.prototype,"Mixin.CRUD"),i.mixin(d.prototype,"Mixin.Constants"),i.mixin(d.prototype,"Mixin.Triggers"),i.mixin(d.prototype,"Mixin.Sorting"),i.mixin(d.prototype,"Mixin.Matching"),i.mixin(d.prototype,"Mixin.Updating"),i.mixin(d.prototype,"Mixin.Tags"),o=t("./Metrics"),s=t("./KeyValueStore"),a=t("./Path"),c=t("./IndexHashMap"),u=t("./IndexBinaryTree"),h=t("./Crc"),r=i.modules.Db,f=t("./Overload"),l=t("./ReactorIO"),d.prototype.crc=h,i.synthesize(d.prototype,"deferredCalls"),i.synthesize(d.prototype,"state"),i.synthesize(d.prototype,"name"),i.synthesize(d.prototype,"metaData"),i.synthesize(d.prototype,"capped"),i.synthesize(d.prototype,"cappedSize"),d.prototype.data=function(){return this._data},d.prototype.drop=function(t){var e;if(this.isDropped())return t&&t(!1,!0),!0;if(this._db&&this._db._collection&&this._name){if(this.debug()&&console.log(this.logIdentifier()+" Dropping"),this._state="dropped",this.emit("drop",this),delete this._db._collection[this._name],this._collate)for(e in this._collate)this._collate.hasOwnProperty(e)&&this.collateRemove(e);return delete this._primaryKey,delete this._primaryIndex,delete this._primaryCrc,delete this._crcLookup,delete this._name,delete this._data,delete this._metrics,t&&t(!1,!0),!0}return t&&t(!1,!0),!1},d.prototype.primaryKey=function(t){if(void 0!==t){if(this._primaryKey!==t){var e=this._primaryKey;this._primaryKey=t,this._primaryIndex.primaryKey(t),this.rebuildPrimaryKeyIndex(),this.chainSend("primaryKey",t,{oldData:e})}return this}return this._primaryKey},d.prototype._onInsert=function(t,e){this.emit("insert",t,e)},d.prototype._onUpdate=function(t){this.emit("update",t)},d.prototype._onRemove=function(t){this.emit("remove",t)},d.prototype._onChange=function(){this._options.changeTimestamp&&(this._metaData.lastChange=new Date)},i.synthesize(d.prototype,"db",function(t){return t&&"_id"===this.primaryKey()&&(this.primaryKey(t.primaryKey()),this.debug(t.debug())),this.$super.apply(this,arguments)}),i.synthesize(d.prototype,"mongoEmulation"),d.prototype.setData=function(t,e,n){if(this.isDropped())throw this.logIdentifier()+" Cannot operate in a dropped state!";if(t){var i=this._metrics.create("setData");i.start(),e=this.options(e),this.preSetData(t,e,n),e.$decouple&&(t=this.decouple(t)),t instanceof Array||(t=[t]),i.time("transformIn"),t=this.transformIn(t),i.time("transformIn");var r=[].concat(this._data);this._dataReplace(t),i.time("Rebuild Primary Key Index"),this.rebuildPrimaryKeyIndex(e),i.time("Rebuild Primary Key Index"),i.time("Rebuild All Other Indexes"),this._rebuildIndexes(),i.time("Rebuild All Other Indexes"),i.time("Resolve chains"),this.chainSend("setData",t,{oldData:r}),i.time("Resolve chains"),i.stop(),this._onChange(),this.emit("setData",this._data,r)}return n&&n(!1),this},d.prototype.rebuildPrimaryKeyIndex=function(t){t=t||{$ensureKeys:void 0,$violationCheck:void 0};var e,n,i,r,o=t&&void 0!==t.$ensureKeys?t.$ensureKeys:!0,s=t&&void 0!==t.$violationCheck?t.$violationCheck:!0,a=this._primaryIndex,c=this._primaryCrc,u=this._crcLookup,h=this._primaryKey;for(a.truncate(),c.truncate(),u.truncate(),e=this._data,n=e.length;n--;){if(i=e[n],o&&this.ensurePrimaryKey(i),s){if(!a.uniqueSet(i[h],i))throw this.logIdentifier()+" Call to setData on collection failed because your data violates the primary key unique constraint. One or more documents are using the same primary key: "+i[this._primaryKey]}else a.set(i[h],i);r=this.jStringify(i),c.set(i[h],r),u.set(r,i)}},d.prototype.ensurePrimaryKey=function(t){void 0===t[this._primaryKey]&&(t[this._primaryKey]=this.objectId())},d.prototype.truncate=function(){if(this.isDropped())throw this.logIdentifier()+" Cannot operate in a dropped state!";return this.emit("truncate",this._data),this._data.length=0,this._primaryIndex=new s("primary"),this._primaryCrc=new s("primaryCrc"),this._crcLookup=new s("crcLookup"),this._onChange(),this.deferEmit("change",{type:"truncate"}),this},d.prototype.upsert=function(t,e){if(this.isDropped())throw this.logIdentifier()+" Cannot operate in a dropped state!";if(t){var n,i,r=this._deferQueue.upsert,o=this._deferThreshold.upsert,s={};if(t instanceof Array){if(this._deferredCalls&&t.length>o)return this._deferQueue.upsert=r.concat(t),this.processQueue("upsert",e),{};for(s=[],i=0;i<t.length;i++)s.push(this.upsert(t[i]));return e&&e(),s}switch(t[this._primaryKey]?(n={},n[this._primaryKey]=t[this._primaryKey],this._primaryIndex.lookup(n)[0]?s.op="update":s.op="insert"):s.op="insert",s.op){case"insert":s.result=this.insert(t);break;case"update":s.result=this.update(n,t)}return s}return e&&e(),{}},d.prototype.filter=function(t,e,n){return this.find(t,n).filter(e)},d.prototype.filterUpdate=function(t,e,n){var i,r,o,s,a=this.find(t,n),c=[],u=this.primaryKey();for(s=0;s<a.length;s++)i=a[s],o=e(i),o&&(r={},r[u]=i[u],c.push(this.update(r,o)));return c},d.prototype.update=function(t,e,n){if(this.isDropped())throw this.logIdentifier()+" Cannot operate in a dropped state!";e=this.decouple(e),this.mongoEmulation()&&(this.convertToFdb(t),this.convertToFdb(e)),e=this.transformIn(e),this.debug()&&console.log(this.logIdentifier()+" Updating some data");var i,r,o=this,s=this._metrics.create("update"),a=function(i){var r,a,c,u=o.decouple(i);return o.willTrigger(o.TYPE_UPDATE,o.PHASE_BEFORE)||o.willTrigger(o.TYPE_UPDATE,o.PHASE_AFTER)?(r=o.decouple(i),a={type:"update",query:o.decouple(t),update:o.decouple(e),options:o.decouple(n),op:s},c=o.updateObject(r,a.update,a.query,a.options,""),o.processTrigger(a,o.TYPE_UPDATE,o.PHASE_BEFORE,i,r)!==!1?(c=o.updateObject(i,r,a.query,a.options,""),o.processTrigger(a,o.TYPE_UPDATE,o.PHASE_AFTER,u,r)):c=!1):c=o.updateObject(i,e,t,n,""),o._updateIndexes(u,i),c};return s.start(),s.time("Retrieve documents to update"),i=this.find(t,{$decouple:!1}),s.time("Retrieve documents to update"),i.length&&(s.time("Update documents"),r=i.filter(a),s.time("Update documents"),r.length&&(s.time("Resolve chains"),this.chainSend("update",{query:t,update:e,dataSet:r},n),s.time("Resolve chains"),this._onUpdate(r),this._onChange(),this.deferEmit("change",{type:"update",data:r}))),s.stop(),r||[]},d.prototype._replaceObj=function(t,e){var n;this._removeFromIndexes(t);for(n in t)t.hasOwnProperty(n)&&delete t[n];for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(!this._insertIntoIndexes(t))throw this.logIdentifier()+" Primary key violation in update! Key violated: "+t[this._primaryKey];return this},d.prototype.updateById=function(t,e){var n={};return n[this._primaryKey]=t,this.update(n,e)},d.prototype.updateObject=function(t,e,n,i,r,o){e=this.decouple(e),r=r||"","."===r.substr(0,1)&&(r=r.substr(1,r.length-1));var s,c,u,h,f,l,d,p,_,y=!1,m=!1;for(_ in e)if(e.hasOwnProperty(_)){if(s=!1,"$"===_.substr(0,1))switch(_){case"$key":case"$index":case"$data":case"$min":case"$max":s=!0;break;case"$each":for(s=!0,h=e.$each.length,u=0;h>u;u++)m=this.updateObject(t,e.$each[u],n,i,r),m&&(y=!0);y=y||m;break;default:s=!0,m=this.updateObject(t,e[_],n,i,r,_),y=y||m}if(this._isPositionalKey(_)&&(s=!0,_=_.substr(0,_.length-2),l=new a(r+"."+_),t[_]&&t[_]instanceof Array&&t[_].length)){for(c=[],u=0;u<t[_].length;u++)this._match(t[_][u],l.value(n)[0],i,"",{})&&c.push(u);for(u=0;u<c.length;u++)m=this.updateObject(t[_][c[u]],e[_+".$"],n,i,r+"."+_,o),y=y||m}if(!s)if(o||"object"!=typeof e[_])switch(o){case"$inc":var g=!0;e[_]>0?e.$max&&t[_]>=e.$max&&(g=!1):e[_]<0&&e.$min&&t[_]<=e.$min&&(g=!1),g&&(this._updateIncrement(t,_,e[_]),y=!0);break;case"$cast":switch(e[_]){case"array":t[_]instanceof Array||(this._updateProperty(t,_,e.$data||[]),y=!0);break;case"object":(!(t[_]instanceof Object)||t[_]instanceof Array)&&(this._updateProperty(t,_,e.$data||{}),y=!0);break;case"number":"number"!=typeof t[_]&&(this._updateProperty(t,_,Number(t[_])),y=!0);break;case"string":"string"!=typeof t[_]&&(this._updateProperty(t,_,String(t[_])),y=!0);break;default:throw this.logIdentifier()+" Cannot update cast to unknown type: "+e[_]}break;case"$push":if(void 0===t[_]&&this._updateProperty(t,_,[]),!(t[_]instanceof Array))throw this.logIdentifier()+" Cannot push to a key that is not an array! ("+_+")";if(void 0!==e[_].$position&&e[_].$each instanceof Array)for(f=e[_].$position,h=e[_].$each.length,u=0;h>u;u++)this._updateSplicePush(t[_],f+u,e[_].$each[u]);else if(e[_].$each instanceof Array)for(h=e[_].$each.length,u=0;h>u;u++)this._updatePush(t[_],e[_].$each[u]);else this._updatePush(t[_],e[_]);y=!0;break;case"$pull":if(t[_]instanceof Array){for(c=[],u=0;u<t[_].length;u++)this._match(t[_][u],e[_],i,"",{})&&c.push(u);for(h=c.length;h--;)this._updatePull(t[_],c[h]),y=!0}break;case"$pullAll":if(t[_]instanceof Array){if(!(e[_]instanceof Array))throw this.logIdentifier()+" Cannot pullAll without being given an array of values to pull! ("+_+")";if(c=t[_],h=c.length,h>0)for(;h--;){for(f=0;f<e[_].length;f++)c[h]===e[_][f]&&(this._updatePull(t[_],h),h--,y=!0);if(0>h)break}}break;case"$addToSet":if(void 0===t[_]&&this._updateProperty(t,_,[]),!(t[_]instanceof Array))throw this.logIdentifier()+" Cannot addToSet on a key that is not an array! ("+_+")";var v,b,w,k,x=t[_],S=x.length,B=!0,E=i&&i.$addToSet;for(e[_].$key?(w=!1,k=new a(e[_].$key),b=k.value(e[_])[0],delete e[_].$key):E&&E.key?(w=!1,k=new a(E.key),b=k.value(e[_])[0]):(b=this.jStringify(e[_]),w=!0),v=0;S>v;v++)if(w){if(this.jStringify(x[v])===b){B=!1;break}}else if(b===k.value(x[v])[0]){B=!1;break}B&&(this._updatePush(t[_],e[_]),y=!0);break;case"$splicePush":if(void 0===t[_]&&this._updateProperty(t,_,[]),!(t[_]instanceof Array))throw this.logIdentifier()+" Cannot splicePush with a key that is not an array! ("+_+")";if(f=e.$index,void 0===f)throw this.logIdentifier()+" Cannot splicePush without a $index integer value!";delete e.$index,f>t[_].length&&(f=t[_].length),this._updateSplicePush(t[_],f,e[_]),y=!0;break;case"$move":if(!(t[_]instanceof Array))throw this.logIdentifier()+" Cannot move on a key that is not an array! ("+_+")";for(u=0;u<t[_].length;u++)if(this._match(t[_][u],e[_],i,"",{})){var C=e.$index;if(void 0===C)throw this.logIdentifier()+" Cannot move without a $index integer value!";delete e.$index,this._updateSpliceMove(t[_],u,C),y=!0;break}break;case"$mul":this._updateMultiply(t,_,e[_]),y=!0;break;case"$rename":this._updateRename(t,_,e[_]),y=!0;break;case"$overwrite":this._updateOverwrite(t,_,e[_]),y=!0;break;case"$unset":this._updateUnset(t,_),y=!0;break;case"$clear":this._updateClear(t,_),y=!0;break;case"$pop":if(!(t[_]instanceof Array))throw this.logIdentifier()+" Cannot pop from a key that is not an array! ("+_+")";this._updatePop(t[_],e[_])&&(y=!0);break;case"$toggle":this._updateProperty(t,_,!t[_]),y=!0;break;default:t[_]!==e[_]&&(this._updateProperty(t,_,e[_]),y=!0)}else if(null!==t[_]&&"object"==typeof t[_])if(d=t[_]instanceof Array,p=e[_]instanceof Array,d||p)if(!p&&d)for(u=0;u<t[_].length;u++)m=this.updateObject(t[_][u],e[_],n,i,r+"."+_,o),y=y||m;else t[_]!==e[_]&&(this._updateProperty(t,_,e[_]),y=!0);else m=this.updateObject(t[_],e[_],n,i,r+"."+_,o),y=y||m;else t[_]!==e[_]&&(this._updateProperty(t,_,e[_]),y=!0)}return y},d.prototype._isPositionalKey=function(t){return".$"===t.substr(t.length-2,2)},d.prototype.remove=function(t,e,n){if(this.isDropped())throw this.logIdentifier()+" Cannot operate in a dropped state!";var i,r,o,s,a,c,u,h,f=this;if("function"==typeof e&&(n=e,e={}),this.mongoEmulation()&&this.convertToFdb(t),t instanceof Array){for(s=[],o=0;o<t.length;o++)s.push(this.remove(t[o],{noEmit:!0}));return(!e||e&&!e.noEmit)&&this._onRemove(s),n&&n(!1,s),s}if(s=[],i=this.find(t,{$decouple:!1}),i.length){a=function(t){f._removeFromIndexes(t),r=f._data.indexOf(t),f._dataRemoveAtIndex(r),s.push(t)};for(var l=0;l<i.length;l++)u=i[l],f.willTrigger(f.TYPE_REMOVE,f.PHASE_BEFORE)||f.willTrigger(f.TYPE_REMOVE,f.PHASE_AFTER)?(c={type:"remove"},h=f.decouple(u),f.processTrigger(c,f.TYPE_REMOVE,f.PHASE_BEFORE,h,h)!==!1&&(a(u),f.processTrigger(c,f.TYPE_REMOVE,f.PHASE_AFTER,h,h))):a(u);s.length&&(f.chainSend("remove",{query:t,dataSet:s},e),(!e||e&&!e.noEmit)&&this._onRemove(s),this._onChange(),this.deferEmit("change",{type:"remove",data:s}))}return n&&n(!1,s),s},d.prototype.removeById=function(t){var e={};return e[this._primaryKey]=t,this.remove(e)},d.prototype.processQueue=function(t,e,n){var i,r,o=this,s=this._deferQueue[t],a=this._deferThreshold[t],c=this._deferTime[t];if(n=n||{deferred:!0},s.length){if(s.length)switch(i=s.length>a?s.splice(0,a):s.splice(0,s.length),r=o[t](i),t){case"insert":n.inserted=n.inserted||[],n.failed=n.failed||[],n.inserted=n.inserted.concat(r.inserted),n.failed=n.failed.concat(r.failed)}setTimeout(function(){o.processQueue.call(o,t,e,n)},c)}else e&&e(n);this.isProcessingQueue()||this.emit("queuesComplete")},d.prototype.isProcessingQueue=function(){var t;for(t in this._deferQueue)if(this._deferQueue.hasOwnProperty(t)&&this._deferQueue[t].length)return!0;return!1},d.prototype.insert=function(t,e,n){if(this.isDropped())throw this.logIdentifier()+" Cannot operate in a dropped state!";return"function"==typeof e?(n=e,e=this._data.length):void 0===e&&(e=this._data.length),t=this.transformIn(t),this._insertHandle(t,e,n)},d.prototype._insertHandle=function(t,e,n){var i,r,o,s=this._deferQueue.insert,a=this._deferThreshold.insert,c=[],u=[];if(t instanceof Array){if(this._deferredCalls&&t.length>a)return this._deferQueue.insert=s.concat(t),void this.processQueue("insert",n);for(o=0;o<t.length;o++)i=this._insert(t[o],e+o),i===!0?c.push(t[o]):u.push({doc:t[o],reason:i})}else i=this._insert(t,e),i===!0?c.push(t):u.push({doc:t,reason:i});return r={deferred:!1,inserted:c,failed:u},this._onInsert(c,u),n&&n(r),this._onChange(),this.deferEmit("change",{type:"insert",data:c}),r},d.prototype._insert=function(t,e){if(t){var n,i,r,o,s=this,a=this.capped(),c=this.cappedSize();if(this.ensurePrimaryKey(t),n=this.insertIndexViolation(t),r=function(t){s._insertIntoIndexes(t),e>s._data.length&&(e=s._data.length),s._dataInsertAtIndex(e,t),a&&s._data.length>c&&s.removeById(s._data[0][s._primaryKey]),s.chainSend("insert",t,{index:e})},n)return"Index violation in index: "+n;if(s.willTrigger(s.TYPE_INSERT,s.PHASE_BEFORE)||s.willTrigger(s.TYPE_INSERT,s.PHASE_AFTER)){if(i={type:"insert"},s.processTrigger(i,s.TYPE_INSERT,s.PHASE_BEFORE,{},t)===!1)return"Trigger cancelled operation";r(t),s.willTrigger(s.TYPE_INSERT,s.PHASE_AFTER)&&(o=s.decouple(t),s.processTrigger(i,s.TYPE_INSERT,s.PHASE_AFTER,{},o))}else r(t);return!0}return"No document passed to insert"},d.prototype._dataInsertAtIndex=function(t,e){this._data.splice(t,0,e)},d.prototype._dataRemoveAtIndex=function(t){this._data.splice(t,1)},d.prototype._dataReplace=function(t){for(;this._data.length;)this._data.pop();this._data=this._data.concat(t)},d.prototype._insertIntoIndexes=function(t){var e,n,i=this._indexByName,r=this.jStringify(t);n=this._primaryIndex.uniqueSet(t[this._primaryKey],t),this._primaryCrc.uniqueSet(t[this._primaryKey],r),this._crcLookup.uniqueSet(r,t);for(e in i)i.hasOwnProperty(e)&&i[e].insert(t);return n},d.prototype._removeFromIndexes=function(t){var e,n=this._indexByName,i=this.jStringify(t);this._primaryIndex.unSet(t[this._primaryKey]),this._primaryCrc.unSet(t[this._primaryKey]),this._crcLookup.unSet(i);for(e in n)n.hasOwnProperty(e)&&n[e].remove(t)},d.prototype._updateIndexes=function(t,e){this._removeFromIndexes(t),this._insertIntoIndexes(e)},d.prototype._rebuildIndexes=function(){var t,e=this._indexByName;for(t in e)e.hasOwnProperty(t)&&e[t].rebuild()},d.prototype.subset=function(t,e){var n=this.find(t,e);return(new d).subsetOf(this).primaryKey(this._primaryKey).setData(n)},i.synthesize(d.prototype,"subsetOf"),d.prototype.isSubsetOf=function(t){return this._subsetOf===t},d.prototype.distinct=function(t,e,n){if(this.isDropped())throw this.logIdentifier()+" Cannot operate in a dropped state!";var i,r,o=this.find(e,n),s=new a(t),c={},u=[];for(r=0;r<o.length;r++)i=s.value(o[r])[0],i&&!c[i]&&(c[i]=!0,u.push(i));return u},d.prototype.findById=function(t,e){var n={};return n[this._primaryKey]=t,this.find(n,e)[0]},d.prototype.peek=function(t,e){var n,i,r=this._data,o=r.length,s=new d,a=typeof t;if("string"===a){for(n=0;o>n;n++)i=this.jStringify(r[n]),i.indexOf(t)>-1&&s.insert(r[n]);return s.find({},e)}return this.find(t,e)},d.prototype.explain=function(t,e){var n=this.find(t,e);return n.__fdbOp._data},d.prototype.options=function(t){return t=t||{},t.$decouple=void 0!==t.$decouple?t.$decouple:!0,t.$explain=void 0!==t.$explain?t.$explain:!1,t},d.prototype.find=function(t,e,n){return this.mongoEmulation()&&this.convertToFdb(t),n?(n("Callbacks for the find() operation are not yet implemented!",[]),[]):this._find.apply(this,arguments)},d.prototype._find=function(t,e){if(this.isDropped())throw this.logIdentifier()+" Cannot operate in a dropped state!";t=t||{},e=this.options(e);var n,i,r,o,s,c,u,h,f,l,d,p,_,y,m,g,v,b,w,k,x,S,B,E,C,O,I,A,z,P,D=this._metrics.create("find"),j=this.primaryKey(),M=this,R=!0,$={},T=[],F=[],H=[],K={},L={},N=function(n){return M._match(n,t,e,"and",K)};if(D.start(),t){if(D.time("analyseQuery"),n=this._analyseQuery(M.decouple(t),e,D),D.time("analyseQuery"),D.data("analysis",n),n.hasJoin&&n.queriesJoin){for(D.time("joinReferences"),s=0;s<n.joinsOn.length;s++)h=n.joinsOn[s],u=new a(n.joinQueries[h]),c=u.value(t)[0],$[n.joinsOn[s]]=this._db.collection(n.joinsOn[s]).subset(c),delete t[n.joinQueries[h]];D.time("joinReferences")}if(n.indexMatch.length&&(!e||e&&!e.$skipIndex)?(D.data("index.potential",n.indexMatch),D.data("index.used",n.indexMatch[0].index),D.time("indexLookup"),r=n.indexMatch[0].lookup||[],D.time("indexLookup"),n.indexMatch[0].keyData.totalKeyCount===n.indexMatch[0].keyData.score&&(R=!1)):D.flag("usedIndex",!1),R&&(r&&r.length?(i=r.length,D.time("tableScan: "+i),r=r.filter(N)):(i=this._data.length,D.time("tableScan: "+i),r=this._data.filter(N)),D.time("tableScan: "+i)),e.$orderBy&&(D.time("sort"),r=this.sort(e.$orderBy,r),D.time("sort")),void 0!==e.$page&&void 0!==e.$limit&&(L.page=e.$page,L.pages=Math.ceil(r.length/e.$limit),L.records=r.length,e.$page&&e.$limit>0&&(D.data("cursor",L),r.splice(0,e.$page*e.$limit))),e.$skip&&(L.skip=e.$skip,r.splice(0,e.$skip),D.data("skip",e.$skip)),e.$limit&&r&&r.length>e.$limit&&(L.limit=e.$limit,r.length=e.$limit,D.data("limit",e.$limit)),e.$decouple&&(D.time("decouple"),r=this.decouple(r),D.time("decouple"),D.data("flag.decouple",!0)),e.$join){for(o=0;o<e.$join.length;o++)for(h in e.$join[o])if(e.$join[o].hasOwnProperty(h))for(k=h,f=$[h]?$[h]:this._db.collection(h),l=e.$join[o][h],x=0;x<r.length;x++){p={},y=!1,m=!1,w="";for(d in l)if(l.hasOwnProperty(d))if("$"===d.substr(0,1))switch(d){case"$where":l[d].query&&(p=M._resolveDynamicQuery(l[d].query,r[x])),l[d].options&&(_=l[d].options);break;case"$as":k=l[d];break;case"$multi":y=l[d];break;case"$require":m=l[d];break;case"$prefix":w=l[d]}else p[d]=M._resolveDynamicQuery(l[d],r[x]);if(g=f.find(p,_),!m||m&&g[0])if("$root"===k){if(y!==!1)throw this.logIdentifier()+' Cannot combine [$as: "$root"] with [$multi: true] in $join clause!';v=g[0],b=r[x];for(O in v)v.hasOwnProperty(O)&&void 0===b[w+O]&&(b[w+O]=v[O])}else r[x][k]=y===!1?g[0]:g;else T.push(r[x])}D.data("flag.join",!0)}if(T.length){for(D.time("removalQueue"),B=0;B<T.length;B++)S=r.indexOf(T[B]),S>-1&&r.splice(S,1);D.time("removalQueue")}if(e.$transform){for(D.time("transform"),B=0;B<r.length;B++)r.splice(B,1,e.$transform(r[B]));D.time("transform"),D.data("flag.transform",!0)}this._transformEnabled&&this._transformOut&&(D.time("transformOut"),r=this.transformOut(r),D.time("transformOut")),D.data("results",r.length)}else r=[];D.time("scanFields");for(B in e)e.hasOwnProperty(B)&&0!==B.indexOf("$")&&(1===e[B]?F.push(B):0===e[B]&&H.push(B));if(D.time("scanFields"),F.length||H.length){for(D.data("flag.limitFields",!0),D.data("limitFields.on",F),D.data("limitFields.off",H),D.time("limitFields"),B=0;B<r.length;B++){P=r[B];for(E in P)P.hasOwnProperty(E)&&(F.length&&E!==j&&-1===F.indexOf(E)&&delete P[E],H.length&&H.indexOf(E)>-1&&delete P[E])}D.time("limitFields")}if(e.$elemMatch){D.data("flag.elemMatch",!0),D.time("projection-elemMatch");for(B in e.$elemMatch)if(e.$elemMatch.hasOwnProperty(B))for(I=new a(B),E=0;E<r.length;E++)if(A=I.value(r[E])[0],A&&A.length)for(C=0;C<A.length;C++)if(M._match(A[C],e.$elemMatch[B],e,"",{})){I.set(r[E],B,[A[C]]);break}D.time("projection-elemMatch")}if(e.$elemsMatch){D.data("flag.elemsMatch",!0),D.time("projection-elemsMatch");for(B in e.$elemsMatch)if(e.$elemsMatch.hasOwnProperty(B))for(I=new a(B),E=0;E<r.length;E++)if(A=I.value(r[E])[0],A&&A.length){for(z=[],C=0;C<A.length;C++)M._match(A[C],e.$elemsMatch[B],e,"",{})&&z.push(A[C]);I.set(r[E],B,z)}D.time("projection-elemsMatch")}return D.stop(),r.__fdbOp=D,r.$cursor=L,r},d.prototype._resolveDynamicQuery=function(t,e){var n,i,r,o,s,c=this;if("string"==typeof t)return o="$$."===t.substr(0,3)?new a(t.substr(3,t.length-3)).value(e):new a(t).value(e),o.length>1?{$in:o}:o[0];n={};for(s in t)if(t.hasOwnProperty(s))switch(i=typeof t[s],r=t[s],i){case"string":"$$."===r.substr(0,3)?n[s]=new a(r.substr(3,r.length-3)).value(e)[0]:n[s]=r;break;case"object":n[s]=c._resolveDynamicQuery(r,e);break;default:n[s]=r}return n},d.prototype.findOne=function(){return this.find.apply(this,arguments)[0]},d.prototype.indexOf=function(t,e){var n,i=this.find(t,{$decouple:!1})[0];return i?!e||e&&!e.$orderBy?this._data.indexOf(i):(e.$decouple=!1,n=this.find(t,e),n.indexOf(i)):-1},d.prototype.indexOfDocById=function(t,e){var n,i;return n="object"!=typeof t?this._primaryIndex.get(t):this._primaryIndex.get(t[this._primaryKey]),n?!e||e&&!e.$orderBy?this._data.indexOf(n):(e.$decouple=!1,i=this.find({},e),i.indexOf(n)):-1},d.prototype.removeByIndex=function(t){var e,n;return e=this._data[t],void 0!==e?(e=this.decouple(e),n=e[this.primaryKey()],this.removeById(n)):!1},d.prototype.transform=function(t){return void 0!==t?("object"==typeof t?(void 0!==t.enabled&&(this._transformEnabled=t.enabled),void 0!==t.dataIn&&(this._transformIn=t.dataIn),void 0!==t.dataOut&&(this._transformOut=t.dataOut)):this._transformEnabled=t!==!1,this):{enabled:this._transformEnabled,dataIn:this._transformIn,dataOut:this._transformOut}},d.prototype.transformIn=function(t){if(this._transformEnabled&&this._transformIn){if(t instanceof Array){var e,n=[];for(e=0;e<t.length;e++)n[e]=this._transformIn(t[e]);return n}return this._transformIn(t)}return t},d.prototype.transformOut=function(t){if(this._transformEnabled&&this._transformOut){if(t instanceof Array){var e,n=[];for(e=0;e<t.length;e++)n[e]=this._transformOut(t[e]);return n}return this._transformOut(t)}return t},d.prototype.sort=function(t,e){e=e||[];var n,i,r=[];for(n in t)t.hasOwnProperty(n)&&(i={},i[n]=t[n],i.___fdbKey=String(n),r.push(i));return r.length<2?this._sort(t,e):this._bucketSort(r,e)},d.prototype._bucketSort=function(t,e){var n,i,r,o,s,a,c=t.shift(),u=[];if(t.length>0){for(e=this._sort(c,e),i=this.bucket(c.___fdbKey,e),r=i.order,s=i.buckets,a=0;a<r.length;a++)o=r[a],n=[].concat(t),u=u.concat(this._bucketSort(n,s[o]));return u}return this._sort(c,e)},d.prototype._sort=function(t,e){var n,i=this,r=new a,o=r.parse(t,!0)[0];if(r.path(o.path),1===o.value)n=function(t,e){var n=r.value(t)[0],o=r.value(e)[0];return i.sortAsc(n,o)};else{if(-1!==o.value)throw this.logIdentifier()+" $orderBy clause has invalid direction: "+o.value+", accepted values are 1 or -1 for ascending or descending!";n=function(t,e){var n=r.value(t)[0],o=r.value(e)[0];return i.sortDesc(n,o)}}return e.sort(n)},d.prototype.bucket=function(t,e){var n,i,r,o=[],s={};for(n=0;n<e.length;n++)r=String(e[n][t]),i!==r&&(o.push(r),i=r),s[r]=s[r]||[],s[r].push(e[n]);return{buckets:s,order:o}},d.prototype._analyseQuery=function(t,e,n){var i,r,o,s,c,u,h,f,l,d,p,_={queriesOn:[this._name],indexMatch:[],hasJoin:!1,queriesJoin:!1,joinQueries:{},query:t,options:e},y=[],m=[];if(n.time("checkIndexes"),l=new a,d=l.countKeys(t)){void 0!==t[this._primaryKey]&&(n.time("checkIndexMatch: Primary Key"),_.indexMatch.push({lookup:this._primaryIndex.lookup(t,e),keyData:{matchedKeys:[this._primaryKey],totalKeyCount:d,score:1},index:this._primaryIndex}),n.time("checkIndexMatch: Primary Key"));for(p in this._indexById)if(this._indexById.hasOwnProperty(p)&&(u=this._indexById[p],h=u.name(),n.time("checkIndexMatch: "+h),c=u.match(t,e),c.score>0&&(f=u.lookup(t,e),_.indexMatch.push({lookup:f,keyData:c,index:u})),n.time("checkIndexMatch: "+h),c.score===d))break;n.time("checkIndexes"),_.indexMatch.length>1&&(n.time("findOptimalIndex"),_.indexMatch.sort(function(t,e){return t.keyData.score>e.keyData.score?-1:t.keyData.score<e.keyData.score?1:t.keyData.score===e.keyData.score?t.lookup.length-e.lookup.length:void 0}),n.time("findOptimalIndex"))}if(e.$join){for(_.hasJoin=!0,i=0;i<e.$join.length;i++)for(r in e.$join[i])e.$join[i].hasOwnProperty(r)&&(y.push(r),"$as"in e.$join[i][r]?m.push(e.$join[i][r].$as):m.push(r));for(s=0;s<m.length;s++)o=this._queryReferencesCollection(t,m[s],""),o&&(_.joinQueries[y[s]]=o,_.queriesJoin=!0);_.joinsOn=y,_.queriesOn=_.queriesOn.concat(y)}return _},d.prototype._queryReferencesCollection=function(t,e,n){var i;for(i in t)if(t.hasOwnProperty(i)){if(i===e)return n&&(n+="."),n+i;if("object"==typeof t[i])return n&&(n+="."),n+=i,this._queryReferencesCollection(t[i],e,n)}return!1},d.prototype.count=function(t,e){return t?this.find(t,e).length:this._data.length},d.prototype.findSub=function(t,e,n,i){var r,o,s,c=new a(e),u=this.find(t),h=u.length,f=this._db.collection("__FDB_temp_"+this.objectId()),l={parents:h,subDocTotal:0,subDocs:[],pathFound:!1,err:""};for(i=i||{},r=0;h>r;r++)if(o=c.value(u[r])[0]){if(f.setData(o),s=f.find(n,i),i.returnFirst&&s.length)return s[0];i.$split?l.subDocs.push(s):l.subDocs=l.subDocs.concat(s),l.subDocTotal+=s.length,l.pathFound=!0}return f.drop(),i.$stats?l:l.subDocs},d.prototype.findSubOne=function(t,e,n,i){return this.findSub(t,e,n,i)[0]},d.prototype.insertIndexViolation=function(t){var e,n,i,r=this._indexByName;if(this._primaryIndex.get(t[this._primaryKey]))e=this._primaryIndex;else for(n in r)if(r.hasOwnProperty(n)&&(i=r[n],i.unique()&&i.violation(t))){e=i;break}return e?e.name():!1},d.prototype.ensureIndex=function(t,e){if(this.isDropped())throw this.logIdentifier()+" Cannot operate in a dropped state!";this._indexByName=this._indexByName||{},this._indexById=this._indexById||{};
var n,i={start:(new Date).getTime()};if(e)switch(e.type){case"hashed":n=new c(t,e,this);break;case"btree":n=new u(t,e,this);break;default:n=new c(t,e,this)}else n=new c(t,e,this);return this._indexByName[n.name()]?{err:"Index with that name already exists"}:this._indexById[n.id()]?{err:"Index with those keys already exists"}:(n.rebuild(),this._indexByName[n.name()]=n,this._indexById[n.id()]=n,i.end=(new Date).getTime(),i.total=i.end-i.start,this._lastOp={type:"ensureIndex",stats:{time:i}},{index:n,id:n.id(),name:n.name(),state:n.state()})},d.prototype.index=function(t){return this._indexByName?this._indexByName[t]:void 0},d.prototype.lastOp=function(){return this._metrics.list()},d.prototype.diff=function(t){var e,n,i,r,o={insert:[],update:[],remove:[]},s=this.primaryKey();if(s!==t.primaryKey())throw this.logIdentifier()+" Diffing requires that both collections have the same primary key!";for(e=t._data;e&&!(e instanceof Array);)t=e,e=t._data;for(r=e.length,n=0;r>n;n++)i=e[n],this._primaryIndex.get(i[s])?this._primaryCrc.get(i[s])!==t._primaryCrc.get(i[s])&&o.update.push(i):o.insert.push(i);for(e=this._data,r=e.length,n=0;r>n;n++)i=e[n],t._primaryIndex.get(i[s])||o.remove.push(i);return o},d.prototype.collateAdd=new f({"object, string":function(t,e){var n=this;n.collateAdd(t,function(i){var r,o;switch(i.type){case"insert":e?(r={$push:{}},r.$push[e]=n.decouple(i.data),n.update({},r)):n.insert(i.data);break;case"update":e?(r={},o={},r[e]=i.data.query,o[e+".$"]=i.data.update,n.update(r,o)):n.update(i.data.query,i.data.update);break;case"remove":e?(r={$pull:{}},r.$pull[e]={},r.$pull[e][n.primaryKey()]=i.data.dataSet[0][t.primaryKey()],n.update({},r)):n.remove(i.data)}})},"object, function":function(t,e){if("string"==typeof t&&(t=this._db.collection(t,{autoCreate:!1,throwError:!1})),t)return this._collate=this._collate||{},this._collate[t.name()]=new l(t,this,e),this;throw"Cannot collate from a non-existent collection!"}}),d.prototype.collateRemove=function(t){if("object"==typeof t&&(t=t.name()),t)return this._collate[t].drop(),delete this._collate[t],this;throw"No collection name passed to collateRemove() or collection not found!"},r.prototype.collection=new f({"":function(){return this.$main.call(this,{name:this.objectId()})},object:function(t){return t instanceof d?"droppped"!==t.state()?t:this.$main.call(this,{name:t.name()}):this.$main.call(this,t)},string:function(t){return this.$main.call(this,{name:t})},"string, string":function(t,e){return this.$main.call(this,{name:t,primaryKey:e})},"string, object":function(t,e){return e.name=t,this.$main.call(this,e)},"string, string, object":function(t,e,n){return n.name=t,n.primaryKey=e,this.$main.call(this,n)},$main:function(t){var e=t.name;if(e){if(!this._collection[e]){if(t&&t.autoCreate===!1&&t&&t.throwError!==!1)throw this.logIdentifier()+" Cannot get collection "+e+" because it does not exist and auto-create has been disabled!";this.debug()&&console.log(this.logIdentifier()+" Creating collection "+e)}if(this._collection[e]=this._collection[e]||new d(e,t).db(this),this._collection[e].mongoEmulation(this.mongoEmulation()),void 0!==t.primaryKey&&this._collection[e].primaryKey(t.primaryKey),void 0!==t.capped){if(void 0===t.size)throw this.logIdentifier()+" Cannot create a capped collection without specifying a size!";this._collection[e].capped(t.capped),this._collection[e].cappedSize(t.size)}return this._collection[e]}if(!t||t&&t.throwError!==!1)throw this.logIdentifier()+" Cannot get collection with undefined name!"}}),r.prototype.collectionExists=function(t){return Boolean(this._collection[t])},r.prototype.collections=function(t){var e,n,i=[],r=this._collection;t&&(t instanceof RegExp||(t=new RegExp(t)));for(n in r)r.hasOwnProperty(n)&&(e=r[n],t?t.exec(n)&&i.push({name:n,count:e.count(),linked:void 0!==e.isLinked?e.isLinked():!1}):i.push({name:n,count:e.count(),linked:void 0!==e.isLinked?e.isLinked():!1}));return i.sort(function(t,e){return t.name.localeCompare(e.name)}),i},i.finishModule("Collection"),e.exports=d},{"./Crc":8,"./IndexBinaryTree":10,"./IndexHashMap":11,"./KeyValueStore":12,"./Metrics":13,"./Overload":25,"./Path":26,"./ReactorIO":30,"./Shared":32}],6:[function(t,e,n){"use strict";var i,r,o,s;i=t("./Shared");var a=function(){this.init.apply(this,arguments)};a.prototype.init=function(t){var e=this;e._name=t,e._data=new s("__FDB__cg_data_"+e._name),e._collections=[],e._view=[]},i.addModule("CollectionGroup",a),i.mixin(a.prototype,"Mixin.Common"),i.mixin(a.prototype,"Mixin.ChainReactor"),i.mixin(a.prototype,"Mixin.Constants"),i.mixin(a.prototype,"Mixin.Triggers"),i.mixin(a.prototype,"Mixin.Tags"),s=t("./Collection"),r=i.modules.Db,o=i.modules.Db.prototype.init,a.prototype.on=function(){this._data.on.apply(this._data,arguments)},a.prototype.off=function(){this._data.off.apply(this._data,arguments)},a.prototype.emit=function(){this._data.emit.apply(this._data,arguments)},a.prototype.primaryKey=function(t){return void 0!==t?(this._primaryKey=t,this):this._primaryKey},i.synthesize(a.prototype,"state"),i.synthesize(a.prototype,"db"),i.synthesize(a.prototype,"name"),a.prototype.addCollection=function(t){if(t&&-1===this._collections.indexOf(t)){if(this._collections.length){if(this._primaryKey!==t.primaryKey())throw this.logIdentifier()+" All collections in a collection group must have the same primary key!"}else this.primaryKey(t.primaryKey());this._collections.push(t),t._groups=t._groups||[],t._groups.push(this),t.chain(this),t.on("drop",function(){if(t._groups&&t._groups.length){var e,n=[];for(e=0;e<t._groups.length;e++)n.push(t._groups[e]);for(e=0;e<n.length;e++)t._groups[e].removeCollection(t)}delete t._groups}),this._data.insert(t.find())}return this},a.prototype.removeCollection=function(t){if(t){var e,n=this._collections.indexOf(t);-1!==n&&(t.unChain(this),this._collections.splice(n,1),t._groups=t._groups||[],e=t._groups.indexOf(this),-1!==e&&t._groups.splice(e,1),t.off("drop")),0===this._collections.length&&delete this._primaryKey}return this},a.prototype._chainHandler=function(t){switch(t.type){case"setData":t.data=this.decouple(t.data),this._data.remove(t.options.oldData),this._data.insert(t.data);break;case"insert":t.data=this.decouple(t.data),this._data.insert(t.data);break;case"update":this._data.update(t.data.query,t.data.update,t.options);break;case"remove":this._data.remove(t.data.query,t.options)}},a.prototype.insert=function(){this._collectionsRun("insert",arguments)},a.prototype.update=function(){this._collectionsRun("update",arguments)},a.prototype.updateById=function(){this._collectionsRun("updateById",arguments)},a.prototype.remove=function(){this._collectionsRun("remove",arguments)},a.prototype._collectionsRun=function(t,e){for(var n=0;n<this._collections.length;n++)this._collections[n][t].apply(this._collections[n],e)},a.prototype.find=function(t,e){return this._data.find(t,e)},a.prototype.removeById=function(t){for(var e=0;e<this._collections.length;e++)this._collections[e].removeById(t)},a.prototype.subset=function(t,e){var n=this.find(t,e);return(new s).subsetOf(this).primaryKey(this._primaryKey).setData(n)},a.prototype.drop=function(t){if(!this.isDropped()){var e,n,i;if(this._debug&&console.log(this.logIdentifier()+" Dropping"),this._state="dropped",this._collections&&this._collections.length)for(n=[].concat(this._collections),e=0;e<n.length;e++)this.removeCollection(n[e]);if(this._view&&this._view.length)for(i=[].concat(this._view),e=0;e<i.length;e++)this._removeView(i[e]);this.emit("drop",this),t&&t(!1,!0)}return!0},r.prototype.init=function(){this._collectionGroup={},o.apply(this,arguments)},r.prototype.collectionGroup=function(t){return t?t instanceof a?t:(this._collectionGroup[t]=this._collectionGroup[t]||new a(t).db(this),this._collectionGroup[t]):this._collectionGroup},r.prototype.collectionGroups=function(){var t,e=[];for(t in this._collectionGroup)this._collectionGroup.hasOwnProperty(t)&&e.push({name:t});return e},e.exports=a},{"./Collection":5,"./Shared":32}],7:[function(t,e,n){"use strict";var i,r,o,s,a=[];i=t("./Shared"),s=t("./Overload");var c=function(t){this.init.apply(this,arguments)};c.prototype.init=function(t){this._db={},this._debug={},this._name=t||"ForerunnerDB",a.push(this)},c.prototype.instantiatedCount=function(){return a.length},c.prototype.instances=function(t){return void 0!==t?a[t]:a},c.prototype.namedInstances=function(t){var e,n;{if(void 0===t){for(n=[],e=0;e<a.length;e++)n.push(a[e].name);return n}for(e=0;e<a.length;e++)if(a[e].name===t)return a[e]}},c.prototype.moduleLoaded=new s({string:function(t){if(void 0!==t){t=t.replace(/ /g,"");var e,n=t.split(",");for(e=0;e<n.length;e++)if(!i.modules[n[e]])return!1;return!0}return!1},"string, function":function(t,e){if(void 0!==t){t=t.replace(/ /g,"");var n,r=t.split(",");for(n=0;n<r.length;n++)if(!i.modules[r[n]])return!1;e&&e()}},"array, function":function(t,e){var n,r;for(r=0;r<t.length;r++)if(n=t[r],void 0!==n){n=n.replace(/ /g,"");var o,s=n.split(",");for(o=0;o<s.length;o++)if(!i.modules[s[o]])return!1}e&&e()},"string, function, function":function(t,e,n){if(void 0!==t){t=t.replace(/ /g,"");var r,o=t.split(",");for(r=0;r<o.length;r++)if(!i.modules[o[r]])return n(),!1;e()}}}),c.prototype.version=function(t,e){return void 0!==t?0===i.version.indexOf(t)?(e&&e(),!0):!1:i.version},c.moduleLoaded=c.prototype.moduleLoaded,c.version=c.prototype.version,c.instances=c.prototype.instances,c.instantiatedCount=c.prototype.instantiatedCount,c.shared=i,c.prototype.shared=i,i.addModule("Core",c),i.mixin(c.prototype,"Mixin.Common"),i.mixin(c.prototype,"Mixin.Constants"),r=t("./Db.js"),o=t("./Metrics.js"),i.synthesize(c.prototype,"name"),i.synthesize(c.prototype,"mongoEmulation"),c.prototype._isServer=!1,c.prototype.isClient=function(){return!this._isServer},c.prototype.isServer=function(){return this._isServer},c.prototype.isClient=function(){return!this._isServer},c.prototype.isServer=function(){return this._isServer},c.prototype.collection=function(){throw"ForerunnerDB's instantiation has changed since version 1.3.36 to support multiple database instances. Please see the readme.md file for the minor change you have to make to get your project back up and running, or see the issue related to this change at https://github.com/Irrelon/ForerunnerDB/issues/44"},e.exports=c},{"./Db.js":9,"./Metrics.js":13,"./Overload":25,"./Shared":32}],8:[function(t,e,n){"use strict";var i=function(){var t,e,n,i=[];for(e=0;256>e;e++){for(t=e,n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;i[e]=t}return i}();e.exports=function(t){var e,n=-1;for(e=0;e<t.length;e++)n=n>>>8^i[255&(n^t.charCodeAt(e))];return(-1^n)>>>0}},{}],9:[function(t,e,n){"use strict";var i,r,o,s,a,c;i=t("./Shared"),c=t("./Overload");var u=function(t,e){this.init.apply(this,arguments)};u.prototype.init=function(t,e){this.core(e),this._primaryKey="_id",this._name=t,this._collection={},this._debug={}},i.addModule("Db",u),u.prototype.moduleLoaded=new c({string:function(t){if(void 0!==t){t=t.replace(/ /g,"");var e,n=t.split(",");for(e=0;e<n.length;e++)if(!i.modules[n[e]])return!1;return!0}return!1},"string, function":function(t,e){if(void 0!==t){t=t.replace(/ /g,"");var n,r=t.split(",");for(n=0;n<r.length;n++)if(!i.modules[r[n]])return!1;e&&e()}},"string, function, function":function(t,e,n){if(void 0!==t){t=t.replace(/ /g,"");var r,o=t.split(",");for(r=0;r<o.length;r++)if(!i.modules[o[r]])return n(),!1;e()}}}),u.prototype.version=function(t,e){return void 0!==t?0===i.version.indexOf(t)?(e&&e(),!0):!1:i.version},u.moduleLoaded=u.prototype.moduleLoaded,u.version=u.prototype.version,u.shared=i,u.prototype.shared=i,i.addModule("Db",u),i.mixin(u.prototype,"Mixin.Common"),i.mixin(u.prototype,"Mixin.ChainReactor"),i.mixin(u.prototype,"Mixin.Constants"),i.mixin(u.prototype,"Mixin.Tags"),r=i.modules.Core,o=t("./Collection.js"),s=t("./Metrics.js"),a=t("./Crc.js"),u.prototype._isServer=!1,i.synthesize(u.prototype,"core"),i.synthesize(u.prototype,"primaryKey"),i.synthesize(u.prototype,"state"),i.synthesize(u.prototype,"name"),i.synthesize(u.prototype,"mongoEmulation"),u.prototype.isClient=function(){return!this._isServer},u.prototype.isServer=function(){return this._isServer},u.prototype.crc=a,u.prototype.isClient=function(){return!this._isServer},u.prototype.isServer=function(){return this._isServer},u.prototype.arrayToCollection=function(t){return(new o).setData(t)},u.prototype.on=function(t,e){return this._listeners=this._listeners||{},this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},u.prototype.off=function(t,e){if(t in this._listeners){var n=this._listeners[t],i=n.indexOf(e);i>-1&&n.splice(i,1)}return this},u.prototype.emit=function(t,e){if(this._listeners=this._listeners||{},t in this._listeners){var n,i=this._listeners[t],r=i.length;for(n=0;r>n;n++)i[n].apply(this,Array.prototype.slice.call(arguments,1))}return this},u.prototype.peek=function(t){var e,n,i=[],r=typeof t;for(e in this._collection)this._collection.hasOwnProperty(e)&&(n=this._collection[e],i="string"===r?i.concat(n.peek(t)):i.concat(n.find(t)));return i},u.prototype.peek=function(t){var e,n,i=[],r=typeof t;for(e in this._collection)this._collection.hasOwnProperty(e)&&(n=this._collection[e],i="string"===r?i.concat(n.peek(t)):i.concat(n.find(t)));return i},u.prototype.peekCat=function(t){var e,n,i,r={},o=typeof t;for(e in this._collection)this._collection.hasOwnProperty(e)&&(n=this._collection[e],"string"===o?(i=n.peek(t),i&&i.length&&(r[n.name()]=i)):(i=n.find(t),i&&i.length&&(r[n.name()]=i)));return r},u.prototype.drop=new c({"":function(){if(!this.isDropped()){var t,e=this.collections(),n=e.length;for(this._state="dropped",t=0;n>t;t++)this.collection(e[t].name).drop(),delete this._collection[e[t].name];this.emit("drop",this),delete this._core._db[this._name]}return!0},"function":function(t){if(!this.isDropped()){var e,n=this.collections(),i=n.length,r=0,o=function(){r++,r===i&&t&&t()};for(this._state="dropped",e=0;i>e;e++)this.collection(n[e].name).drop(o),delete this._collection[n[e].name];this.emit("drop",this),delete this._core._db[this._name]}return!0},"boolean":function(t){if(!this.isDropped()){var e,n=this.collections(),i=n.length;for(this._state="dropped",e=0;i>e;e++)this.collection(n[e].name).drop(t),delete this._collection[n[e].name];this.emit("drop",this),delete this._core._db[this._name]}return!0},"boolean, function":function(t,e){if(!this.isDropped()){var n,i=this.collections(),r=i.length,o=0,s=function(){o++,o===r&&e&&e()};for(this._state="dropped",n=0;r>n;n++)this.collection(i[n].name).drop(t,s),delete this._collection[i[n].name];this.emit("drop",this),delete this._core._db[this._name]}return!0}}),r.prototype.db=function(t){return t instanceof u?t:(t||(t=this.objectId()),this._db[t]=this._db[t]||new u(t,this),this._db[t].mongoEmulation(this.mongoEmulation()),this._db[t])},r.prototype.databases=function(t){var e,n,i,r=[];t&&(t instanceof RegExp||(t=new RegExp(t)));for(i in this._db)this._db.hasOwnProperty(i)&&(n=!0,t&&(t.exec(i)||(n=!1)),n&&(e={name:i,children:[]},this.shared.moduleExists("Collection")&&e.children.push({module:"collection",moduleName:"Collections",count:this._db[i].collections().length}),this.shared.moduleExists("CollectionGroup")&&e.children.push({module:"collectionGroup",moduleName:"Collection Groups",count:this._db[i].collectionGroups().length}),this.shared.moduleExists("Document")&&e.children.push({module:"document",moduleName:"Documents",count:this._db[i].documents().length}),this.shared.moduleExists("Grid")&&e.children.push({module:"grid",moduleName:"Grids",count:this._db[i].grids().length}),this.shared.moduleExists("Overview")&&e.children.push({module:"overview",moduleName:"Overviews",count:this._db[i].overviews().length}),this.shared.moduleExists("View")&&e.children.push({module:"view",moduleName:"Views",count:this._db[i].views().length}),r.push(e)));return r.sort(function(t,e){return t.name.localeCompare(e.name)}),r},i.finishModule("Db"),e.exports=u},{"./Collection.js":5,"./Crc.js":8,"./Metrics.js":13,"./Overload":25,"./Shared":32}],10:[function(t,e,n){"use strict";var i=t("./Shared"),r=t("./Path"),o=t("./BinaryTree"),s=new o,a=function(){};s.inOrder("hash");var c=function(){this.init.apply(this,arguments)};c.prototype.init=function(t,e,n){this._btree=new(a.create(2,this.sortAsc)),this._size=0,this._id=this._itemKeyHash(t,t),this.unique(e&&e.unique?e.unique:!1),void 0!==t&&this.keys(t),void 0!==n&&this.collection(n),this.name(e&&e.name?e.name:this._id)},i.addModule("IndexBinaryTree",c),i.mixin(c.prototype,"Mixin.ChainReactor"),i.mixin(c.prototype,"Mixin.Sorting"),c.prototype.id=function(){return this._id},c.prototype.state=function(){return this._state},c.prototype.size=function(){return this._size},i.synthesize(c.prototype,"data"),i.synthesize(c.prototype,"name"),i.synthesize(c.prototype,"collection"),i.synthesize(c.prototype,"type"),i.synthesize(c.prototype,"unique"),c.prototype.keys=function(t){return void 0!==t?(this._keys=t,this._keyCount=(new r).parse(this._keys).length,this):this._keys},c.prototype.rebuild=function(){if(this._collection){var t,e=this._collection.subset({},{$decouple:!1,$orderBy:this._keys}),n=e.find(),i=n.length;for(this._btree=new(a.create(2,this.sortAsc)),this._unique&&(this._uniqueLookup={}),t=0;i>t;t++)this.insert(n[t])}this._state={name:this._name,keys:this._keys,indexSize:this._size,built:new Date,updated:new Date,ok:!0}},c.prototype.insert=function(t,e){var n,i,r=this._unique,o=this._itemKeyHash(t,this._keys);r&&(n=this._itemHash(t,this._keys),this._uniqueLookup[n]=t),i=this._btree.get(o),void 0===i&&(i=[],this._btree.put(o,i)),i.push(t),this._size++},c.prototype.remove=function(t,e){var n,i,r,o=this._unique,s=this._itemKeyHash(t,this._keys);o&&(n=this._itemHash(t,this._keys),delete this._uniqueLookup[n]),i=this._btree.get(s),void 0!==i&&(r=i.indexOf(t),r>-1&&(1===i.length?this._btree.del(s):i.splice(r,1),this._size--))},c.prototype.violation=function(t){var e=this._itemHash(t,this._keys);return Boolean(this._uniqueLookup[e])},c.prototype.hashViolation=function(t){return Boolean(this._uniqueLookup[t])},c.prototype.lookup=function(t){return this._data[this._itemHash(t,this._keys)]||[]},c.prototype.match=function(t,e){var n,i=new r,o=i.parseArr(this._keys),s=i.parseArr(t),a=[],c=0;for(n=0;n<o.length;n++){if(s[n]!==o[n])return{matchedKeys:[],totalKeyCount:s.length,score:0};c++,a.push(s[n])}return{matchedKeys:a,totalKeyCount:s.length,score:c}},c.prototype._itemHash=function(t,e){var n,i,o=new r,s="";for(n=o.parse(e),i=0;i<n.length;i++)s&&(s+="_"),s+=o.value(t,n[i].path).join(":");return s},c.prototype._itemKeyHash=function(t,e){var n,i,o=new r,s="";for(n=o.parse(e),i=0;i<n.length;i++)s&&(s+="_"),s+=o.keyValue(t,n[i].path);return s},c.prototype._itemHashArr=function(t,e){var n,i,o,s,a,c=new r,u=[];for(n=c.parse(e),s=0;s<n.length;s++)for(i=c.value(t,n[s].path),o=0;o<i.length;o++)if(0===s)u.push(i[o]);else for(a=0;a<u.length;a++)u[a]=u[a]+"_"+i[o];return u},i.finishModule("IndexBinaryTree"),e.exports=c},{"./BinaryTree":4,"./Path":26,"./Shared":32}],11:[function(t,e,n){"use strict";var i=t("./Shared"),r=t("./Path"),o=function(){this.init.apply(this,arguments)};o.prototype.init=function(t,e,n){this._crossRef={},this._size=0,this._id=this._itemKeyHash(t,t),this.data({}),this.unique(e&&e.unique?e.unique:!1),void 0!==t&&this.keys(t),void 0!==n&&this.collection(n),this.name(e&&e.name?e.name:this._id)},i.addModule("IndexHashMap",o),i.mixin(o.prototype,"Mixin.ChainReactor"),o.prototype.id=function(){return this._id},o.prototype.state=function(){return this._state},o.prototype.size=function(){return this._size},i.synthesize(o.prototype,"data"),i.synthesize(o.prototype,"name"),i.synthesize(o.prototype,"collection"),i.synthesize(o.prototype,"type"),i.synthesize(o.prototype,"unique"),o.prototype.keys=function(t){return void 0!==t?(this._keys=t,this._keyCount=(new r).parse(this._keys).length,this):this._keys},o.prototype.rebuild=function(){if(this._collection){var t,e=this._collection.subset({},{$decouple:!1,$orderBy:this._keys}),n=e.find(),i=n.length;for(this._data={},this._unique&&(this._uniqueLookup={}),t=0;i>t;t++)this.insert(n[t])}this._state={name:this._name,keys:this._keys,indexSize:this._size,built:new Date,updated:new Date,ok:!0}},o.prototype.insert=function(t,e){var n,i,r,o=this._unique;for(o&&(n=this._itemHash(t,this._keys),this._uniqueLookup[n]=t),i=this._itemHashArr(t,this._keys),r=0;r<i.length;r++)this.pushToPathValue(i[r],t)},o.prototype.update=function(t,e){},o.prototype.remove=function(t,e){var n,i,r,o=this._unique;for(o&&(n=this._itemHash(t,this._keys),delete this._uniqueLookup[n]),i=this._itemHashArr(t,this._keys),r=0;r<i.length;r++)this.pullFromPathValue(i[r],t)},o.prototype.violation=function(t){var e=this._itemHash(t,this._keys);return Boolean(this._uniqueLookup[e])},o.prototype.hashViolation=function(t){return Boolean(this._uniqueLookup[t])},o.prototype.pushToPathValue=function(t,e){var n=this._data[t]=this._data[t]||[];-1===n.indexOf(e)&&(n.push(e),this._size++,this.pushToCrossRef(e,n))},o.prototype.pullFromPathValue=function(t,e){var n,i=this._data[t];n=i.indexOf(e),n>-1&&(i.splice(n,1),this._size--,this.pullFromCrossRef(e,i)),i.length||delete this._data[t]},o.prototype.pull=function(t){var e,n,i=t[this._collection.primaryKey()],r=this._crossRef[i],o=r.length;for(e=0;o>e;e++)n=r[e],this._pullFromArray(n,t);this._size--,delete this._crossRef[i]},o.prototype._pullFromArray=function(t,e){for(var n=t.length;n--;)t[n]===e&&t.splice(n,1)},o.prototype.pushToCrossRef=function(t,e){var n,i=t[this._collection.primaryKey()];this._crossRef[i]=this._crossRef[i]||[],n=this._crossRef[i],-1===n.indexOf(e)&&n.push(e)},o.prototype.pullFromCrossRef=function(t,e){var n=t[this._collection.primaryKey()];delete this._crossRef[n]},o.prototype.lookup=function(t){return this._data[this._itemHash(t,this._keys)]||[]},o.prototype.match=function(t,e){var n,i=new r,o=i.parseArr(this._keys),s=i.parseArr(t),a=[],c=0;for(n=0;n<o.length;n++){if(s[n]!==o[n])return{matchedKeys:[],totalKeyCount:s.length,score:0};c++,a.push(s[n])}return{matchedKeys:a,totalKeyCount:s.length,score:c}},o.prototype._itemHash=function(t,e){var n,i,o=new r,s="";for(n=o.parse(e),i=0;i<n.length;i++)s&&(s+="_"),s+=o.value(t,n[i].path).join(":");return s},o.prototype._itemKeyHash=function(t,e){var n,i,o=new r,s="";for(n=o.parse(e),i=0;i<n.length;i++)s&&(s+="_"),s+=o.keyValue(t,n[i].path);return s},o.prototype._itemHashArr=function(t,e){var n,i,o,s,a,c=new r,u=[];for(n=c.parse(e),s=0;s<n.length;s++)for(i=c.value(t,n[s].path),o=0;o<i.length;o++)if(0===s)u.push(i[o]);else for(a=0;a<u.length;a++)u[a]=u[a]+"_"+i[o];return u},i.finishModule("IndexHashMap"),e.exports=o},{"./Path":26,"./Shared":32}],12:[function(t,e,n){"use strict";var i=t("./Shared"),r=function(t){this.init.apply(this,arguments)};r.prototype.init=function(t){this._name=t,this._data={},this._primaryKey="_id"},i.addModule("KeyValueStore",r),i.mixin(r.prototype,"Mixin.ChainReactor"),i.synthesize(r.prototype,"name"),r.prototype.primaryKey=function(t){return void 0!==t?(this._primaryKey=t,this):this._primaryKey},r.prototype.truncate=function(){return this._data={},this},r.prototype.set=function(t,e){return this._data[t]=e?e:!0,this},r.prototype.get=function(t){return this._data[t]},r.prototype.lookup=function(t){var e,n,i,r,o=t[this._primaryKey];if(o instanceof Array){for(n=o.length,r=[],e=0;n>e;e++)i=this._data[o[e]],i&&r.push(i);return r}if(o instanceof RegExp){r=[];for(e in this._data)this._data.hasOwnProperty(e)&&o.test(e)&&r.push(this._data[e]);return r}if("object"!=typeof o)return i=this._data[o],void 0!==i?[i]:[];if(o.$ne){r=[];for(e in this._data)this._data.hasOwnProperty(e)&&e!==o.$ne&&r.push(this._data[e]);return r}if(o.$in&&o.$in instanceof Array){r=[];for(e in this._data)this._data.hasOwnProperty(e)&&o.$in.indexOf(e)>-1&&r.push(this._data[e]);return r}if(o.$nin&&o.$nin instanceof Array){r=[];for(e in this._data)this._data.hasOwnProperty(e)&&-1===o.$nin.indexOf(e)&&r.push(this._data[e]);return r}if(o.$or&&o.$or instanceof Array){for(r=[],e=0;e<o.$or.length;e++)r=r.concat(this.lookup(o.$or[e]));return r}},r.prototype.unSet=function(t){return delete this._data[t],this},r.prototype.uniqueSet=function(t,e){return void 0===this._data[t]?(this._data[t]=e,!0):!1},i.finishModule("KeyValueStore"),e.exports=r},{"./Shared":32}],13:[function(t,e,n){"use strict";var i=t("./Shared"),r=t("./Operation"),o=function(){this.init.apply(this,arguments)};o.prototype.init=function(){this._data=[]},i.addModule("Metrics",o),i.mixin(o.prototype,"Mixin.ChainReactor"),o.prototype.create=function(t){var e=new r(t);return this._enabled&&this._data.push(e),e},o.prototype.start=function(){return this._enabled=!0,this},o.prototype.stop=function(){return this._enabled=!1,this},o.prototype.clear=function(){return this._data=[],this},o.prototype.list=function(){return this._data},i.finishModule("Metrics"),e.exports=o},{"./Operation":24,"./Shared":32}],14:[function(t,e,n){"use strict";var i={preSetData:function(){},postSetData:function(){}};e.exports=i},{}],15:[function(t,e,n){"use strict";var i={chain:function(t){this.debug&&this.debug()&&(t._reactorIn&&t._reactorOut?console.log(t._reactorIn.logIdentifier()+' Adding target "'+t._reactorOut.instanceIdentifier()+'" to the chain reactor target list'):console.log(this.logIdentifier()+' Adding target "'+t.instanceIdentifier()+'" to the chain reactor target list')),this._chain=this._chain||[];var e=this._chain.indexOf(t);-1===e&&this._chain.push(t)},unChain:function(t){if(this.debug&&this.debug()&&(t._reactorIn&&t._reactorOut?console.log(t._reactorIn.logIdentifier()+' Removing target "'+t._reactorOut.instanceIdentifier()+'" from the chain reactor target list'):console.log(this.logIdentifier()+' Removing target "'+t.instanceIdentifier()+'" from the chain reactor target list')),this._chain){var e=this._chain.indexOf(t);e>-1&&this._chain.splice(e,1)}},chainSend:function(t,e,n){if(this._chain){var i,r,o=this._chain,s=o.length;for(r=0;s>r;r++){if(i=o[r],i._state&&(!i._state||i.isDropped()))throw console.log("Reactor Data:",t,e,n),console.log("Reactor Node:",i),"Chain reactor attempting to send data to target reactor node that is in a dropped state!";this.debug&&this.debug()&&(i._reactorIn&&i._reactorOut?console.log(i._reactorIn.logIdentifier()+' Sending data down the chain reactor pipe to "'+i._reactorOut.instanceIdentifier()+'"'):console.log(this.logIdentifier()+' Sending data down the chain reactor pipe to "'+i.instanceIdentifier()+'"')),i.chainReceive(this,t,e,n)}}},chainReceive:function(t,e,n,i){var r={sender:t,type:e,data:n,options:i};this.debug&&this.debug()&&console.log(this.logIdentifier()+"Received data from parent reactor node"),(!this._chainHandler||this._chainHandler&&!this._chainHandler(r))&&this.chainSend(r.type,r.data,r.options)}};e.exports=i},{}],16:[function(t,e,n){"use strict";var i,r=0,o=t("./Overload"),s=t("./Serialiser"),a=new s;i={serialiser:a,store:function(t,e){if(void 0!==t){if(void 0!==e)return this._store=this._store||{},this._store[t]=e,this;if(this._store)return this._store[t]}},unStore:function(t){return void 0!==t&&delete this._store[t],this},decouple:function(t,e){if(void 0!==t){if(e){var n,i=this.jStringify(t),r=[];for(n=0;e>n;n++)r.push(this.jParse(i));return r}return this.jParse(this.jStringify(t))}},jParse:function(t){return a.parse(t)},jStringify:function(t){return a.stringify(t)},objectId:function(t){var e,n=Math.pow(10,17);if(t){var i,o=0,s=t.length;for(i=0;s>i;i++)o+=t.charCodeAt(i)*n;e=o.toString(16)}else r++,e=(r+(Math.random()*n+Math.random()*n+Math.random()*n+Math.random()*n)).toString(16);return e},debug:new o([function(){return this._debug&&this._debug.all},function(t){return void 0!==t?"boolean"==typeof t?(this._debug=this._debug||{},this._debug.all=t,this.chainSend("debug",this._debug),this):this._debug&&this._debug[t]||this._db&&this._db._debug&&this._db._debug[t]||this._debug&&this._debug.all:this._debug&&this._debug.all},function(t,e){return void 0!==t?void 0!==e?(this._debug=this._debug||{},this._debug[t]=e,this.chainSend("debug",this._debug),this):this._debug&&this._debug[e]||this._db&&this._db._debug&&this._db._debug[t]:this._debug&&this._debug.all}]),classIdentifier:function(){return"ForerunnerDB."+this.className},instanceIdentifier:function(){return"["+this.className+"]"+this.name()},logIdentifier:function(){return this.classIdentifier()+": "+this.instanceIdentifier()},convertToFdb:function(t){var e,n,i,r;for(r in t)if(t.hasOwnProperty(r)&&(i=t,r.indexOf(".")>-1)){for(r=r.replace(".$","[|$|]"),n=r.split(".");e=n.shift();)e=e.replace("[|$|]",".$"),n.length?i[e]={}:i[e]=t[r],i=i[e];delete t[r]}},isDropped:function(){return"dropped"===this._state}},e.exports=i},{"./Overload":25,"./Serialiser":31}],17:[function(t,e,n){"use strict";var i={TYPE_INSERT:0,TYPE_UPDATE:1,TYPE_REMOVE:2,PHASE_BEFORE:0,PHASE_AFTER:1};e.exports=i},{}],18:[function(t,e,n){"use strict";var i=t("./Overload"),r={on:new i({"string, function":function(t,e){return this._listeners=this._listeners||{},this._listeners[t]=this._listeners[t]||{},this._listeners[t]["*"]=this._listeners[t]["*"]||[],this._listeners[t]["*"].push(e),this},"string, *, function":function(t,e,n){return this._listeners=this._listeners||{},this._listeners[t]=this._listeners[t]||{},this._listeners[t][e]=this._listeners[t][e]||[],this._listeners[t][e].push(n),this}}),once:new i({"string, function":function(t,e){var n=this,i=function(){n.off(t,i),e.apply(n,arguments)};return this.on(t,i)},"string, *, function":function(t,e,n){var i=this,r=function(){i.off(t,e,r),n.apply(i,arguments)};return this.on(t,e,r)}}),off:new i({string:function(t){return this._listeners&&this._listeners[t]&&t in this._listeners&&delete this._listeners[t],this},"string, function":function(t,e){var n,i;return"string"==typeof e?this._listeners&&this._listeners[t]&&this._listeners[t][e]&&delete this._listeners[t][e]:this._listeners&&t in this._listeners&&(n=this._listeners[t]["*"],i=n.indexOf(e),i>-1&&n.splice(i,1)),this},"string, *, function":function(t,e,n){if(this._listeners&&t in this._listeners&&e in this.listeners[t]){var i=this._listeners[t][e],r=i.indexOf(n);r>-1&&i.splice(r,1)}},"string, *":function(t,e){this._listeners&&t in this._listeners&&e in this._listeners[t]&&delete this._listeners[t][e]}}),emit:function(t,e){if(this._listeners=this._listeners||{},t in this._listeners){var n,i,r,o,s,a,c;if(this._listeners[t]["*"])for(o=this._listeners[t]["*"],i=o.length,n=0;i>n;n++)r=o[n],"function"==typeof r&&r.apply(this,Array.prototype.slice.call(arguments,1));if(e instanceof Array&&e[0]&&e[0][this._primaryKey])for(s=this._listeners[t],i=e.length,n=0;i>n;n++)if(s[e[n][this._primaryKey]])for(a=s[e[n][this._primaryKey]].length,c=0;a>c;c++)r=s[e[n][this._primaryKey]][c],"function"==typeof r&&s[e[n][this._primaryKey]][c].apply(this,Array.prototype.slice.call(arguments,1))}return this},deferEmit:function(t,e){var n,i=this;return this._noEmitDefer||this._db&&(!this._db||this._db._noEmitDefer)?this.emit.apply(this,arguments):(n=arguments,this._deferTimeout=this._deferTimeout||{},this._deferTimeout[t]&&clearTimeout(this._deferTimeout[t]),this._deferTimeout[t]=setTimeout(function(){i.debug()&&console.log(i.logIdentifier()+" Emitting "+n[0]),i.emit.apply(i,n)},1)),this}};e.exports=r},{"./Overload":25}],19:[function(t,e,n){"use strict";var i={_match:function(t,e,n,i,r){var o,s,a,c,u,h,f=i,l=typeof t,d=typeof e,p=!0;if(r=r||{},n=n||{},r.$rootQuery||(r.$rootQuery=e),r.$rootData=r.$rootData||{},"string"!==l&&"number"!==l||"string"!==d&&"number"!==d){for(h in e)if(e.hasOwnProperty(h)){if(o=!1,u=h.substr(0,2),"//"===u)continue;if(0===u.indexOf("$")&&(c=this._matchOp(h,t,e[h],n,r),c>-1)){if(c){if("or"===i)return!0}else p=c;o=!0}if(!o&&e[h]instanceof RegExp)if(o=!0,"object"===l&&void 0!==t[h]&&e[h].test(t[h])){if("or"===i)return!0}else p=!1;if(!o)if("object"==typeof e[h])if(void 0!==t[h])if(t[h]instanceof Array&&!(e[h]instanceof Array)){for(s=!1,a=0;a<t[h].length&&!(s=this._match(t[h][a],e[h],n,f,r));a++);
if(s){if("or"===i)return!0}else p=!1}else if(!(t[h]instanceof Array)&&e[h]instanceof Array){for(s=!1,a=0;a<e[h].length&&!(s=this._match(t[h],e[h][a],n,f,r));a++);if(s){if("or"===i)return!0}else p=!1}else if("object"==typeof t)if(s=this._match(t[h],e[h],n,f,r)){if("or"===i)return!0}else p=!1;else if(s=this._match(void 0,e[h],n,f,r)){if("or"===i)return!0}else p=!1;else if(e[h]&&void 0!==e[h].$exists)if(s=this._match(void 0,e[h],n,f,r)){if("or"===i)return!0}else p=!1;else p=!1;else if(t&&t[h]===e[h]){if("or"===i)return!0}else if(t&&t[h]&&t[h]instanceof Array&&e[h]&&"object"!=typeof e[h]){for(s=!1,a=0;a<t[h].length&&!(s=this._match(t[h][a],e[h],n,f,r));a++);if(s){if("or"===i)return!0}else p=!1}else p=!1;if("and"===i&&!p)return!1}}else"number"===l?t!==e&&(p=!1):t.localeCompare(e)&&(p=!1);return p},_matchOp:function(t,e,n,i,r){switch(t){case"$gt":return e>n;case"$gte":return e>=n;case"$lt":return n>e;case"$lte":return n>=e;case"$exists":return void 0===e!==n;case"$eq":return e==n;case"$eeq":return e===n;case"$ne":return e!=n;case"$nee":return e!==n;case"$or":for(var o=0;o<n.length;o++)if(this._match(e,n[o],i,"and",r))return!0;return!1;case"$and":for(var s=0;s<n.length;s++)if(!this._match(e,n[s],i,"and",r))return!1;return!0;case"$in":if(n instanceof Array){var a,c=n,u=c.length;for(a=0;u>a;a++){if(c[a]instanceof RegExp&&c[a].test(e))return!0;if(c[a]===e)return!0}return!1}throw this.logIdentifier()+" Cannot use an $in operator on a non-array key: "+t;case"$nin":if(n instanceof Array){var h,f=n,l=f.length;for(h=0;l>h;h++)if(f[h]===e)return!1;return!0}throw this.logIdentifier()+" Cannot use a $nin operator on a non-array key: "+t;case"$distinct":r.$rootData["//distinctLookup"]=r.$rootData["//distinctLookup"]||{};for(var d in n)if(n.hasOwnProperty(d))return r.$rootData["//distinctLookup"][d]=r.$rootData["//distinctLookup"][d]||{},r.$rootData["//distinctLookup"][d][e[d]]?!1:(r.$rootData["//distinctLookup"][d][e[d]]=!0,!0);break;case"$count":var p,_,y;for(p in n)if(n.hasOwnProperty(p)&&(_=e[p],y="object"==typeof _&&_ instanceof Array?_.length:0,!this._match(y,n[p],i,"and",r)))return!1;return!0}return-1}};e.exports=i},{}],20:[function(t,e,n){"use strict";var i={sortAsc:function(t,e){return"string"==typeof t&&"string"==typeof e?t.localeCompare(e):t>e?1:e>t?-1:0},sortDesc:function(t,e){return"string"==typeof t&&"string"==typeof e?e.localeCompare(t):t>e?-1:e>t?1:0}};e.exports=i},{}],21:[function(t,e,n){"use strict";var i,r={};i={tagAdd:function(t){var e,n=this,i=r[t]=r[t]||[];for(e=0;e<i.length;e++)if(i[e]===n)return!0;return i.push(n),n.on&&n.on("drop",function(){n.tagRemove(t)}),!0},tagRemove:function(t){var e,n=r[t];if(n)for(e=0;e<n.length;e++)if(n[e]===this)return n.splice(e,1),!0;return!1},tagLookup:function(t){return r[t]||[]},tagDrop:function(t,e){var n,i,r,o=this.tagLookup(t);if(n=function(){i--,e&&0===i&&e(!1)},o.length)for(i=o.length,r=o.length-1;r>=0;r--)o[r].drop(n);return!0}},e.exports=i},{}],22:[function(t,e,n){"use strict";var i=t("./Overload"),r={addTrigger:function(t,e,n,i){var r,o=this;return r=o._triggerIndexOf(t,e,n),-1===r?(o._trigger=o._trigger||{},o._trigger[e]=o._trigger[e]||{},o._trigger[e][n]=o._trigger[e][n]||[],o._trigger[e][n].push({id:t,method:i,enabled:!0}),!0):!1},removeTrigger:function(t,e,n){var i,r=this;return i=r._triggerIndexOf(t,e,n),i>-1&&r._trigger[e][n].splice(i,1),!1},enableTrigger:new i({string:function(t){var e,n,i,r,o,s=this,a=s._trigger,c=!1;if(a)for(o in a)if(a.hasOwnProperty(o)&&(e=a[o]))for(i in e)if(e.hasOwnProperty(i))for(n=e[i],r=0;r<n.length;r++)n[r].id===t&&(n[r].enabled=!0,c=!0);return c},number:function(t){var e,n,i,r=this,o=r._trigger[t],s=!1;if(o)for(n in o)if(o.hasOwnProperty(n))for(e=o[n],i=0;i<e.length;i++)e[i].enabled=!0,s=!0;return s},"number, number":function(t,e){var n,i,r=this,o=r._trigger[t],s=!1;if(o&&(n=o[e]))for(i=0;i<n.length;i++)n[i].enabled=!0,s=!0;return s},"string, number, number":function(t,e,n){var i=this,r=i._triggerIndexOf(t,e,n);return r>-1?(i._trigger[e][n][r].enabled=!0,!0):!1}}),disableTrigger:new i({string:function(t){var e,n,i,r,o,s=this,a=s._trigger,c=!1;if(a)for(o in a)if(a.hasOwnProperty(o)&&(e=a[o]))for(i in e)if(e.hasOwnProperty(i))for(n=e[i],r=0;r<n.length;r++)n[r].id===t&&(n[r].enabled=!1,c=!0);return c},number:function(t){var e,n,i,r=this,o=r._trigger[t],s=!1;if(o)for(n in o)if(o.hasOwnProperty(n))for(e=o[n],i=0;i<e.length;i++)e[i].enabled=!1,s=!0;return s},"number, number":function(t,e){var n,i,r=this,o=r._trigger[t],s=!1;if(o&&(n=o[e]))for(i=0;i<n.length;i++)n[i].enabled=!1,s=!0;return s},"string, number, number":function(t,e,n){var i=this,r=i._triggerIndexOf(t,e,n);return r>-1?(i._trigger[e][n][r].enabled=!1,!0):!1}}),willTrigger:function(t,e){if(this._trigger&&this._trigger[t]&&this._trigger[t][e]&&this._trigger[t][e].length){var n,i=this._trigger[t][e];for(n=0;n<i.length;n++)if(i[n].enabled)return!0}return!1},processTrigger:function(t,e,n,i,r){var o,s,a,c,u,h=this;if(h._trigger&&h._trigger[e]&&h._trigger[e][n]){for(o=h._trigger[e][n],a=o.length,s=0;a>s;s++)if(c=o[s],c.enabled){if(this.debug()){var f,l;switch(e){case this.TYPE_INSERT:f="insert";break;case this.TYPE_UPDATE:f="update";break;case this.TYPE_REMOVE:f="remove";break;default:f=""}switch(n){case this.PHASE_BEFORE:l="before";break;case this.PHASE_AFTER:l="after";break;default:l=""}}if(u=c.method.call(h,t,i,r),u===!1)return!1;if(void 0!==u&&u!==!0&&u!==!1)throw"ForerunnerDB.Mixin.Triggers: Trigger error: "+u}return!0}},_triggerIndexOf:function(t,e,n){var i,r,o,s=this;if(s._trigger&&s._trigger[e]&&s._trigger[e][n])for(i=s._trigger[e][n],r=i.length,o=0;r>o;o++)if(i[o].id===t)return o;return-1}};e.exports=r},{"./Overload":25}],23:[function(t,e,n){"use strict";var i={_updateProperty:function(t,e,n){t[e]=n,this.debug()&&console.log(this.logIdentifier()+' Setting non-data-bound document property "'+e+'"')},_updateIncrement:function(t,e,n){t[e]+=n},_updateSpliceMove:function(t,e,n){t.splice(n,0,t.splice(e,1)[0]),this.debug()&&console.log(this.logIdentifier()+' Moving non-data-bound document array index from "'+e+'" to "'+n+'"')},_updateSplicePush:function(t,e,n){t.length>e?t.splice(e,0,n):t.push(n)},_updatePush:function(t,e){t.push(e)},_updatePull:function(t,e){t.splice(e,1)},_updateMultiply:function(t,e,n){t[e]*=n},_updateRename:function(t,e,n){t[n]=t[e],delete t[e]},_updateOverwrite:function(t,e,n){t[e]=n},_updateUnset:function(t,e){delete t[e]},_updateClear:function(t,e){var n,i=t[e];if(i&&"object"==typeof i)for(n in i)i.hasOwnProperty(n)&&this._updateUnset(i,n)},_updatePop:function(t,e){var n,i=!1;if(t.length>0)if(e>0){for(n=0;e>n;n++)t.pop();i=!0}else if(0>e){for(n=0;n>e;n--)t.shift();i=!0}return i}};e.exports=i},{}],24:[function(t,e,n){"use strict";var i=t("./Shared"),r=t("./Path"),o=function(t){this.pathSolver=new r,this.counter=0,this.init.apply(this,arguments)};o.prototype.init=function(t){this._data={operation:t,index:{potential:[],used:!1},steps:[],time:{startMs:0,stopMs:0,totalMs:0,process:{}},flag:{},log:[]}},i.addModule("Operation",o),i.mixin(o.prototype,"Mixin.ChainReactor"),o.prototype.start=function(){this._data.time.startMs=(new Date).getTime()},o.prototype.log=function(t){if(t){var e=this._log.length>0?this._data.log[this._data.log.length-1].time:0,n={event:t,time:(new Date).getTime(),delta:0};return this._data.log.push(n),e&&(n.delta=n.time-e),this}return this._data.log},o.prototype.time=function(t){if(void 0!==t){var e=this._data.time.process,n=e[t]=e[t]||{};return n.startMs?(n.stopMs=(new Date).getTime(),n.totalMs=n.stopMs-n.startMs,n.stepObj.totalMs=n.totalMs,delete n.stepObj):(n.startMs=(new Date).getTime(),n.stepObj={name:t},this._data.steps.push(n.stepObj)),this}return this._data.time},o.prototype.flag=function(t,e){return void 0===t||void 0===e?void 0!==t?this._data.flag[t]:this._data.flag:void(this._data.flag[t]=e)},o.prototype.data=function(t,e,n){return void 0!==e?(this.pathSolver.set(this._data,t,e),this):this.pathSolver.get(this._data,t)},o.prototype.pushData=function(t,e,n){this.pathSolver.push(this._data,t,e)},o.prototype.stop=function(){this._data.time.stopMs=(new Date).getTime(),this._data.time.totalMs=this._data.time.stopMs-this._data.time.startMs},i.finishModule("Operation"),e.exports=o},{"./Path":26,"./Shared":32}],25:[function(t,e,n){"use strict";var i=function(t){if(t){var e,n,i,r,o,s,a=this;if(!(t instanceof Array)){i={};for(e in t)if(t.hasOwnProperty(e))if(r=e.replace(/ /g,""),-1===r.indexOf("*"))i[r]=t[e];else for(s=this.generateSignaturePermutations(r),o=0;o<s.length;o++)i[s[o]]||(i[s[o]]=t[e]);t=i}return function(){var i,r,o,s=[];if(t instanceof Array){for(n=t.length,e=0;n>e;e++)if(t[e].length===arguments.length)return a.callExtend(this,"$main",t,t[e],arguments)}else{for(e=0;e<arguments.length&&(r=typeof arguments[e],"object"===r&&arguments[e]instanceof Array&&(r="array"),1!==arguments.length||"undefined"!==r);e++)s.push(r);if(i=s.join(","),t[i])return a.callExtend(this,"$main",t,t[i],arguments);for(e=s.length;e>=0;e--)if(i=s.slice(0,e).join(","),t[i+",..."])return a.callExtend(this,"$main",t,t[i+",..."],arguments)}throw o="function"==typeof this.name?this.name():"Unknown",console.log("Overload: ",t),'ForerunnerDB.Overload "'+o+'": Overloaded method does not have a matching signature for the passed arguments: '+this.jStringify(s)}}return function(){}};i.prototype.generateSignaturePermutations=function(t){var e,n,i=[],r=["string","object","number","function","undefined"];if(t.indexOf("*")>-1)for(n=0;n<r.length;n++)e=t.replace("*",r[n]),i=i.concat(this.generateSignaturePermutations(e));else i.push(t);return i},i.prototype.callExtend=function(t,e,n,i,r){var o,s;return t&&n[e]?(o=t[e],t[e]=n[e],s=i.apply(t,r),t[e]=o,s):i.apply(t,r)},e.exports=i},{}],26:[function(t,e,n){"use strict";var i=t("./Shared"),r=function(t){this.init.apply(this,arguments)};r.prototype.init=function(t){t&&this.path(t)},i.addModule("Path",r),i.mixin(r.prototype,"Mixin.Common"),i.mixin(r.prototype,"Mixin.ChainReactor"),r.prototype.path=function(t){return void 0!==t?(this._path=this.clean(t),this._pathParts=this._path.split("."),this):this._path},r.prototype.hasObjectPaths=function(t,e){var n,i=!0;for(n in t)if(t.hasOwnProperty(n)){if(void 0===e[n])return!1;if("object"==typeof t[n]&&(i=this.hasObjectPaths(t[n],e[n]),!i))return!1}return i},r.prototype.countKeys=function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&void 0!==t[e]&&("object"!=typeof t[e]?n++:n+=this.countKeys(t[e]));return n},r.prototype.countObjectPaths=function(t,e){var n,i,r={},o=0,s=0;for(i in e)e.hasOwnProperty(i)&&("object"==typeof e[i]?(n=this.countObjectPaths(t[i],e[i]),r[i]=n.matchedKeys,s+=n.totalKeyCount,o+=n.matchedKeyCount):(s++,t&&t[i]&&"object"!=typeof t[i]?(r[i]=!0,o++):r[i]=!1));return{matchedKeys:r,matchedKeyCount:o,totalKeyCount:s}},r.prototype.parse=function(t,e){var n,i,r,o=[],s="";for(i in t)if(t.hasOwnProperty(i))if(s=i,"object"==typeof t[i])if(e)for(n=this.parse(t[i],e),r=0;r<n.length;r++)o.push({path:s+"."+n[r].path,value:n[r].value});else for(n=this.parse(t[i]),r=0;r<n.length;r++)o.push({path:s+"."+n[r].path});else e?o.push({path:s,value:t[i]}):o.push({path:s});return o},r.prototype.parseArr=function(t,e){return e=e||{},this._parseArr(t,"",[],e)},r.prototype._parseArr=function(t,e,n,i){var r,o="";e=e||"",n=n||[];for(r in t)t.hasOwnProperty(r)&&(!i.ignore||i.ignore&&!i.ignore.test(r))&&(o=e?e+"."+r:r,"object"==typeof t[r]?(i.verbose&&n.push(o),this._parseArr(t[r],o,n,i)):n.push(o));return n},r.prototype.value=function(t,e){if(void 0!==t&&"object"==typeof t){var n,i,r,o,s,a,c,u=[];for(void 0!==e&&(e=this.clean(e),n=e.split(".")),i=n||this._pathParts,r=i.length,o=t,a=0;r>a;a++){if(o=o[i[a]],s instanceof Array){for(c=0;c<s.length;c++)u=u.concat(this.value(s,c+"."+i[a]));return u}if(!o||"object"!=typeof o)break;s=o}return[o]}return[]},r.prototype.set=function(t,e,n){if(void 0!==t&&void 0!==e){var i,r;e=this.clean(e),i=e.split("."),r=i.shift(),i.length?(t[r]=t[r]||{},this.set(t[r],i.join("."),n)):t[r]=n}return t},r.prototype.get=function(t,e){return this.value(t,e)[0]},r.prototype.push=function(t,e,n){if(void 0!==t&&void 0!==e){var i,r;if(e=this.clean(e),i=e.split("."),r=i.shift(),i.length)t[r]=t[r]||{},this.set(t[r],i.join("."),n);else{if(t[r]=t[r]||[],!(t[r]instanceof Array))throw"ForerunnerDB.Path: Cannot push to a path whose endpoint is not an array!";t[r].push(n)}}return t},r.prototype.keyValue=function(t,e){var n,i,r,o,s,a,c;for(void 0!==e&&(e=this.clean(e),n=e.split(".")),i=n||this._pathParts,r=i.length,o=t,c=0;r>c;c++){if(o=o[i[c]],!o||"object"!=typeof o){a=i[c]+":"+o;break}s=o}return a},r.prototype.set=function(t,e,n){if(void 0!==t&&void 0!==e){var i,r;e=this.clean(e),i=e.split("."),r=i.shift(),i.length?(t[r]=t[r]||{},this.set(t[r],i.join("."),n)):t[r]=n}return t},r.prototype.clean=function(t){return"."===t.substr(0,1)&&(t=t.substr(1,t.length-1)),t},i.finishModule("Path"),e.exports=r},{"./Shared":32}],27:[function(t,e,n){"use strict";var i,r,o,s,a,c,u,h,f,l=t("./Shared"),d=t("async"),p=t("localforage");t("./PersistCompress"),t("./PersistCrypto");h=function(){this.init.apply(this,arguments)},h.prototype.localforage=p,h.prototype.init=function(t){var e=this;this._encodeSteps=[function(){return e._encode.apply(e,arguments)}],this._decodeSteps=[function(){return e._decode.apply(e,arguments)}],t.isClient()&&void 0!==window.Storage&&(this.mode("localforage"),p.config({driver:[p.INDEXEDDB,p.WEBSQL,p.LOCALSTORAGE],name:String(t.core().name()),storeName:"FDB"}))},l.addModule("Persist",h),l.mixin(h.prototype,"Mixin.ChainReactor"),l.mixin(h.prototype,"Mixin.Common"),i=l.modules.Db,r=t("./Collection"),o=r.prototype.drop,s=t("./CollectionGroup"),a=r.prototype.init,c=i.prototype.init,u=i.prototype.drop,f=l.overload,h.prototype.mode=function(t){return void 0!==t?(this._mode=t,this):this._mode},h.prototype.driver=function(t){if(void 0!==t){switch(t.toUpperCase()){case"LOCALSTORAGE":p.setDriver(p.LOCALSTORAGE);break;case"WEBSQL":p.setDriver(p.WEBSQL);break;case"INDEXEDDB":p.setDriver(p.INDEXEDDB);break;default:throw"ForerunnerDB.Persist: The persistence driver you have specified is not found. Please use either IndexedDB, WebSQL or LocalStorage!"}return this}return p.driver()},h.prototype.decode=function(t,e){d.waterfall([function(e){e&&e(!1,t,{})}].concat(this._decodeSteps),e)},h.prototype.encode=function(t,e){d.waterfall([function(e){e&&e(!1,t,{})}].concat(this._encodeSteps),e)},l.synthesize(h.prototype,"encodeSteps"),l.synthesize(h.prototype,"decodeSteps"),h.prototype.addStep=new f({object:function(t){this.$main.call(this,function(){t.encode.apply(t,arguments)},function(){t.decode.apply(t,arguments)},0)},"function, function":function(t,e){this.$main.call(this,t,e,0)},"function, function, number":function(t,e,n){this.$main.call(this,t,e,n)},$main:function(t,e,n){0===n||void 0===n?(this._encodeSteps.push(t),this._decodeSteps.unshift(e)):(this._encodeSteps.splice(n,0,t),this._decodeSteps.splice(this._decodeSteps.length-n,0,e))}}),h.prototype.unwrap=function(t){var e,n=t.split("::fdb::");switch(n[0]){case"json":e=this.jParse(n[1]);break;case"raw":e=n[1]}},h.prototype._decode=function(t,e,n){var i,r;if(t){switch(i=t.split("::fdb::"),i[0]){case"json":r=this.jParse(i[1]);break;case"raw":r=i[1]}r?(e.foundData=!0,e.rowCount=r.length):e.foundData=!1,n&&n(!1,r,e)}else e.foundData=!1,e.rowCount=0,n&&n(!1,t,e)},h.prototype._encode=function(t,e,n){var i=t;t="object"==typeof t?"json::fdb::"+this.jStringify(t):"raw::fdb::"+t,i?(e.foundData=!0,e.rowCount=i.length):e.foundData=!1,n&&n(!1,t,e)},h.prototype.save=function(t,e,n){switch(this.mode()){case"localforage":this.encode(e,function(e,i,r){p.setItem(t,i).then(function(t){n&&n(!1,t,r)},function(t){n&&n(t)})});break;default:n&&n("No data handler.")}},h.prototype.load=function(t,e){var n=this;switch(this.mode()){case"localforage":p.getItem(t).then(function(t){n.decode(t,e)},function(t){e&&e(t)});break;default:e&&e("No data handler or unrecognised data type.")}},h.prototype.drop=function(t,e){switch(this.mode()){case"localforage":p.removeItem(t).then(function(){e&&e(!1)},function(t){e&&e(t)});break;default:e&&e("No data handler or unrecognised data type.")}},r.prototype.drop=new f({"":function(){this.isDropped()||this.drop(!0)},"function":function(t){this.isDropped()||this.drop(!0,t)},"boolean":function(t){if(!this.isDropped()){if(t){if(!this._name)throw"ForerunnerDB.Persist: Cannot drop a collection's persistent storage when no name assigned to collection!";this._db&&(this._db.persist.drop(this._db._name+"-"+this._name),this._db.persist.drop(this._db._name+"-"+this._name+"-metaData"))}o.call(this)}},"boolean, function":function(t,e){var n=this;if(!this.isDropped()){if(!t)return o.call(this,e);if(this._name){if(this._db)return this._db.persist.drop(this._db._name+"-"+this._name,function(){n._db.persist.drop(n._db._name+"-"+n._name+"-metaData",e)}),o.call(this);e&&e("Cannot drop a collection's persistent storage when the collection is not attached to a database!")}else e&&e("Cannot drop a collection's persistent storage when no name assigned to collection!")}}}),r.prototype.save=function(t){var e,n=this;n._name?n._db?(e=function(){n._db.persist.save(n._db._name+"-"+n._name,n._data,function(e,i,r){e?t&&t(e):n._db.persist.save(n._db._name+"-"+n._name+"-metaData",n.metaData(),function(e,n,i){t&&t(e,n,r,i)})})},n.isProcessingQueue()?n.on("queuesComplete",function(){e()}):e()):t&&t("Cannot save a collection that is not attached to a database!"):t&&t("Cannot save a collection with no assigned name!")},r.prototype.load=function(t){var e=this;e._name?e._db?e._db.persist.load(e._db._name+"-"+e._name,function(n,i,r){n?t&&t(n):(i&&(e.remove({}),e.insert(i)),e._db.persist.load(e._db._name+"-"+e._name+"-metaData",function(n,i,o){n||i&&e.metaData(i),t&&t(n,r,o)}))}):t&&t("Cannot load a collection that is not attached to a database!"):t&&t("Cannot load a collection with no assigned name!")},i.prototype.init=function(){c.apply(this,arguments),this.persist=new h(this)},i.prototype.load=function(t){var e,n,i=this._collection,r=i.keys(),o=r.length;e=function(e){e?t&&t(e):(o--,0===o&&t&&t(!1))};for(n in i)i.hasOwnProperty(n)&&i[n].load(e)},i.prototype.save=function(t){var e,n,i=this._collection,r=i.keys(),o=r.length;e=function(e){e?t&&t(e):(o--,0===o&&t&&t(!1))};for(n in i)i.hasOwnProperty(n)&&i[n].save(e)},l.finishModule("Persist"),e.exports=h},{"./Collection":5,"./CollectionGroup":6,"./PersistCompress":28,"./PersistCrypto":29,"./Shared":32,async:34,localforage:69}],28:[function(t,e,n){"use strict";var i=t("./Shared"),r=t("pako"),o=function(){this.init.apply(this,arguments)};o.prototype.init=function(t){},i.mixin(o.prototype,"Mixin.Common"),o.prototype.encode=function(t,e,n){var i,o,s,a={data:t,type:"fdbCompress",enabled:!1};i=t.length,s=r.deflate(t,{to:"string"}),o=s.length,i>o&&(a.data=s,a.enabled=!0),e.compression={enabled:a.enabled,compressedBytes:o,uncompressedBytes:i,effect:Math.round(100/i*o)+"%"},n(!1,this.jStringify(a),e)},o.prototype.decode=function(t,e,n){var i,o=!1;t?(t=this.jParse(t),t.enabled?(i=r.inflate(t.data,{to:"string"}),o=!0):(i=t.data,o=!1),e.compression={enabled:o},n&&n(!1,i,e)):n&&n(!1,i,e)},i.plugins.FdbCompress=o,e.exports=o},{"./Shared":32,pako:70}],29:[function(t,e,n){"use strict";var i=t("./Shared"),r=t("crypto-js"),o=function(){this.init.apply(this,arguments)};o.prototype.init=function(t){if(!t||!t.pass)throw'Cannot initialise persistent storage encryption without a passphrase provided in the passed options object as the "pass" field.';this._algo=t.algo||"AES",this._pass=t.pass},i.mixin(o.prototype,"Mixin.Common"),i.synthesize(o.prototype,"pass"),o.prototype.stringify=function(t){var e={ct:t.ciphertext.toString(r.enc.Base64)};return t.iv&&(e.iv=t.iv.toString()),t.salt&&(e.s=t.salt.toString()),this.jStringify(e)},o.prototype.parse=function(t){var e=this.jParse(t),n=r.lib.CipherParams.create({ciphertext:r.enc.Base64.parse(e.ct)});return e.iv&&(n.iv=r.enc.Hex.parse(e.iv)),e.s&&(n.salt=r.enc.Hex.parse(e.s)),n},o.prototype.encode=function(t,e,n){var i,o=this,s={type:"fdbCrypto"};i=r[this._algo].encrypt(t,this._pass,{format:{stringify:function(){return o.stringify.apply(o,arguments)},parse:function(){return o.parse.apply(o,arguments)}}}),s.data=i.toString(),s.enabled=!0,e.encryption={enabled:s.enabled},n&&n(!1,this.jStringify(s),e)},o.prototype.decode=function(t,e,n){var i,o=this;t?(t=this.jParse(t),i=r[this._algo].decrypt(t.data,this._pass,{format:{stringify:function(){return o.stringify.apply(o,arguments)},parse:function(){return o.parse.apply(o,arguments)}}}).toString(r.enc.Utf8),n&&n(!1,i,e)):n&&n(!1,t,e)},i.plugins.FdbCrypto=o,e.exports=o},{"./Shared":32,"crypto-js":43}],30:[function(t,e,n){"use strict";var i=t("./Shared"),r=function(t,e,n){if(!(t&&e&&n))throw"ForerunnerDB.ReactorIO: ReactorIO requires in, out and process arguments to instantiate!";if(this._reactorIn=t,this._reactorOut=e,this._chainHandler=n,!t.chain||!e.chainReceive)throw"ForerunnerDB.ReactorIO: ReactorIO requires passed in and out objects to implement the ChainReactor mixin!";t.chain(this),this.chain(e)};i.addModule("ReactorIO",r),r.prototype.drop=function(){return this.isDropped()||(this._state="dropped",this._reactorIn&&this._reactorIn.unChain(this),this._reactorOut&&this.unChain(this._reactorOut),delete this._reactorIn,delete this._reactorOut,delete this._chainHandler,this.emit("drop",this)),!0},i.synthesize(r.prototype,"state"),i.mixin(r.prototype,"Mixin.Common"),i.mixin(r.prototype,"Mixin.ChainReactor"),i.mixin(r.prototype,"Mixin.Events"),i.finishModule("ReactorIO"),e.exports=r},{"./Shared":32}],31:[function(t,e,n){"use strict";var i=function(){this.init.apply(this,arguments)};i.prototype.init=function(){this._encoder=[],this._decoder={},this.registerEncoder("$date",function(t){return t instanceof Date?t.toISOString():void 0}),this.registerDecoder("$date",function(t){return new Date(t)})},i.prototype.registerEncoder=function(t,e){this._encoder.push(function(n){var i,r=e(n);return void 0!==r&&(i={},i[t]=r),i})},i.prototype.registerDecoder=function(t,e){this._decoder[t]=e},i.prototype._encode=function(t){for(var e,n=this._encoder.length;n--&&!e;)e=this._encoder[n](t);return e},i.prototype.parse=function(t){return this._parse(JSON.parse(t))},i.prototype._parse=function(t,e){var n;if("object"==typeof t&&null!==t){e=t instanceof Array?e||[]:e||{};for(n in t)if(t.hasOwnProperty(n)){if("$"===n.substr(0,1)&&this._decoder[n])return this._decoder[n](t[n]);e[n]=this._parse(t[n],e[n])}}else e=t;return e},i.prototype.stringify=function(t){return JSON.stringify(this._stringify(t))},i.prototype._stringify=function(t,e){var n,i;if("object"==typeof t&&null!==t){if(n=this._encode(t))return n;e=t instanceof Array?e||[]:e||{};for(i in t)t.hasOwnProperty(i)&&(e[i]=this._stringify(t[i],e[i]))}else e=t;return e},e.exports=i},{}],32:[function(t,e,n){"use strict";var i=t("./Overload"),r={version:"1.3.465",modules:{},plugins:{},_synth:{},addModule:function(t,e){this.modules[t]=e,this.emit("moduleLoad",[t,e])},finishModule:function(t){if(!this.modules[t])throw"ForerunnerDB.Shared: finishModule called on a module that has not been registered with addModule(): "+t;this.modules[t]._fdbFinished=!0,this.modules[t].prototype?this.modules[t].prototype.className=t:this.modules[t].className=t,this.emit("moduleFinished",[t,this.modules[t]])},moduleFinished:function(t,e){this.modules[t]&&this.modules[t]._fdbFinished?e&&e(t,this.modules[t]):this.on("moduleFinished",e)},moduleExists:function(t){return Boolean(this.modules[t])},mixin:new i({"object, string":function(t,e){var n;if("string"==typeof e&&(n=this.mixins[e],!n))throw"ForerunnerDB.Shared: Cannot find mixin named: "+e;return this.$main.call(this,t,n)},"object, *":function(t,e){return this.$main.call(this,t,e)},$main:function(t,e){if(e&&"object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}}),synthesize:function(t,e,n){if(this._synth[e]=this._synth[e]||function(t){return void 0!==t?(this["_"+e]=t,this):this["_"+e]},n){var i=this;t[e]=function(){var t,r=this.$super;return this.$super=i._synth[e],t=n.apply(this,arguments),this.$super=r,t}}else t[e]=this._synth[e]},overload:i,mixins:{"Mixin.Common":t("./Mixin.Common"),"Mixin.Events":t("./Mixin.Events"),"Mixin.ChainReactor":t("./Mixin.ChainReactor"),"Mixin.CRUD":t("./Mixin.CRUD"),"Mixin.Constants":t("./Mixin.Constants"),"Mixin.Triggers":t("./Mixin.Triggers"),"Mixin.Sorting":t("./Mixin.Sorting"),"Mixin.Matching":t("./Mixin.Matching"),"Mixin.Updating":t("./Mixin.Updating"),"Mixin.Tags":t("./Mixin.Tags")}};r.mixin(r,"Mixin.Events"),e.exports=r},{"./Mixin.CRUD":14,"./Mixin.ChainReactor":15,"./Mixin.Common":16,"./Mixin.Constants":17,"./Mixin.Events":18,"./Mixin.Matching":19,"./Mixin.Sorting":20,"./Mixin.Tags":21,"./Mixin.Triggers":22,"./Mixin.Updating":23,"./Overload":25}],33:[function(t,e,n){Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],r=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in e){var s=e[o];t.call(r,s,o,e)&&i.push(s)}return i}),"function"!=typeof Object.create&&(Object.create=function(){var t=function(){};return function(e){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof e)throw TypeError("Argument must be an object");t.prototype=e;var n=new t;return t.prototype=null,n}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null===this)throw new TypeError('"this" is null or not defined');var i=Object(this),r=i.length>>>0;if(0===r)return-1;var o=+e||0;if(Math.abs(o)===1/0&&(o=0),o>=r)return-1;for(n=Math.max(o>=0?o:r-Math.abs(o),0);r>n;){if(n in i&&i[n]===t)return n;n++}return-1}),e.exports={}},{}],34:[function(t,e,n){(function(t,n){!function(){function i(){}function r(t){return t}function o(t){return!!t}function s(t){return!t}function a(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function c(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function u(t){return F(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function h(t,e){for(var n=-1,i=t.length;++n<i;)e(t[n],n,t)}function f(t,e){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function l(t){return f(Array(t),function(t,e){return e})}function d(t,e,n){return h(t,function(t,i,r){n=e(n,t,i,r)}),n}function p(t,e){h(K(t),function(n){e(t[n],n)})}function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function y(t){var e,n,i=-1;return u(t)?(e=t.length,function(){return i++,e>i?i:null}):(n=K(t),e=n.length,function(){return i++,e>i?n[i]:null})}function m(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;n>r;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i)}}}function g(t){return function(e,n,i){return t(e,i)}}function v(t){return function(e,n,r){r=c(r||i),e=e||[];var o=y(e);if(0>=t)return r(null);var s=!1,u=0,h=!1;!function f(){if(s&&0>=u)return r(null);for(;t>u&&!h;){var i=o();if(null===i)return s=!0,void(0>=u&&r(null));u+=1,n(e[i],i,a(function(t){u-=1,t?(r(t),h=!0):f()}))}}()}}function b(t){return function(e,n,i){return t(R.eachOf,e,n,i)}}function w(t){return function(e,n,i,r){return t(v(n),e,i,r)}}function k(t){return function(e,n,i){return t(R.eachOfSeries,e,n,i)}}function x(t,e,n,r){r=c(r||i),e=e||[];var o=u(e)?[]:{};t(e,function(t,e,i){n(t,function(t,n){o[e]=n,i(t)})},function(t){r(t,o)})}function S(t,e,n,i){var r=[];t(e,function(t,e,i){n(t,function(n){n&&r.push({index:e,value:t}),i()})},function(){i(f(r.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function B(t,e,n,i){S(t,e,function(t,e){n(t,function(t){e(!t)})},i)}function E(t,e,n){return function(i,r,o,s){function a(){s&&s(n(!1,void 0))}function c(t,i,r){return s?void o(t,function(i){s&&e(i)&&(s(n(!0,t)),s=o=!1),r()}):r()}arguments.length>3?t(i,r,c,a):(s=o,o=r,t(i,c,a))}}function C(t,e){return e}function O(t,e,n){n=n||i;var r=u(e)?[]:{};t(e,function(t,e,n){t(m(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function I(t,e,n,i){var r=[];t(e,function(t,e,i){n(t,function(t,e){r=r.concat(e||[]),i(t)})},function(t){i(t,r)})}function A(t,e,n){function r(t,e,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,F(e)||(e=[e]),0===e.length&&t.idle()?R.setImmediate(function(){t.drain()}):(h(e,function(e){var o={data:e,callback:r||i};n?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated()}),void R.setImmediate(t.process))}function o(t,e){return function(){s-=1;var n=!1,i=arguments;h(e,function(t){h(c,function(e,i){e!==t||n||(c.splice(i,1),n=!0)}),t.callback.apply(t,i)}),t.tasks.length+s===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,c=[],u={tasks:[],concurrency:e,payload:n,saturated:i,empty:i,drain:i,started:!1,paused:!1,push:function(t,e){r(u,t,!1,e)},kill:function(){u.drain=i,u.tasks=[]},unshift:function(t,e){r(u,t,!0,e)},process:function(){for(;!u.paused&&s<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=f(e,function(t){return t.data});0===u.tasks.length&&u.empty(),s+=1,c.push(e[0]);var i=a(o(u,e));t(n,i)}},length:function(){return u.tasks.length},running:function(){return s},workersList:function(){return c},idle:function(){return u.tasks.length+s===0},pause:function(){u.paused=!0},resume:function(){if(u.paused!==!1){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;t>=e;e++)R.setImmediate(u.process)}}};return u}function z(t){return m(function(e,n){e.apply(null,n.concat([m(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&h(n,function(e){console[t](e)}))})]))})}function P(t){return function(e,n,i){t(l(e),n,i)}}function D(t){return m(function(e,n){var i=m(function(n){var i=this,r=n.pop();return t(e,function(t,e,r){t.apply(i,n.concat([r]))},r)});return n.length?i.apply(this,n):i})}function j(t){return m(function(e){var n=e.pop();e.push(function(){var t=arguments;i?R.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var i=!0;t.apply(this,e),i=!1})}var M,R={},$="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=$&&(M=$.async),R.noConflict=function(){return $.async=M,R};var T=Object.prototype.toString,F=Array.isArray||function(t){return"[object Array]"===T.call(t)},H=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},K=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},L="function"==typeof setImmediate&&setImmediate,N=L?function(t){L(t)}:function(t){setTimeout(t,0)};"object"==typeof t&&"function"==typeof t.nextTick?R.nextTick=t.nextTick:R.nextTick=N,R.setImmediate=L?N:R.nextTick,R.forEach=R.each=function(t,e,n){return R.eachOf(t,g(e),n)},R.forEachSeries=R.eachSeries=function(t,e,n){return R.eachOfSeries(t,g(e),n)},R.forEachLimit=R.eachLimit=function(t,e,n,i){return v(e)(t,g(n),i)},R.forEachOf=R.eachOf=function(t,e,n){function r(t){u--,t?n(t):null===o&&0>=u&&n(null)}n=c(n||i),t=t||[];for(var o,s=y(t),u=0;null!=(o=s());)u+=1,e(t[o],o,a(r));0===u&&n(null)},R.forEachOfSeries=R.eachOfSeries=function(t,e,n){function r(){var i=!0;return null===s?n(null):(e(t[s],s,a(function(t){if(t)n(t);else{if(s=o(),null===s)return n(null);i?R.setImmediate(r):r()}})),void(i=!1))}n=c(n||i),t=t||[];var o=y(t),s=o();r()},R.forEachOfLimit=R.eachOfLimit=function(t,e,n,i){v(e)(t,n,i)},R.map=b(x),R.mapSeries=k(x),R.mapLimit=w(x),R.inject=R.foldl=R.reduce=function(t,e,n,i){R.eachOfSeries(t,function(t,i,r){n(e,t,function(t,n){e=n,r(t)})},function(t){i(t,e)})},R.foldr=R.reduceRight=function(t,e,n,i){var o=f(t,r).reverse();R.reduce(o,e,n,i)},R.transform=function(t,e,n,i){3===arguments.length&&(i=n,n=e,e=F(t)?[]:{}),R.eachOf(t,function(t,i,r){
n(e,t,i,r)},function(t){i(t,e)})},R.select=R.filter=b(S),R.selectLimit=R.filterLimit=w(S),R.selectSeries=R.filterSeries=k(S),R.reject=b(B),R.rejectLimit=w(B),R.rejectSeries=k(B),R.any=R.some=E(R.eachOf,o,r),R.someLimit=E(R.eachOfLimit,o,r),R.all=R.every=E(R.eachOf,s,s),R.everyLimit=E(R.eachOfLimit,s,s),R.detect=E(R.eachOf,r,C),R.detectSeries=E(R.eachOfSeries,r,C),R.detectLimit=E(R.eachOfLimit,r,C),R.sortBy=function(t,e,n){function i(t,e){var n=t.criteria,i=e.criteria;return i>n?-1:n>i?1:0}R.map(t,function(t,n){e(t,function(e,i){e?n(e):n(null,{value:t,criteria:i})})},function(t,e){return t?n(t):void n(null,f(e.sort(i),function(t){return t.value}))})},R.auto=function(t,e,n){function r(t){g.unshift(t)}function o(t){var e=_(g,t);e>=0&&g.splice(e,1)}function s(){u--,h(g.slice(0),function(t){t()})}"function"==typeof arguments[1]&&(n=e,e=null),n=c(n||i);var a=K(t),u=a.length;if(!u)return n(null);e||(e=u);var f={},l=0,y=!1,g=[];r(function(){u||n(null,f)}),h(a,function(i){function a(){return e>l&&d(v,function(t,e){return t&&f.hasOwnProperty(e)},!0)&&!f.hasOwnProperty(i)}function c(){a()&&(l++,o(c),h[h.length-1](g,f))}if(!y){for(var u,h=F(t[i])?t[i]:[t[i]],g=m(function(t,e){if(l--,e.length<=1&&(e=e[0]),t){var r={};p(f,function(t,e){r[e]=t}),r[i]=e,y=!0,n(t,r)}else f[i]=e,R.setImmediate(s)}),v=h.slice(0,h.length-1),b=v.length;b--;){if(!(u=t[v[b]]))throw new Error("Has inexistant dependency");if(F(u)&&_(u,i)>=0)throw new Error("Has cyclic dependencies")}a()?(l++,h[h.length-1](g,f)):r(c)}})},R.retry=function(t,e,n){function i(t,e){if("number"==typeof e)t.times=parseInt(e,10)||o;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||o,t.interval=parseInt(e.interval,10)||s}}function r(t,e){function n(t,n){return function(i){t(function(t,e){i(!t||n,{err:t,result:e})},e)}}function i(t){return function(e){setTimeout(function(){e(null)},t)}}for(;c.times;){var r=!(c.times-=1);a.push(n(c.task,r)),!r&&c.interval>0&&a.push(i(c.interval))}R.series(a,function(e,n){n=n[n.length-1],(t||c.callback)(n.err,n.result)})}var o=5,s=0,a=[],c={times:o,interval:s},u=arguments.length;if(1>u||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=u&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&i(c,t),c.callback=n,c.task=e,c.callback?r():r},R.waterfall=function(t,e){function n(t){return m(function(i,r){if(i)e.apply(null,[i].concat(r));else{var o=t.next();o?r.push(n(o)):r.push(e),j(t).apply(null,r)}})}if(e=c(e||i),!F(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}return t.length?void n(R.iterator(t))():e()},R.parallel=function(t,e){O(R.eachOf,t,e)},R.parallelLimit=function(t,e,n){O(v(e),t,n)},R.series=function(t,e){O(R.eachOfSeries,t,e)},R.iterator=function(t){function e(n){function i(){return t.length&&t[n].apply(null,arguments),i.next()}return i.next=function(){return n<t.length-1?e(n+1):null},i}return e(0)},R.apply=m(function(t,e){return m(function(n){return t.apply(null,e.concat(n))})}),R.concat=b(I),R.concatSeries=k(I),R.whilst=function(t,e,n){if(n=n||i,t()){var r=m(function(i,o){i?n(i):t.apply(this,o)?e(r):n.apply(null,[null].concat(o))});e(r)}else n(null)},R.doWhilst=function(t,e,n){var i=0;return R.whilst(function(){return++i<=1||e.apply(this,arguments)},t,n)},R.until=function(t,e,n){return R.whilst(function(){return!t.apply(this,arguments)},e,n)},R.doUntil=function(t,e,n){return R.doWhilst(t,function(){return!e.apply(this,arguments)},n)},R.during=function(t,e,n){n=n||i;var r=m(function(e,i){e?n(e):(i.push(o),t.apply(this,i))}),o=function(t,i){t?n(t):i?e(r):n(null)};t(o)},R.doDuring=function(t,e,n){var i=0;R.during(function(t){i++<1?t(null,!0):e.apply(this,arguments)},t,n)},R.queue=function(t,e){var n=A(function(e,n){t(e[0],n)},e,1);return n},R.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}function r(t,e,n){for(var i=-1,r=t.length-1;r>i;){var o=i+(r-i+1>>>1);n(e,t[o])>=0?i=o:r=o-1}return i}function o(t,e,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");return t.started=!0,F(e)||(e=[e]),0===e.length?R.setImmediate(function(){t.drain()}):void h(e,function(e){var a={data:e,priority:o,callback:"function"==typeof s?s:i};t.tasks.splice(r(t.tasks,a,n)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),R.setImmediate(t.process)})}var s=R.queue(t,e);return s.push=function(t,e,n){o(s,t,e,n)},delete s.unshift,s},R.cargo=function(t,e){return A(t,1,e)},R.log=z("log"),R.dir=z("dir"),R.memoize=function(t,e){var n={},i={};e=e||r;var o=m(function(r){var o=r.pop(),s=e.apply(null,r);s in n?R.setImmediate(function(){o.apply(null,n[s])}):s in i?i[s].push(o):(i[s]=[o],t.apply(null,r.concat([m(function(t){n[s]=t;var e=i[s];delete i[s];for(var r=0,o=e.length;o>r;r++)e[r].apply(null,t)})])))});return o.memo=n,o.unmemoized=t,o},R.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},R.times=P(R.map),R.timesSeries=P(R.mapSeries),R.timesLimit=function(t,e,n,i){return R.mapLimit(l(t),e,n,i)},R.seq=function(){var t=arguments;return m(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=i,R.reduce(t,e,function(t,e,i){e.apply(n,t.concat([m(function(t,e){i(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},R.compose=function(){return R.seq.apply(null,Array.prototype.reverse.call(arguments))},R.applyEach=D(R.eachOf),R.applyEachSeries=D(R.eachOfSeries),R.forever=function(t,e){function n(t){return t?r(t):void o(n)}var r=a(e||i),o=j(t);n()},R.ensureAsync=j,R.constant=m(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),R.wrapSync=R.asyncify=function(t){return m(function(e){var n,i=e.pop();try{n=t.apply(this,e)}catch(r){return i(r)}H(n)&&"function"==typeof n.then?n.then(function(t){i(null,t)})["catch"](function(t){i(t.message?t:new Error(t))}):i(null,n)})},"object"==typeof e&&e.exports?e.exports=R:"function"==typeof define&&define.amd?define([],function(){return R}):$.async=R}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],35:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return function(){var e=t,n=e.lib,i=n.BlockCipher,r=e.algo,o=[],s=[],a=[],c=[],u=[],h=[],f=[],l=[],d=[],p=[];!function(){for(var t=[],e=0;256>e;e++)128>e?t[e]=e<<1:t[e]=e<<1^283;for(var n=0,i=0,e=0;256>e;e++){var r=i^i<<1^i<<2^i<<3^i<<4;r=r>>>8^255&r^99,o[n]=r,s[r]=n;var _=t[n],y=t[_],m=t[y],g=257*t[r]^16843008*r;a[n]=g<<24|g>>>8,c[n]=g<<16|g>>>16,u[n]=g<<8|g>>>24,h[n]=g;var g=16843009*m^65537*y^257*_^16843008*n;f[r]=g<<24|g>>>8,l[r]=g<<16|g>>>16,d[r]=g<<8|g>>>24,p[r]=g,n?(n=_^t[t[t[m^_]]],i^=t[t[i]]):n=i=1}}();var _=[0,1,2,4,8,16,32,64,128,27,54],y=r.AES=i.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,i=this._nRounds=n+6,r=4*(i+1),s=this._keySchedule=[],a=0;r>a;a++)if(n>a)s[a]=e[a];else{var c=s[a-1];a%n?n>6&&a%n==4&&(c=o[c>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c]):(c=c<<8|c>>>24,c=o[c>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c],c^=_[a/n|0]<<24),s[a]=s[a-n]^c}for(var u=this._invKeySchedule=[],h=0;r>h;h++){var a=r-h;if(h%4)var c=s[a];else var c=s[a-4];4>h||4>=a?u[h]=c:u[h]=f[o[c>>>24]]^l[o[c>>>16&255]]^d[o[c>>>8&255]]^p[o[255&c]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,c,u,h,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,f,l,d,p,s);var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,r,o,s,a){for(var c=this._nRounds,u=t[e]^n[0],h=t[e+1]^n[1],f=t[e+2]^n[2],l=t[e+3]^n[3],d=4,p=1;c>p;p++){var _=i[u>>>24]^r[h>>>16&255]^o[f>>>8&255]^s[255&l]^n[d++],y=i[h>>>24]^r[f>>>16&255]^o[l>>>8&255]^s[255&u]^n[d++],m=i[f>>>24]^r[l>>>16&255]^o[u>>>8&255]^s[255&h]^n[d++],g=i[l>>>24]^r[u>>>16&255]^o[h>>>8&255]^s[255&f]^n[d++];u=_,h=y,f=m,l=g}var _=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&l])^n[d++],y=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^n[d++],m=(a[f>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^n[d++],g=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++];t[e]=_,t[e+1]=y,t[e+2]=m,t[e+3]=g},keySize:8});e.AES=i._createHelper(y)}(),t.AES})},{"./cipher-core":36,"./core":37,"./enc-base64":38,"./evpkdf":40,"./md5":45}],36:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){t.lib.Cipher||function(e){var n=t,i=n.lib,r=i.Base,o=i.WordArray,s=i.BufferedBlockAlgorithm,a=n.enc,c=(a.Utf8,a.Base64),u=n.algo,h=u.EvpKDF,f=i.Cipher=s.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?x:b}return function(e){return{encrypt:function(n,i,r){return t(i).encrypt(e,n,i,r)},decrypt:function(n,i,r){return t(i).decrypt(e,n,i,r)}}}}()}),l=(i.StreamCipher=f.extend({_doFinalize:function(){var t=this._process(!0);return t},blockSize:1}),n.mode={}),d=i.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=l.CBC=function(){function t(t,n,i){var r=this._iv;if(r){var o=r;this._iv=e}else var o=this._prevBlock;for(var s=0;i>s;s++)t[n+s]^=o[s]}var n=d.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize;t.call(this,e,n,r),i.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),n.Decryptor=n.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize,o=e.slice(n,n+r);i.decryptBlock(e,n),t.call(this,e,n,r),this._prevBlock=o}}),n}(),_=n.pad={},y=_.Pkcs7={pad:function(t,e){for(var n=4*e,i=n-t.sigBytes%n,r=i<<24|i<<16|i<<8|i,s=[],a=0;i>a;a+=4)s.push(r);var c=o.create(s,i);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},m=(i.BlockCipher=f.extend({cfg:f.cfg.extend({mode:p,padding:y}),reset:function(){f.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else{var i=n.createDecryptor;this._minBufferSize=1}this._mode=i.call(n,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{var e=this._process(!0);t.unpad(e)}return e},blockSize:4}),i.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),g=n.format={},v=g.OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var i=o.create([1398893684,1701076831]).concat(n).concat(e);else var i=e;return i.toString(c)},parse:function(t){var e=c.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var i=o.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return m.create({ciphertext:e,salt:i})}},b=i.SerializableCipher=r.extend({cfg:r.extend({format:v}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var r=t.createEncryptor(n,i),o=r.finalize(e),s=r.cfg;return m.create({ciphertext:o,key:n,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var r=t.createDecryptor(n,i).finalize(e.ciphertext);return r},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),w=n.kdf={},k=w.OpenSSL={execute:function(t,e,n,i){i||(i=o.random(8));var r=h.create({keySize:e+n}).compute(t,i),s=o.create(r.words.slice(e),4*n);return r.sigBytes=4*e,m.create({key:r,iv:s,salt:i})}},x=i.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:k}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var r=i.kdf.execute(n,t.keySize,t.ivSize);i.iv=r.iv;var o=b.encrypt.call(this,t,e,r.key,i);return o.mixIn(r),o},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var r=i.kdf.execute(n,t.keySize,t.ivSize,e.salt);i.iv=r.iv;var o=b.decrypt.call(this,t,e,r.key,i);return o}})}()})},{"./core":37}],37:[function(t,e,n){!function(t,i){"object"==typeof n?e.exports=n=i():"function"==typeof define&&define.amd?define([],i):t.CryptoJS=i()}(this,function(){var t=t||function(t,e){var n={},i=n.lib={},r=i.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=i.WordArray=r.extend({init:function(t,n){t=this.words=t||[],n!=e?this.sigBytes=n:this.sigBytes=4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var o=0;r>o;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[i+o>>>2]|=s<<24-(i+o)%4*8}else for(var o=0;r>o;o+=4)e[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],r=function(e){var e=e,n=987654321,i=4294967295;return function(){n=36969*(65535&n)+(n>>16)&i,e=18e3*(65535&e)+(e>>16)&i;var r=(n<<16)+e&i;return r/=4294967296,r+=.5,r*(t.random()>.5?1:-1)}},s=0;e>s;s+=4){var a=r(4294967296*(n||t.random()));n=987654071*a(),i.push(4294967296*a()|0)}return new o.init(i,e)}}),s=n.enc={},a=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;n>r;r++){var o=e[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;e>i;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new o.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;n>r;r++){var o=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;e>i;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new o.init(n,e)}},u=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,s=this.blockSize,a=4*s,c=r/a;c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0);var u=c*s,h=t.min(4*u,r);if(u){for(var f=0;u>f;f+=s)this._doProcessBlock(i,f);var l=i.splice(0,u);n.sigBytes-=h}return new o.init(l,h)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(i.Hasher=h.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),n.algo={});return n}(Math);return t})},{}],38:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=e.enc;r.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],o=0;n>o;o+=3)for(var s=e[o>>>2]>>>24-o%4*8&255,a=e[o+1>>>2]>>>24-(o+1)%4*8&255,c=e[o+2>>>2]>>>24-(o+2)%4*8&255,u=s<<16|a<<8|c,h=0;4>h&&n>o+.75*h;h++)r.push(i.charAt(u>>>6*(3-h)&63));var f=i.charAt(64);if(f)for(;r.length%4;)r.push(f);return r.join("")},parse:function(t){var e=t.length,n=this._map,r=n.charAt(64);if(r){var o=t.indexOf(r);-1!=o&&(e=o)}for(var s=[],a=0,c=0;e>c;c++)if(c%4){var u=n.indexOf(t.charAt(c-1))<<c%4*2,h=n.indexOf(t.charAt(c))>>>6-c%4*2;s[a>>>2]|=(u|h)<<24-a%4*8,a++}return i.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64})},{"./core":37}],39:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){return function(){function e(t){return t<<8&4278255360|t>>>8&16711935}var n=t,i=n.lib,r=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;n>r;r+=2){var o=e[r>>>2]>>>16-r%4*8&65535;i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;e>i;i++)n[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return r.create(n,2*e)}};o.Utf16LE={stringify:function(t){for(var n=t.words,i=t.sigBytes,r=[],o=0;i>o;o+=2){var s=e(n[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(t){for(var n=t.length,i=[],o=0;n>o;o++)i[o>>>1]|=e(t.charCodeAt(o)<<16-o%2*16);return r.create(i,2*n)}}}(),t.enc.Utf16})},{"./core":37}],40:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./sha1"),t("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],r):r(i.CryptoJS)}(this,function(t){return function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,o=e.algo,s=o.MD5,a=o.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=n.hasher.create(),o=r.create(),s=o.words,a=n.keySize,c=n.iterations;s.length<a;){u&&i.update(u);var u=i.update(t).finalize(e);i.reset();for(var h=1;c>h;h++)u=i.finalize(u),i.reset();o.concat(u)}return o.sigBytes=4*a,o}});e.EvpKDF=function(t,e,n){return a.create(n).compute(t,e)}}(),t.EvpKDF})},{"./core":37,"./hmac":42,"./sha1":61}],41:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return function(e){var n=t,i=n.lib,r=i.CipherParams,o=n.enc,s=o.Hex,a=n.format;a.Hex={stringify:function(t){return t.ciphertext.toString(s)},parse:function(t){var e=s.parse(t);return r.create({ciphertext:e})}}}(),t.format.Hex})},{"./cipher-core":36,"./core":37}],42:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){!function(){var e=t,n=e.lib,i=n.Base,r=e.enc,o=r.Utf8,s=e.algo;s.HMAC=i.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var r=this._oKey=e.clone(),s=this._iKey=e.clone(),a=r.words,c=s.words,u=0;n>u;u++)a[u]^=1549556828,c[u]^=909522486;r.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);e.reset();var i=e.finalize(this._oKey.clone().concat(n));return i}})}()})},{"./core":37}],43:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./x64-core"),t("./lib-typedarrays"),t("./enc-utf16"),t("./enc-base64"),t("./md5"),t("./sha1"),t("./sha256"),t("./sha224"),t("./sha512"),t("./sha384"),t("./sha3"),t("./ripemd160"),t("./hmac"),t("./pbkdf2"),t("./evpkdf"),t("./cipher-core"),t("./mode-cfb"),t("./mode-ctr"),t("./mode-ctr-gladman"),t("./mode-ofb"),t("./mode-ecb"),t("./pad-ansix923"),t("./pad-iso10126"),t("./pad-iso97971"),t("./pad-zeropadding"),t("./pad-nopadding"),t("./format-hex"),t("./aes"),t("./tripledes"),t("./rc4"),t("./rabbit"),t("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],r):i.CryptoJS=r(i.CryptoJS)}(this,function(t){return t})},{"./aes":35,"./cipher-core":36,"./core":37,"./enc-base64":38,"./enc-utf16":39,"./evpkdf":40,"./format-hex":41,"./hmac":42,"./lib-typedarrays":44,"./md5":45,"./mode-cfb":46,"./mode-ctr":48,"./mode-ctr-gladman":47,"./mode-ecb":49,"./mode-ofb":50,"./pad-ansix923":51,"./pad-iso10126":52,"./pad-iso97971":53,"./pad-nopadding":54,"./pad-zeropadding":55,"./pbkdf2":56,"./rabbit":58,"./rabbit-legacy":57,"./rc4":59,"./ripemd160":60,"./sha1":61,"./sha224":62,"./sha256":63,"./sha3":64,"./sha384":65,"./sha512":66,"./tripledes":67,"./x64-core":68}],44:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){return function(){if("function"==typeof ArrayBuffer){var e=t,n=e.lib,i=n.WordArray,r=i.init,o=i.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,n=[],i=0;e>i;i++)n[i>>>2]|=t[i]<<24-i%4*8;r.call(this,n,e)}else r.apply(this,arguments)};o.prototype=i}}(),t.lib.WordArray})},{"./core":37}],45:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){return function(e){function n(t,e,n,i,r,o,s){var a=t+(e&n|~e&i)+r+s;return(a<<o|a>>>32-o)+e}function i(t,e,n,i,r,o,s){var a=t+(e&i|n&~i)+r+s;return(a<<o|a>>>32-o)+e}function r(t,e,n,i,r,o,s){var a=t+(e^n^i)+r+s;return(a<<o|a>>>32-o)+e}function o(t,e,n,i,r,o,s){var a=t+(n^(e|~i))+r+s;return(a<<o|a>>>32-o)+e}var s=t,a=s.lib,c=a.WordArray,u=a.Hasher,h=s.algo,f=[];!function(){for(var t=0;64>t;t++)f[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=h.MD5=u.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var s=0;16>s;s++){var a=e+s,c=t[a];t[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var u=this._hash.words,h=t[e+0],l=t[e+1],d=t[e+2],p=t[e+3],_=t[e+4],y=t[e+5],m=t[e+6],g=t[e+7],v=t[e+8],b=t[e+9],w=t[e+10],k=t[e+11],x=t[e+12],S=t[e+13],B=t[e+14],E=t[e+15],C=u[0],O=u[1],I=u[2],A=u[3];C=n(C,O,I,A,h,7,f[0]),A=n(A,C,O,I,l,12,f[1]),I=n(I,A,C,O,d,17,f[2]),O=n(O,I,A,C,p,22,f[3]),C=n(C,O,I,A,_,7,f[4]),A=n(A,C,O,I,y,12,f[5]),I=n(I,A,C,O,m,17,f[6]),O=n(O,I,A,C,g,22,f[7]),C=n(C,O,I,A,v,7,f[8]),A=n(A,C,O,I,b,12,f[9]),I=n(I,A,C,O,w,17,f[10]),O=n(O,I,A,C,k,22,f[11]),C=n(C,O,I,A,x,7,f[12]),A=n(A,C,O,I,S,12,f[13]),I=n(I,A,C,O,B,17,f[14]),O=n(O,I,A,C,E,22,f[15]),C=i(C,O,I,A,l,5,f[16]),A=i(A,C,O,I,m,9,f[17]),I=i(I,A,C,O,k,14,f[18]),O=i(O,I,A,C,h,20,f[19]),C=i(C,O,I,A,y,5,f[20]),A=i(A,C,O,I,w,9,f[21]),I=i(I,A,C,O,E,14,f[22]),O=i(O,I,A,C,_,20,f[23]),C=i(C,O,I,A,b,5,f[24]),A=i(A,C,O,I,B,9,f[25]),I=i(I,A,C,O,p,14,f[26]),O=i(O,I,A,C,v,20,f[27]),C=i(C,O,I,A,S,5,f[28]),A=i(A,C,O,I,d,9,f[29]),I=i(I,A,C,O,g,14,f[30]),O=i(O,I,A,C,x,20,f[31]),C=r(C,O,I,A,y,4,f[32]),A=r(A,C,O,I,v,11,f[33]),I=r(I,A,C,O,k,16,f[34]),O=r(O,I,A,C,B,23,f[35]),C=r(C,O,I,A,l,4,f[36]),A=r(A,C,O,I,_,11,f[37]),I=r(I,A,C,O,g,16,f[38]),O=r(O,I,A,C,w,23,f[39]),C=r(C,O,I,A,S,4,f[40]),A=r(A,C,O,I,h,11,f[41]),I=r(I,A,C,O,p,16,f[42]),O=r(O,I,A,C,m,23,f[43]),C=r(C,O,I,A,b,4,f[44]),A=r(A,C,O,I,x,11,f[45]),I=r(I,A,C,O,E,16,f[46]),O=r(O,I,A,C,d,23,f[47]),C=o(C,O,I,A,h,6,f[48]),A=o(A,C,O,I,g,10,f[49]),I=o(I,A,C,O,B,15,f[50]),O=o(O,I,A,C,y,21,f[51]),C=o(C,O,I,A,x,6,f[52]),A=o(A,C,O,I,p,10,f[53]),I=o(I,A,C,O,w,15,f[54]),O=o(O,I,A,C,l,21,f[55]),C=o(C,O,I,A,v,6,f[56]),A=o(A,C,O,I,E,10,f[57]),I=o(I,A,C,O,m,15,f[58]),O=o(O,I,A,C,S,21,f[59]),C=o(C,O,I,A,_,6,f[60]),A=o(A,C,O,I,k,10,f[61]),I=o(I,A,C,O,d,15,f[62]),O=o(O,I,A,C,b,21,f[63]),u[0]=u[0]+C|0,u[1]=u[1]+O|0,u[2]=u[2]+I|0,u[3]=u[3]+A|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var o=e.floor(i/4294967296),s=i;n[(r+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[(r+64>>>9<<4)+14]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,u=0;4>u;u++){var h=c[u];c[u]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return a},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t}});s.MD5=u._createHelper(l),s.HmacMD5=u._createHmacHelper(l)}(Math),t.MD5})},{"./core":37}],46:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.mode.CFB=function(){function e(t,e,n,i){var r=this._iv;if(r){var o=r.slice(0);this._iv=void 0}else var o=this._prevBlock;i.encryptBlock(o,0);for(var s=0;n>s;s++)t[e+s]^=o[s]}var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize;e.call(this,t,n,r,i),this._prevBlock=t.slice(n,n+r)}}),n.Decryptor=n.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize,o=t.slice(n,n+r);e.call(this,t,n,r,i),this._prevBlock=o}}),n}(),t.mode.CFB})},{"./cipher-core":36,"./core":37}],47:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.mode.CTRGladman=function(){function e(t){if(255===(t>>24&255)){var e=t>>16&255,n=t>>8&255,i=255&t;255===e?(e=0,255===n?(n=0,255===i?i=0:++i):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=i}else t+=1<<24;return t}function n(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var i=t.lib.BlockCipherMode.extend(),r=i.Encryptor=i.extend({processBlock:function(t,e){var i=this._cipher,r=i.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),n(s);var a=s.slice(0);i.encryptBlock(a,0);for(var c=0;r>c;c++)t[e+c]^=a[c]}});return i.Decryptor=r,i}(),t.mode.CTRGladman})},{"./cipher-core":36,"./core":37}],48:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[i-1]=o[i-1]+1|0;for(var a=0;i>a;a++)t[e+a]^=s[a]}});return e.Decryptor=n,e}(),t.mode.CTR})},{"./cipher-core":36,"./core":37}],49:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e}(),t.mode.ECB})},{"./cipher-core":36,"./core":37}],50:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._keystream;r&&(o=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;i>s;s++)t[e+s]^=o[s]}});return e.Decryptor=n,e}(),t.mode.OFB})},{"./cipher-core":36,"./core":37}],51:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,i=4*e,r=i-n%i,o=n+r-1;t.clamp(),t.words[o>>>2]|=r<<24-o%4*8,t.sigBytes+=r},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Ansix923})},{"./cipher-core":36,"./core":37}],52:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.pad.Iso10126={pad:function(e,n){var i=4*n,r=i-e.sigBytes%i;e.concat(t.lib.WordArray.random(r-1)).concat(t.lib.WordArray.create([r<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126})},{"./cipher-core":36,"./core":37}],53:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})},{"./cipher-core":36,"./core":37}],54:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})},{"./cipher-core":36,"./core":37}],55:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return t.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},t.pad.ZeroPadding})},{"./cipher-core":36,"./core":37}],56:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./sha1"),t("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],r):r(i.CryptoJS)}(this,function(t){return function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,o=e.algo,s=o.SHA1,a=o.HMAC,c=o.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=a.create(n.hasher,t),o=r.create(),s=r.create([1]),c=o.words,u=s.words,h=n.keySize,f=n.iterations;c.length<h;){
var l=i.update(e).finalize(s);i.reset();for(var d=l.words,p=d.length,_=l,y=1;f>y;y++){_=i.finalize(_),i.reset();for(var m=_.words,g=0;p>g;g++)d[g]^=m[g]}o.concat(l),u[0]++}return o.sigBytes=4*h,o}});e.PBKDF2=function(t,e,n){return c.create(n).compute(t,e)}}(),t.PBKDF2})},{"./core":37,"./hmac":42,"./sha1":61}],57:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;8>n;n++)a[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<a[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<a[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<a[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<a[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<a[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<a[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<a[6]>>>0?1:0)|0,this._b=e[7]>>>0<a[7]>>>0?1:0;for(var n=0;8>n;n++){var i=t[n]+e[n],r=65535&i,o=i>>>16,s=((r*r>>>17)+r*o>>>15)+o*o,u=((4294901760&i)*i|0)+((65535&i)*i|0);c[n]=s^u}t[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,t[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,t[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,t[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,t[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,t[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,t[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,t[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var n=t,i=n.lib,r=i.StreamCipher,o=n.algo,s=[],a=[],c=[],u=o.RabbitLegacy=r.extend({_doReset:function(){var t=this._key.words,n=this.cfg.iv,i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var o=0;4>o;o++)e.call(this);for(var o=0;8>o;o++)r[o]^=i[o+4&7];if(n){var s=n.words,a=s[0],c=s[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),f=u>>>16|4294901760&h,l=h<<16|65535&u;r[0]^=u,r[1]^=f,r[2]^=h,r[3]^=l,r[4]^=u,r[5]^=f,r[6]^=h,r[7]^=l;for(var o=0;4>o;o++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),s[0]=i[0]^i[5]>>>16^i[3]<<16,s[1]=i[2]^i[7]>>>16^i[5]<<16,s[2]=i[4]^i[1]>>>16^i[7]<<16,s[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;4>r;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),t[n+r]^=s[r]},blockSize:4,ivSize:2});n.RabbitLegacy=r._createHelper(u)}(),t.RabbitLegacy})},{"./cipher-core":36,"./core":37,"./enc-base64":38,"./evpkdf":40,"./md5":45}],58:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;8>n;n++)a[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<a[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<a[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<a[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<a[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<a[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<a[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<a[6]>>>0?1:0)|0,this._b=e[7]>>>0<a[7]>>>0?1:0;for(var n=0;8>n;n++){var i=t[n]+e[n],r=65535&i,o=i>>>16,s=((r*r>>>17)+r*o>>>15)+o*o,u=((4294901760&i)*i|0)+((65535&i)*i|0);c[n]=s^u}t[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,t[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,t[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,t[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,t[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,t[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,t[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,t[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var n=t,i=n.lib,r=i.StreamCipher,o=n.algo,s=[],a=[],c=[],u=o.Rabbit=r.extend({_doReset:function(){for(var t=this._key.words,n=this.cfg.iv,i=0;4>i;i++)t[i]=16711935&(t[i]<<8|t[i]>>>24)|4278255360&(t[i]<<24|t[i]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;4>i;i++)e.call(this);for(var i=0;8>i;i++)o[i]^=r[i+4&7];if(n){var s=n.words,a=s[0],c=s[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),f=u>>>16|4294901760&h,l=h<<16|65535&u;o[0]^=u,o[1]^=f,o[2]^=h,o[3]^=l,o[4]^=u,o[5]^=f,o[6]^=h,o[7]^=l;for(var i=0;4>i;i++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),s[0]=i[0]^i[5]>>>16^i[3]<<16,s[1]=i[2]^i[7]>>>16^i[5]<<16,s[2]=i[4]^i[1]>>>16^i[7]<<16,s[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;4>r;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),t[n+r]^=s[r]},blockSize:4,ivSize:2});n.Rabbit=r._createHelper(u)}(),t.Rabbit})},{"./cipher-core":36,"./core":37,"./enc-base64":38,"./evpkdf":40,"./md5":45}],59:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return function(){function e(){for(var t=this._S,e=this._i,n=this._j,i=0,r=0;4>r;r++){e=(e+1)%256,n=(n+t[e])%256;var o=t[e];t[e]=t[n],t[n]=o,i|=t[(t[e]+t[n])%256]<<24-8*r}return this._i=e,this._j=n,i}var n=t,i=n.lib,r=i.StreamCipher,o=n.algo,s=o.RC4=r.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,i=this._S=[],r=0;256>r;r++)i[r]=r;for(var r=0,o=0;256>r;r++){var s=r%n,a=e[s>>>2]>>>24-s%4*8&255;o=(o+i[r]+a)%256;var c=i[r];i[r]=i[o],i[o]=c}this._i=this._j=0},_doProcessBlock:function(t,n){t[n]^=e.call(this)},keySize:8,ivSize:0});n.RC4=r._createHelper(s);var a=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)e.call(this)}});n.RC4Drop=r._createHelper(a)}(),t.RC4})},{"./cipher-core":36,"./core":37,"./enc-base64":38,"./evpkdf":40,"./md5":45}],60:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){return function(e){function n(t,e,n){return t^e^n}function i(t,e,n){return t&e|~t&n}function r(t,e,n){return(t|~e)^n}function o(t,e,n){return t&n|e&~n}function s(t,e,n){return t^(e|~n)}function a(t,e){return t<<e|t>>>32-e}var c=t,u=c.lib,h=u.WordArray,f=u.Hasher,l=c.algo,d=h.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=h.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),_=h.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),y=h.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=h.create([0,1518500249,1859775393,2400959708,2840853838]),g=h.create([1352829926,1548603684,1836072691,2053994217,0]),v=l.RIPEMD160=f.extend({_doReset:function(){this._hash=h.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var c=0;16>c;c++){var u=e+c,h=t[u];t[u]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var f,l,v,b,w,k,x,S,B,E,C=this._hash.words,O=m.words,I=g.words,A=d.words,z=p.words,P=_.words,D=y.words;k=f=C[0],x=l=C[1],S=v=C[2],B=b=C[3],E=w=C[4];for(var j,c=0;80>c;c+=1)j=f+t[e+A[c]]|0,j+=16>c?n(l,v,b)+O[0]:32>c?i(l,v,b)+O[1]:48>c?r(l,v,b)+O[2]:64>c?o(l,v,b)+O[3]:s(l,v,b)+O[4],j=0|j,j=a(j,P[c]),j=j+w|0,f=w,w=b,b=a(v,10),v=l,l=j,j=k+t[e+z[c]]|0,j+=16>c?s(x,S,B)+I[0]:32>c?o(x,S,B)+I[1]:48>c?r(x,S,B)+I[2]:64>c?i(x,S,B)+I[3]:n(x,S,B)+I[4],j=0|j,j=a(j,D[c]),j=j+E|0,k=E,E=B,B=a(S,10),S=x,x=j;j=C[1]+v+B|0,C[1]=C[2]+b+E|0,C[2]=C[3]+w+k|0,C[3]=C[4]+f+x|0,C[4]=C[0]+l+S|0,C[0]=j},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[(i+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var r=this._hash,o=r.words,s=0;5>s;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return r},clone:function(){var t=f.clone.call(this);return t._hash=this._hash.clone(),t}});c.RIPEMD160=f._createHelper(v),c.HmacRIPEMD160=f._createHmacHelper(v)}(Math),t.RIPEMD160})},{"./core":37}],61:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=n.Hasher,o=e.algo,s=[],a=o.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],c=n[4],u=0;80>u;u++){if(16>u)s[u]=0|t[e+u];else{var h=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=h<<1|h>>>31}var f=(i<<5|i>>>27)+c+s[u];f+=20>u?(r&o|~r&a)+1518500249:40>u?(r^o^a)+1859775393:60>u?(r&o|r&a|o&a)-1894007588:(r^o^a)-899497514,c=a,a=o,o=r<<30|r>>>2,r=i,i=f}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[(i+64>>>9<<4)+14]=Math.floor(n/4294967296),e[(i+64>>>9<<4)+15]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=r._createHelper(a),e.HmacSHA1=r._createHmacHelper(a)}(),t.SHA1})},{"./core":37}],62:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./sha256")):"function"==typeof define&&define.amd?define(["./core","./sha256"],r):r(i.CryptoJS)}(this,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=e.algo,o=r.SHA256,s=r.SHA224=o.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=o._doFinalize.call(this);return t.sigBytes-=4,t}});e.SHA224=o._createHelper(s),e.HmacSHA224=o._createHmacHelper(s)}(),t.SHA224})},{"./core":37,"./sha256":63}],63:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){return function(e){var n=t,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),i=2;n>=i;i++)if(!(t%i))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var i=2,r=0;64>r;)t(i)&&(8>r&&(a[r]=n(e.pow(i,.5))),c[r]=n(e.pow(i,1/3)),r++),i++}();var u=[],h=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],h=n[5],f=n[6],l=n[7],d=0;64>d;d++){if(16>d)u[d]=0|t[e+d];else{var p=u[d-15],_=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,y=u[d-2],m=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;u[d]=_+u[d-7]+m+u[d-16]}var g=a&h^~a&f,v=i&r^i&o^r&o,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),w=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),k=l+w+g+c[d]+u[d],x=b+v;l=f,f=h,h=a,a=s+k|0,s=o,o=r,r=i,i=k+x|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+h|0,n[6]=n[6]+f|0,n[7]=n[7]+l|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[(r+64>>>9<<4)+14]=e.floor(i/4294967296),n[(r+64>>>9<<4)+15]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=o._createHelper(h),n.HmacSHA256=o._createHmacHelper(h)}(Math),t.SHA256})},{"./core":37}],64:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],r):r(i.CryptoJS)}(this,function(t){return function(e){var n=t,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.x64,a=s.Word,c=n.algo,u=[],h=[],f=[];!function(){for(var t=1,e=0,n=0;24>n;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var i=e%5,r=(2*t+3*e)%5;t=i,e=r}for(var t=0;5>t;t++)for(var e=0;5>e;e++)h[t+5*e]=e+(2*t+3*e)%5*5;for(var o=1,s=0;24>s;s++){for(var c=0,l=0,d=0;7>d;d++){if(1&o){var p=(1<<d)-1;32>p?l^=1<<p:c^=1<<p-32}128&o?o=o<<1^113:o<<=1}f[s]=a.create(c,l)}}();var l=[];!function(){for(var t=0;25>t;t++)l[t]=a.create()}();var d=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;25>e;e++)t[e]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,i=this.blockSize/2,r=0;i>r;r++){var o=t[e+2*r],s=t[e+2*r+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);var a=n[r];a.high^=s,a.low^=o}for(var c=0;24>c;c++){for(var d=0;5>d;d++){for(var p=0,_=0,y=0;5>y;y++){var a=n[d+5*y];p^=a.high,_^=a.low}var m=l[d];m.high=p,m.low=_}for(var d=0;5>d;d++)for(var g=l[(d+4)%5],v=l[(d+1)%5],b=v.high,w=v.low,p=g.high^(b<<1|w>>>31),_=g.low^(w<<1|b>>>31),y=0;5>y;y++){var a=n[d+5*y];a.high^=p,a.low^=_}for(var k=1;25>k;k++){var a=n[k],x=a.high,S=a.low,B=u[k];if(32>B)var p=x<<B|S>>>32-B,_=S<<B|x>>>32-B;else var p=S<<B-32|x>>>64-B,_=x<<B-32|S>>>64-B;var E=l[h[k]];E.high=p,E.low=_}var C=l[0],O=n[0];C.high=O.high,C.low=O.low;for(var d=0;5>d;d++)for(var y=0;5>y;y++){var k=d+5*y,a=n[k],I=l[k],A=l[(d+1)%5+5*y],z=l[(d+2)%5+5*y];a.high=I.high^~A.high&z.high,a.low=I.low^~A.low&z.low}var a=n[0],P=f[c];a.high^=P.high,a.low^=P.low}},_doFinalize:function(){var t=this._data,n=t.words,i=(8*this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,u=[],h=0;c>h;h++){var f=s[h],l=f.high,d=f.low;l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u.push(d),u.push(l)}return new r.init(u,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),n=0;25>n;n++)e[n]=e[n].clone();return t}});n.SHA3=o._createHelper(d),n.HmacSHA3=o._createHmacHelper(d)}(Math),t.SHA3})},{"./core":37,"./x64-core":68}],65:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./x64-core"),t("./sha512")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./sha512"],r):r(i.CryptoJS)}(this,function(t){return function(){var e=t,n=e.x64,i=n.Word,r=n.WordArray,o=e.algo,s=o.SHA512,a=o.SHA384=s.extend({_doReset:function(){this._hash=new r.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=16,t}});e.SHA384=s._createHelper(a),e.HmacSHA384=s._createHmacHelper(a)}(),t.SHA384})},{"./core":37,"./sha512":66,"./x64-core":68}],66:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],r):r(i.CryptoJS)}(this,function(t){return function(){function e(){return s.create.apply(s,arguments)}var n=t,i=n.lib,r=i.Hasher,o=n.x64,s=o.Word,a=o.WordArray,c=n.algo,u=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],h=[];!function(){for(var t=0;80>t;t++)h[t]=e()}();var f=c.SHA512=r.extend({_doReset:function(){this._hash=new a.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],c=n[5],f=n[6],l=n[7],d=i.high,p=i.low,_=r.high,y=r.low,m=o.high,g=o.low,v=s.high,b=s.low,w=a.high,k=a.low,x=c.high,S=c.low,B=f.high,E=f.low,C=l.high,O=l.low,I=d,A=p,z=_,P=y,D=m,j=g,M=v,R=b,$=w,T=k,F=x,H=S,K=B,L=E,N=C,U=O,q=0;80>q;q++){var W=h[q];if(16>q)var Z=W.high=0|t[e+2*q],Q=W.low=0|t[e+2*q+1];else{var J=h[q-15],G=J.high,Y=J.low,V=(G>>>1|Y<<31)^(G>>>8|Y<<24)^G>>>7,X=(Y>>>1|G<<31)^(Y>>>8|G<<24)^(Y>>>7|G<<25),tt=h[q-2],et=tt.high,nt=tt.low,it=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,rt=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),ot=h[q-7],st=ot.high,at=ot.low,ct=h[q-16],ut=ct.high,ht=ct.low,Q=X+at,Z=V+st+(X>>>0>Q>>>0?1:0),Q=Q+rt,Z=Z+it+(rt>>>0>Q>>>0?1:0),Q=Q+ht,Z=Z+ut+(ht>>>0>Q>>>0?1:0);W.high=Z,W.low=Q}var ft=$&F^~$&K,lt=T&H^~T&L,dt=I&z^I&D^z&D,pt=A&P^A&j^P&j,_t=(I>>>28|A<<4)^(I<<30|A>>>2)^(I<<25|A>>>7),yt=(A>>>28|I<<4)^(A<<30|I>>>2)^(A<<25|I>>>7),mt=($>>>14|T<<18)^($>>>18|T<<14)^($<<23|T>>>9),gt=(T>>>14|$<<18)^(T>>>18|$<<14)^(T<<23|$>>>9),vt=u[q],bt=vt.high,wt=vt.low,kt=U+gt,xt=N+mt+(U>>>0>kt>>>0?1:0),kt=kt+lt,xt=xt+ft+(lt>>>0>kt>>>0?1:0),kt=kt+wt,xt=xt+bt+(wt>>>0>kt>>>0?1:0),kt=kt+Q,xt=xt+Z+(Q>>>0>kt>>>0?1:0),St=yt+pt,Bt=_t+dt+(yt>>>0>St>>>0?1:0);N=K,U=L,K=F,L=H,F=$,H=T,T=R+kt|0,$=M+xt+(R>>>0>T>>>0?1:0)|0,M=D,R=j,D=z,j=P,z=I,P=A,A=kt+St|0,I=xt+Bt+(kt>>>0>A>>>0?1:0)|0}p=i.low=p+A,i.high=d+I+(A>>>0>p>>>0?1:0),y=r.low=y+P,r.high=_+z+(P>>>0>y>>>0?1:0),g=o.low=g+j,o.high=m+D+(j>>>0>g>>>0?1:0),b=s.low=b+R,s.high=v+M+(R>>>0>b>>>0?1:0),k=a.low=k+T,a.high=w+$+(T>>>0>k>>>0?1:0),S=c.low=S+H,c.high=x+F+(H>>>0>S>>>0?1:0),E=f.low=E+L,f.high=B+K+(L>>>0>E>>>0?1:0),O=l.low=O+U,l.high=C+N+(U>>>0>O>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[(i+128>>>10<<5)+30]=Math.floor(n/4294967296),e[(i+128>>>10<<5)+31]=n,t.sigBytes=4*e.length,this._process();var r=this._hash.toX32();return r},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});n.SHA512=r._createHelper(f),n.HmacSHA512=r._createHmacHelper(f)}(),t.SHA512})},{"./core":37,"./x64-core":68}],67:[function(t,e,n){!function(i,r,o){"object"==typeof n?e.exports=n=r(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],r):r(i.CryptoJS)}(this,function(t){return function(){function e(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function n(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var i=t,r=i.lib,o=r.WordArray,s=r.BlockCipher,a=i.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=a.DES=s.extend({_doReset:function(){for(var t=this._key,e=t.words,n=[],i=0;56>i;i++){var r=c[i]-1;n[i]=e[r>>>5]>>>31-r%32&1}for(var o=this._subKeys=[],s=0;16>s;s++){for(var a=o[s]=[],f=h[s],i=0;24>i;i++)a[i/6|0]|=n[(u[i]-1+f)%28]<<31-i%6,a[4+(i/6|0)]|=n[28+(u[i+24]-1+f)%28]<<31-i%6;a[0]=a[0]<<1|a[0]>>>31;for(var i=1;7>i;i++)a[i]=a[i]>>>4*(i-1)+3;a[7]=a[7]<<5|a[7]>>>27}for(var l=this._invSubKeys=[],i=0;16>i;i++)l[i]=o[15-i]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,i,r){this._lBlock=t[i],this._rBlock=t[i+1],e.call(this,4,252645135),e.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),e.call(this,1,1431655765);for(var o=0;16>o;o++){for(var s=r[o],a=this._lBlock,c=this._rBlock,u=0,h=0;8>h;h++)u|=f[h][((c^s[h])&l[h])>>>0];this._lBlock=c,this._rBlock=a^u}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,e.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),t[i]=this._lBlock,t[i+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=s._createHelper(d);var p=a.TripleDES=s.extend({_doReset:function(){var t=this._key,e=t.words;this._des1=d.createEncryptor(o.create(e.slice(0,2))),this._des2=d.createEncryptor(o.create(e.slice(2,4))),this._des3=d.createEncryptor(o.create(e.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});i.TripleDES=s._createHelper(p)}(),t.TripleDES})},{"./cipher-core":36,"./core":37,"./enc-base64":38,"./evpkdf":40,"./md5":45}],68:[function(t,e,n){!function(i,r){"object"==typeof n?e.exports=n=r(t("./core")):"function"==typeof define&&define.amd?define(["./core"],r):r(i.CryptoJS)}(this,function(t){return function(e){var n=t,i=n.lib,r=i.Base,o=i.WordArray,s=n.x64={};s.Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=r.extend({init:function(t,n){t=this.words=t||[],n!=e?this.sigBytes=n:this.sigBytes=8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],i=0;e>i;i++){var r=t[i];n.push(r.high),n.push(r.low)}return o.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;n>i;i++)e[i]=e[i].clone();return t}})}(),t})},{"./core":37}],69:[function(t,e,n){(function(t,i){!function(){var e,n,r,o;!function(){var t={},i={};e=function(e,n,i){t[e]={deps:n,callback:i}},o=r=n=function(e){function r(t){if("."!==t.charAt(0))return t;
for(var n=t.split("/"),i=e.split("/").slice(0,-1),r=0,o=n.length;o>r;r++){var s=n[r];if(".."===s)i.pop();else{if("."===s)continue;i.push(s)}}return i.join("/")}if(o._eak_seen=t,i[e])return i[e];if(i[e]={},!t[e])throw new Error("Could not find module "+e);for(var s,a=t[e],c=a.deps,u=a.callback,h=[],f=0,l=c.length;l>f;f++)"exports"===c[f]?h.push(s={}):h.push(n(r(c[f])));var d=u.apply(this,h);return i[e]=s||d}}(),e("promise/all",["./utils","exports"],function(t,e){"use strict";function n(t){var e=this;if(!i(t))throw new TypeError("You must pass an array to all.");return new e(function(e,n){function i(t){return function(e){o(t,e)}}function o(t,n){a[t]=n,0===--c&&e(a)}var s,a=[],c=t.length;0===c&&e([]);for(var u=0;u<t.length;u++)s=t[u],s&&r(s.then)?s.then(i(u),n):o(u,s)})}var i=t.isArray,r=t.isFunction;e.all=n}),e("promise/asap",["exports"],function(e){"use strict";function n(){return function(){t.nextTick(s)}}function r(){var t=0,e=new h(s),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function o(){return function(){f.setTimeout(s,1)}}function s(){for(var t=0;t<l.length;t++){var e=l[t],n=e[0],i=e[1];n(i)}l=[]}function a(t,e){var n=l.push([t,e]);1===n&&c()}var c,u="undefined"!=typeof window?window:{},h=u.MutationObserver||u.WebKitMutationObserver,f="undefined"!=typeof i?i:void 0===this?window:this,l=[];c="undefined"!=typeof t&&"[object process]"==={}.toString.call(t)?n():h?r():o(),e.asap=a}),e("promise/config",["exports"],function(t){"use strict";function e(t,e){return 2!==arguments.length?n[t]:void(n[t]=e)}var n={instrument:!1};t.config=n,t.configure=e}),e("promise/polyfill",["./promise","./utils","exports"],function(t,e,n){"use strict";function r(){var t;t="undefined"!=typeof i?i:"undefined"!=typeof window&&window.document?window:self;var e="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),s(e)}();e||(t.Promise=o)}var o=t.Promise,s=e.isFunction;n.polyfill=r}),e("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(t,e,n,i,r,o,s,a){"use strict";function c(t){if(!w(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof c))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],u(t,this)}function u(t,e){function n(t){p(e,t)}function i(t){y(e,t)}try{t(n,i)}catch(r){i(r)}}function h(t,e,n,i){var r,o,s,a,c=w(n);if(c)try{r=n(i),s=!0}catch(u){a=!0,o=u}else r=i,s=!0;d(e,r)||(c&&s?p(e,r):a?y(e,o):t===I?p(e,r):t===A&&y(e,r))}function f(t,e,n,i){var r=t._subscribers,o=r.length;r[o]=e,r[o+I]=n,r[o+A]=i}function l(t,e){for(var n,i,r=t._subscribers,o=t._detail,s=0;s<r.length;s+=3)n=r[s],i=r[s+e],h(e,n,i,o);t._subscribers=null}function d(t,e){var n,i=null;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(b(e)&&(i=e.then,w(i)))return i.call(e,function(i){return n?!0:(n=!0,void(e!==i?p(t,i):_(t,i)))},function(e){return n?!0:(n=!0,void y(t,e))}),!0}catch(r){return n?!0:(y(t,r),!0)}return!1}function p(t,e){t===e?_(t,e):d(t,e)||_(t,e)}function _(t,e){t._state===C&&(t._state=O,t._detail=e,v.async(m,t))}function y(t,e){t._state===C&&(t._state=O,t._detail=e,v.async(g,t))}function m(t){l(t,t._state=I)}function g(t){l(t,t._state=A)}var v=t.config,b=(t.configure,e.objectOrFunction),w=e.isFunction,k=(e.now,n.all),x=i.race,S=r.resolve,B=o.reject,E=s.asap;v.async=E;var C=void 0,O=0,I=1,A=2;c.prototype={constructor:c,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(t,e){var n=this,i=new this.constructor(function(){});if(this._state){var r=arguments;v.async(function(){h(n._state,i,r[n._state-1],n._detail)})}else f(this,i,t,e);return i},"catch":function(t){return this.then(null,t)}},c.all=k,c.race=x,c.resolve=S,c.reject=B,a.Promise=c}),e("promise/race",["./utils","exports"],function(t,e){"use strict";function n(t){var e=this;if(!i(t))throw new TypeError("You must pass an array to race.");return new e(function(e,n){for(var i,r=0;r<t.length;r++)i=t[r],i&&"function"==typeof i.then?i.then(e,n):e(i)})}var i=t.isArray;e.race=n}),e("promise/reject",["exports"],function(t){"use strict";function e(t){var e=this;return new e(function(e,n){n(t)})}t.reject=e}),e("promise/resolve",["exports"],function(t){"use strict";function e(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=this;return new e(function(e){e(t)})}t.resolve=e}),e("promise/utils",["exports"],function(t){"use strict";function e(t){return n(t)||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}var r=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=e,t.isFunction=n,t.isArray=i,t.now=r}),n("promise/polyfill").polyfill()}(),function(t,i){"object"==typeof n&&"object"==typeof e?e.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof n?n.localforage=i():t.localforage=i()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,function(){function t(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function r(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(l(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}function o(t){for(var e in a)if(a.hasOwnProperty(e)&&a[e]===t)return!0;return!1}var s={},a={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},c=[a.INDEXEDDB,a.WEBSQL,a.LOCALSTORAGE],u=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],h={description:"",driver:c.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},f=function(t){var e=e||t.indexedDB||t.webkitIndexedDB||t.mozIndexedDB||t.OIndexedDB||t.msIndexedDB,n={};return n[a.WEBSQL]=!!t.openDatabase,n[a.INDEXEDDB]=!!function(){if("undefined"!=typeof t.openDatabase&&t.navigator&&t.navigator.userAgent&&/Safari/.test(t.navigator.userAgent)&&!/Chrome/.test(t.navigator.userAgent))return!1;try{return e&&"function"==typeof e.open&&"undefined"!=typeof t.IDBKeyRange}catch(n){return!1}}(),n[a.LOCALSTORAGE]=!!function(){try{return t.localStorage&&"setItem"in t.localStorage&&t.localStorage.setItem}catch(e){return!1}}(),n}(this),l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},d=function(){function e(t){i(this,e),this.INDEXEDDB=a.INDEXEDDB,this.LOCALSTORAGE=a.LOCALSTORAGE,this.WEBSQL=a.WEBSQL,this._defaultConfig=r({},h),this._config=r({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return e.prototype.config=function(t){if("object"==typeof t){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t)"storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),this._config[e]=t[e];return"driver"in t&&t.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof t?this._config[t]:this._config},e.prototype.defineDriver=function(t,e,n){var i=new Promise(function(e,n){try{var i=t._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),a=new Error("Custom driver name already in use: "+t._driver);if(!t._driver)return void n(r);if(o(t._driver))return void n(a);for(var c=u.concat("_initStorage"),h=0;h<c.length;h++){var l=c[h];if(!l||!t[l]||"function"!=typeof t[l])return void n(r)}var d=Promise.resolve(!0);"_support"in t&&(d=t._support&&"function"==typeof t._support?t._support():Promise.resolve(!!t._support)),d.then(function(n){f[i]=n,s[i]=t,e()},n)}catch(p){n(p)}});return i.then(e,n),i},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,e,i){var r=this,a=function(){if(o(t))switch(t){case r.INDEXEDDB:return new Promise(function(t,e){t(n(1))});case r.LOCALSTORAGE:return new Promise(function(t,e){t(n(2))});case r.WEBSQL:return new Promise(function(t,e){t(n(4))})}else if(s[t])return Promise.resolve(s[t]);return Promise.reject(new Error("Driver not found."))}();return a.then(e,i),a},e.prototype.getSerializer=function(t){var e=new Promise(function(t,e){t(n(3))});return t&&"function"==typeof t&&e.then(function(e){t(e)}),e},e.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return n.then(t,t),n},e.prototype.setDriver=function(t,e,n){function i(){o._config.driver=o.driver()}function r(t){return function(){function e(){for(;n<t.length;){var r=t[n];return n++,o._dbInfo=null,o._ready=null,o.getDriver(r).then(function(t){return o._extend(t),i(),o._ready=o._initStorage(o._config),o._ready})["catch"](e)}i();var s=new Error("No available storage method found.");return o._driverSet=Promise.reject(s),o._driverSet}var n=0;return e()}}var o=this;l(t)||(t=[t]);var s=this._getSupportedDrivers(t),a=null!==this._driverSet?this._driverSet["catch"](function(){return Promise.resolve()}):Promise.resolve();return this._driverSet=a.then(function(){var t=s[0];return o._dbInfo=null,o._ready=null,o.getDriver(t).then(function(t){o._driver=t._driver,i(),o._wrapLibraryMethodsWithReady(),o._initDriver=r(s)})})["catch"](function(){i();var t=new Error("No available storage method found.");return o._driverSet=Promise.reject(t),o._driverSet}),this._driverSet.then(e,n),this._driverSet},e.prototype.supports=function(t){return!!f[t]},e.prototype._extend=function(t){r(this,t)},e.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,i=t.length;i>n;n++){var r=t[n];this.supports(r)&&e.push(r)}return e},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<u.length;e++)t(this,u[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),p=new d;e["default"]=p}.call("undefined"!=typeof window?window:self),t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,function(){function t(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(n){if("TypeError"!==n.name)throw n;for(var i=x.BlobBuilder||x.MSBlobBuilder||x.MozBlobBuilder||x.WebKitBlobBuilder,r=new i,o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(e.type)}}function n(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;e>r;r++)i[r]=t.charCodeAt(r);return n}function i(t){return new Promise(function(e,n){var i=new XMLHttpRequest;i.open("GET",t),i.withCredentials=!0,i.responseType="arraybuffer",i.onreadystatechange=function(){return 4===i.readyState?200===i.status?e({response:i.response,type:i.getResponseHeader("Content-Type")}):void n({status:i.status,response:i.response}):void 0},i.send()})}function r(e){return new Promise(function(n,r){var o=t([""],{type:"image/png"}),s=e.transaction([C],"readwrite");s.objectStore(C).put(o,"key"),s.oncomplete=function(){var t=e.transaction([C],"readwrite"),o=t.objectStore(C).get("key");o.onerror=r,o.onsuccess=function(t){var e=t.target.result,r=URL.createObjectURL(e);i(r).then(function(t){n(!(!t||"image/png"!==t.type))},function(){n(!1)}).then(function(){URL.revokeObjectURL(r)})}}})["catch"](function(){return!1})}function o(t){return"boolean"==typeof B?Promise.resolve(B):r(t).then(function(t){return B=t})}function s(t){return new Promise(function(e,n){var i=new FileReader;i.onerror=n,i.onloadend=function(n){var i=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:i,type:t.type})},i.readAsBinaryString(t)})}function a(e){var i=n(atob(e.data));return t([i],{type:e.type})}function c(t){return t&&t.__local_forage_encoded_blob}function u(t){function e(){return Promise.resolve()}var n=this,i={db:null};if(t)for(var r in t)i[r]=t[r];E||(E={});var o=E[i.name];o||(o={forages:[],db:null},E[i.name]=o),o.forages.push(this);for(var s=[],a=0;a<o.forages.length;a++){var c=o.forages[a];c!==this&&s.push(c.ready()["catch"](e))}var u=o.forages.slice(0);return Promise.all(s).then(function(){return i.db=o.db,h(i)}).then(function(t){return i.db=t,d(i,n._defaultConfig.version)?f(i):t}).then(function(t){i.db=o.db=t,n._dbInfo=i;for(var e=0;e<u.length;e++){var r=u[e];r!==n&&(r._dbInfo.db=i.db,r._dbInfo.version=i.version)}})}function h(t){return l(t,!1)}function f(t){return l(t,!0)}function l(t,e){return new Promise(function(n,i){if(t.db){if(!e)return n(t.db);t.db.close()}var r=[t.name];e&&r.push(t.version);var o=S.open.apply(S,r);e&&(o.onupgradeneeded=function(e){var n=o.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(C)}catch(i){if("ConstraintError"!==i.name)throw i;x.console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),o.onerror=function(){i(o.error)},o.onsuccess=function(){n(o.result)}})}function d(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,r=t.version>t.db.version;if(i&&(t.version!==e&&x.console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),r||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function p(t,e){var n=this;"string"!=typeof t&&(x.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new Promise(function(e,i){n.ready().then(function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),s=o.get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),c(t)&&(t=a(t)),e(t)},s.onerror=function(){i(s.error)}})["catch"](i)});return k(i,e),i}function _(t,e){var n=this,i=new Promise(function(e,i){n.ready().then(function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),s=o.openCursor(),u=1;s.onsuccess=function(){var n=s.result;if(n){var i=n.value;c(i)&&(i=a(i));var r=t(i,n.key,u++);void 0!==r?e(r):n["continue"]()}else e()},s.onerror=function(){i(s.error)}})["catch"](i)});return k(i,e),i}function y(t,e,n){var i=this;"string"!=typeof t&&(x.console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new Promise(function(n,r){var a;i.ready().then(function(){return a=i._dbInfo,e instanceof Blob?o(a.db).then(function(t){return t?e:s(e)}):e}).then(function(e){var i=a.db.transaction(a.storeName,"readwrite"),o=i.objectStore(a.storeName);null===e&&(e=void 0);var s=o.put(e,t);i.oncomplete=function(){void 0===e&&(e=null),n(e)},i.onabort=i.onerror=function(){var t=s.error?s.error:s.transaction.error;r(t)}})["catch"](r)});return k(r,n),r}function m(t,e){var n=this;"string"!=typeof t&&(x.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new Promise(function(e,i){n.ready().then(function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),s=o.objectStore(r.storeName),a=s["delete"](t);o.oncomplete=function(){e()},o.onerror=function(){i(a.error)},o.onabort=function(){var t=a.error?a.error:a.transaction.error;i(t)}})["catch"](i)});return k(i,e),i}function g(t){var e=this,n=new Promise(function(t,n){e.ready().then(function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readwrite"),o=r.objectStore(i.storeName),s=o.clear();r.oncomplete=function(){t()},r.onabort=r.onerror=function(){var t=s.error?s.error:s.transaction.error;n(t)}})["catch"](n)});return k(n,t),n}function v(t){var e=this,n=new Promise(function(t,n){e.ready().then(function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),o=r.count();o.onsuccess=function(){t(o.result)},o.onerror=function(){n(o.error)}})["catch"](n)});return k(n,t),n}function b(t,e){var n=this,i=new Promise(function(e,i){return 0>t?void e(null):void n.ready().then(function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),s=!1,a=o.openCursor();a.onsuccess=function(){var n=a.result;return n?void(0===t?e(n.key):s?e(n.key):(s=!0,n.advance(t))):void e(null)},a.onerror=function(){i(a.error)}})["catch"](i)});return k(i,e),i}function w(t){var e=this,n=new Promise(function(t,n){e.ready().then(function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),o=r.openCursor(),s=[];o.onsuccess=function(){var e=o.result;return e?(s.push(e.key),void e["continue"]()):void t(s)},o.onerror=function(){n(o.error)}})["catch"](n)});return k(n,t),n}function k(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}var x=this,S=S||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(S){var B,E,C="local-forage-detect-blob-support",O={_driver:"asyncStorage",_initStorage:u,iterate:_,getItem:p,setItem:y,removeItem:m,clear:g,length:v,key:b,keys:w};e["default"]=O}}.call("undefined"!=typeof window?window:self),t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0,function(){function t(t){var e=this,i={};if(t)for(var r in t)i[r]=t[r];return i.keyPrefix=i.name+"/",i.storeName!==e._defaultConfig.storeName&&(i.keyPrefix+=i.storeName+"/"),e._dbInfo=i,new Promise(function(t,e){t(n(3))}).then(function(t){return i.serializer=t,Promise.resolve()})}function i(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=d.length-1;n>=0;n--){var i=d.key(n);0===i.indexOf(t)&&d.removeItem(i)}});return f(n,t),n}function r(t,e){var n=this;"string"!=typeof t&&(l.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=n.ready().then(function(){var e=n._dbInfo,i=d.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i});return f(i,e),i}function o(t,e){var n=this,i=n.ready().then(function(){for(var e=n._dbInfo,i=e.keyPrefix,r=i.length,o=d.length,s=1,a=0;o>a;a++){var c=d.key(a);if(0===c.indexOf(i)){var u=d.getItem(c);if(u&&(u=e.serializer.deserialize(u)),u=t(u,c.substring(r),s++),void 0!==u)return u}}});return f(i,e),i}function s(t,e){var n=this,i=n.ready().then(function(){var e,i=n._dbInfo;try{e=d.key(t)}catch(r){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e});return f(i,e),i}function a(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=d.length,i=[],r=0;n>r;r++)0===d.key(r).indexOf(t.keyPrefix)&&i.push(d.key(r).substring(t.keyPrefix.length));return i});return f(n,t),n}function c(t){var e=this,n=e.keys().then(function(t){return t.length});return f(n,t),n}function u(t,e){var n=this;"string"!=typeof t&&(l.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=n.ready().then(function(){var e=n._dbInfo;d.removeItem(e.keyPrefix+t)});return f(i,e),i}function h(t,e,n){var i=this;"string"!=typeof t&&(l.console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=i.ready().then(function(){void 0===e&&(e=null);var n=e;return new Promise(function(r,o){var s=i._dbInfo;s.serializer.serialize(e,function(e,i){if(i)o(i);else try{d.setItem(s.keyPrefix+t,e),r(n)}catch(a){("QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&o(a),o(a)}})})});return f(r,n),r}function f(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}var l=this,d=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;d=this.localStorage}catch(p){return}var _={_driver:"localStorageWrapper",_initStorage:t,iterate:o,getItem:r,setItem:h,removeItem:u,clear:i,length:c,key:s,keys:a};e["default"]=_}.call("undefined"!=typeof window?window:self),t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,function(){function t(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(n){if("TypeError"!==n.name)throw n;for(var i=x.BlobBuilder||x.MSBlobBuilder||x.MozBlobBuilder||x.WebKitBlobBuilder,r=new i,o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(e.type)}}function n(t,e){var n="";if(t&&(n=t.toString()),t&&("[object ArrayBuffer]"===t.toString()||t.buffer&&"[object ArrayBuffer]"===t.buffer.toString())){var i,r=u;t instanceof ArrayBuffer?(i=t,r+=f):(i=t.buffer,"[object Int8Array]"===n?r+=d:"[object Uint8Array]"===n?r+=p:"[object Uint8ClampedArray]"===n?r+=_:"[object Int16Array]"===n?r+=y:"[object Uint16Array]"===n?r+=g:"[object Int32Array]"===n?r+=m:"[object Uint32Array]"===n?r+=v:"[object Float32Array]"===n?r+=b:"[object Float64Array]"===n?r+=w:e(new Error("Failed to get type for BinaryArray"))),e(r+o(i))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n=a+t.type+"~"+o(this.result);e(u+l+n)},s.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(c){console.error("Couldn't convert value into a JSON string: ",t),e(null,c)}}function i(e){if(e.substring(0,h)!==u)return JSON.parse(e);var n,i=e.substring(k),o=e.substring(h,k);if(o===l&&c.test(i)){var s=i.match(c);n=s[1],i=i.substring(s[0].length)}var a=r(i);switch(o){case f:return a;case l:return t([a],{type:n});case d:return new Int8Array(a);case p:return new Uint8Array(a);case _:return new Uint8ClampedArray(a);case y:return new Int16Array(a);case g:return new Uint16Array(a);case m:return new Int32Array(a);case v:return new Uint32Array(a);case b:return new Float32Array(a);case w:return new Float64Array(a);default:throw new Error("Unkown type: "+o)}}function r(t){var e,n,i,r,o,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),f=new Uint8Array(h);for(e=0;c>e;e+=4)n=s.indexOf(t[e]),i=s.indexOf(t[e+1]),r=s.indexOf(t[e+2]),o=s.indexOf(t[e+3]),f[u++]=n<<2|i>>4,f[u++]=(15&i)<<4|r>>2,f[u++]=(3&r)<<6|63&o;return h}function o(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=s[n[e]>>2],i+=s[(3&n[e])<<4|n[e+1]>>4],i+=s[(15&n[e+1])<<2|n[e+2]>>6],i+=s[63&n[e+2]];return n.length%3===2?i=i.substring(0,i.length-1)+"=":n.length%3===1&&(i=i.substring(0,i.length-2)+"=="),i}var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="~~local_forage_type~",c=/^~~local_forage_type~([^~]+)~/,u="__lfsc__:",h=u.length,f="arbf",l="blob",d="si08",p="ui08",_="uic8",y="si16",m="si32",g="ur16",v="ui32",b="fl32",w="fl64",k=h+f.length,x=this,S={serialize:n,deserialize:i,stringToBuffer:r,bufferToString:o};e["default"]=S}.call("undefined"!=typeof window?window:self),t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0,function(){function t(t){var e=this,i={db:null};if(t)for(var r in t)i[r]="string"!=typeof t[r]?t[r].toString():t[r];var o=new Promise(function(n,r){try{i.db=d(i.name,String(i.version),i.description,i.size)}catch(o){return e.setDriver(e.LOCALSTORAGE).then(function(){return e._initStorage(t)}).then(n)["catch"](r)}i.db.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){e._dbInfo=i,n()},function(t,e){r(e)})})});return new Promise(function(t,e){t(n(3))}).then(function(t){return i.serializer=t,o})}function i(t,e){var n=this;"string"!=typeof t&&(l.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new Promise(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){n.executeSql("SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),e(i)},function(t,e){i(e)})})})["catch"](i)});return f(i,e),i}function r(t,e){var n=this,i=new Promise(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){n.executeSql("SELECT * FROM "+r.storeName,[],function(n,i){for(var o=i.rows,s=o.length,a=0;s>a;a++){var c=o.item(a),u=c.value;if(u&&(u=r.serializer.deserialize(u)),u=t(u,c.key,a+1),void 0!==u)return void e(u)}e()},function(t,e){i(e)})})})["catch"](i)});return f(i,e),i}function o(t,e,n){var i=this;"string"!=typeof t&&(l.console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new Promise(function(n,r){i.ready().then(function(){void 0===e&&(e=null);var o=e,s=i._dbInfo;s.serializer.serialize(e,function(e,i){i?r(i):s.db.transaction(function(i){i.executeSql("INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){n(o)},function(t,e){r(e)})},function(t){t.code===t.QUOTA_ERR&&r(t)})})})["catch"](r)});return f(r,n),r}function s(t,e){var n=this;"string"!=typeof t&&(l.console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new Promise(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){n.executeSql("DELETE FROM "+r.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){i(e)})})})["catch"](i)});return f(i,e),i}function a(t){var e=this,n=new Promise(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){e.executeSql("DELETE FROM "+i.storeName,[],function(){t()},function(t,e){n(e)})})})["catch"](n)});return f(n,t),n}function c(t){var e=this,n=new Promise(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){e.executeSql("SELECT COUNT(key) as c FROM "+i.storeName,[],function(e,n){var i=n.rows.item(0).c;t(i)},function(t,e){n(e)})})})["catch"](n)});return f(n,t),n}function u(t,e){var n=this,i=new Promise(function(e,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(n){n.executeSql("SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var i=n.rows.length?n.rows.item(0).key:null;e(i)},function(t,e){i(e)})})})["catch"](i)});return f(i,e),i}function h(t){var e=this,n=new Promise(function(t,n){e.ready().then(function(){var i=e._dbInfo;i.db.transaction(function(e){e.executeSql("SELECT key FROM "+i.storeName,[],function(e,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).key);t(i)},function(t,e){n(e)})})})["catch"](n)});return f(n,t),n}function f(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}var l=this,d=this.openDatabase;if(d){var p={_driver:"webSQLStorage",_initStorage:t,iterate:r,getItem:i,setItem:o,removeItem:s,clear:a,length:c,key:u,keys:h};e["default"]=p}}.call("undefined"!=typeof window?window:self),t.exports=e["default"]}])})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],70:[function(t,e,n){"use strict";var i=t("./lib/utils/common").assign,r=t("./lib/deflate"),o=t("./lib/inflate"),s=t("./lib/zlib/constants"),a={};i(a,r,o,s),e.exports=a},{"./lib/deflate":71,"./lib/inflate":72,"./lib/utils/common":73,"./lib/zlib/constants":76}],71:[function(t,e,n){"use strict";function i(t,e){var n=new b(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}function r(t,e){return e=e||{},e.raw=!0,i(t,e)}function o(t,e){return e=e||{},e.gzip=!0,i(t,e)}var s=t("./zlib/deflate.js"),a=t("./utils/common"),c=t("./utils/strings"),u=t("./zlib/messages"),h=t("./zlib/zstream"),f=Object.prototype.toString,l=0,d=4,p=0,_=1,y=2,m=-1,g=0,v=8,b=function(t){this.options=a.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==p)throw new Error(u[n]);e.header&&s.deflateSetHeader(this.strm,e.header)};b.prototype.push=function(t,e){var n,i,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?d:l,"string"==typeof t?r.input=c.string2buf(t):"[object ArrayBuffer]"===f.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new a.Buf8(o),r.next_out=0,r.avail_out=o),n=s.deflate(r,i),n!==_&&n!==p)return this.onEnd(n),this.ended=!0,!1;(0===r.avail_out||0===r.avail_in&&(i===d||i===y))&&("string"===this.options.to?this.onData(c.buf2binstring(a.shrinkBuf(r.output,r.next_out))):this.onData(a.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&n!==_);return i===d?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===p):i===y?(this.onEnd(p),r.avail_out=0,!0):!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=b,n.deflate=i,n.deflateRaw=r,n.gzip=o},{"./utils/common":73,"./utils/strings":74,"./zlib/deflate.js":78,"./zlib/messages":83,"./zlib/zstream":85}],72:[function(t,e,n){"use strict";function i(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}function r(t,e){return e=e||{},e.raw=!0,i(t,e)}var o=t("./zlib/inflate.js"),s=t("./utils/common"),a=t("./utils/strings"),c=t("./zlib/constants"),u=t("./zlib/messages"),h=t("./zlib/zstream"),f=t("./zlib/gzheader"),l=Object.prototype.toString,d=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,e.windowBits);if(n!==c.Z_OK)throw new Error(u[n]);this.header=new f,o.inflateGetHeader(this.strm,this.header)};d.prototype.push=function(t,e){var n,i,r,u,h,f=this.strm,d=this.options.chunkSize,p=!1;if(this.ended)return!1;i=e===~~e?e:e===!0?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?f.input=a.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(d),f.next_out=0,f.avail_out=d),n=o.inflate(f,c.Z_NO_FLUSH),n===c.Z_BUF_ERROR&&p===!0&&(n=c.Z_OK,p=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0===f.avail_out||n===c.Z_STREAM_END||0===f.avail_in&&(i===c.Z_FINISH||i===c.Z_SYNC_FLUSH))&&("string"===this.options.to?(r=a.utf8border(f.output,f.next_out),u=f.next_out-r,h=a.buf2string(f.output,r),f.next_out=u,f.avail_out=d-u,u&&s.arraySet(f.output,f.output,r,u,0),this.onData(h)):this.onData(s.shrinkBuf(f.output,f.next_out))),0===f.avail_in&&0===f.avail_out&&(p=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):i===c.Z_SYNC_FLUSH?(this.onEnd(c.Z_OK),f.avail_out=0,!0):!0},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=d,n.inflate=i,n.inflateRaw=r,n.ungzip=i},{"./utils/common":73,"./utils/strings":74,"./zlib/constants":76,"./zlib/gzheader":79,"./zlib/inflate.js":81,"./zlib/messages":83,"./zlib/zstream":85}],73:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+i),r);for(var o=0;i>o;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(i=0,e=0,n=t.length;n>e;e++)i+=t[e].length;for(s=new Uint8Array(i),
r=0,e=0,n=t.length;n>e;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,n,i,r){for(var o=0;i>o;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],74:[function(t,e,n){"use strict";function i(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",i=0;e>i;i++)n+=String.fromCharCode(t[i]);return n}var r=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(a){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){s=!1}for(var c=new r.Buf8(256),u=0;256>u;u++)c[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;c[254]=c[254]=1,n.string2buf=function(t){var e,n,i,o,s,a=t.length,c=0;for(o=0;a>o;o++)n=t.charCodeAt(o),55296===(64512&n)&&a>o+1&&(i=t.charCodeAt(o+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),c+=128>n?1:2048>n?2:65536>n?3:4;for(e=new r.Buf8(c),s=0,o=0;c>s;o++)n=t.charCodeAt(o),55296===(64512&n)&&a>o+1&&(i=t.charCodeAt(o+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),128>n?e[s++]=n:2048>n?(e[s++]=192|n>>>6,e[s++]=128|63&n):65536>n?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},n.buf2binstring=function(t){return i(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;i>n;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,o,s,a=e||t.length,u=new Array(2*a);for(r=0,n=0;a>n;)if(o=t[n++],128>o)u[r++]=o;else if(s=c[o],s>4)u[r++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&a>n;)o=o<<6|63&t[n++],s--;s>1?u[r++]=65533:65536>o?u[r++]=o:(o-=65536,u[r++]=55296|o>>10&1023,u[r++]=56320|1023&o)}return i(u,r)},n.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&128===(192&t[n]);)n--;return 0>n?e:0===n?e:n+c[t[n]]>e?n:e}},{"./common":73}],75:[function(t,e,n){"use strict";function i(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do r=r+e[i++]|0,o=o+r|0;while(--s);r%=65521,o%=65521}return r|o<<16|0}e.exports=i},{}],76:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],77:[function(t,e,n){"use strict";function i(){for(var t,e=[],n=0;256>n;n++){t=n;for(var i=0;8>i;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}function r(t,e,n,i){var r=o,s=i+n;t=-1^t;for(var a=i;s>a;a++)t=t>>>8^r[255&(t^e[a])];return-1^t}var o=i();e.exports=r},{}],78:[function(t,e,n){"use strict";function i(t,e){return t.msg=P[e],e}function r(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(O.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function a(t,e){I._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function c(t,e){t.pending_buf[t.pending++]=e}function u(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function h(t,e,n,i){var r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,O.arraySet(e,t.input,t.next_in,r,n),1===t.state.wrap?t.adler=A(t.adler,e,r,n):2===t.state.wrap&&(t.adler=z(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)}function f(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-ut?t.strstart-(t.w_size-ut):0,u=t.window,h=t.w_mask,f=t.prev,l=t.strstart+ct,d=u[o+s-1],p=u[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(n=e,u[n+s]===p&&u[n+s-1]===d&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do;while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&l>o);if(i=ct-(l-o),o=l-ct,i>s){if(t.match_start=e,s=i,i>=a)break;d=u[o+s-1],p=u[o+s]}}while((e=f[e&h])>c&&0!==--r);return s<=t.lookahead?s:t.lookahead}function l(t){var e,n,i,r,o,s=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-ut)){O.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,n=t.hash_size,e=n;do i=t.head[--e],t.head[e]=i>=s?i-s:0;while(--n);n=s,e=n;do i=t.prev[--e],t.prev[e]=i>=s?i-s:0;while(--n);r+=s}if(0===t.strm.avail_in)break;if(n=h(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=at)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+at-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<at)););}while(t.lookahead<ut&&0!==t.strm.avail_in)}function d(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(l(t),0===t.lookahead&&e===D)return gt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,a(t,!1),0===t.strm.avail_out))return gt;if(t.strstart-t.block_start>=t.w_size-ut&&(a(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===R?(a(t,!0),0===t.strm.avail_out?bt:wt):t.strstart>t.block_start&&(a(t,!1),0===t.strm.avail_out)?gt:gt}function p(t,e){for(var n,i;;){if(t.lookahead<ut){if(l(t),t.lookahead<ut&&e===D)return gt;if(0===t.lookahead)break}if(n=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ut&&(t.match_length=f(t,n)),t.match_length>=at)if(i=I._tr_tally(t,t.strstart-t.match_start,t.match_length-at),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=at){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=I._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(a(t,!1),0===t.strm.avail_out))return gt}return t.insert=t.strstart<at-1?t.strstart:at-1,e===R?(a(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?gt:vt}function _(t,e){for(var n,i,r;;){if(t.lookahead<ut){if(l(t),t.lookahead<ut&&e===D)return gt;if(0===t.lookahead)break}if(n=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=at-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ut&&(t.match_length=f(t,n),t.match_length<=5&&(t.strategy===U||t.match_length===at&&t.strstart-t.match_start>4096)&&(t.match_length=at-1)),t.prev_length>=at&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-at,i=I._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-at),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=at-1,t.strstart++,i&&(a(t,!1),0===t.strm.avail_out))return gt}else if(t.match_available){if(i=I._tr_tally(t,0,t.window[t.strstart-1]),i&&a(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return gt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=I._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<at-1?t.strstart:at-1,e===R?(a(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?gt:vt}function y(t,e){for(var n,i,r,o,s=t.window;;){if(t.lookahead<=ct){if(l(t),t.lookahead<=ct&&e===D)return gt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=at&&t.strstart>0&&(r=t.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){o=t.strstart+ct;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&o>r);t.match_length=ct-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=at?(n=I._tr_tally(t,1,t.match_length-at),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=I._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(a(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===R?(a(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?gt:vt}function m(t,e){for(var n;;){if(0===t.lookahead&&(l(t),0===t.lookahead)){if(e===D)return gt;break}if(t.match_length=0,n=I._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(a(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===R?(a(t,!0),0===t.strm.avail_out?bt:wt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?gt:vt}function g(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=C[t.level].max_lazy,t.good_match=C[t.level].good_length,t.nice_match=C[t.level].nice_length,t.max_chain_length=C[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=at-1,t.match_available=0,t.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=G,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(2*ot),this.dyn_dtree=new O.Buf16(2*(2*it+1)),this.bl_tree=new O.Buf16(2*(2*rt+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(st+1),this.heap=new O.Buf16(2*nt+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*nt+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=J,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ft:yt,t.adler=2===e.wrap?0:1,e.last_flush=D,I._tr_init(e),T):i(t,H)}function w(t){var e=b(t);return e===T&&g(t.state),e}function k(t,e){return t&&t.state?2!==t.state.wrap?H:(t.state.gzhead=e,T):H}function x(t,e,n,r,o,s){if(!t)return H;var a=1;if(e===N&&(e=6),0>r?(a=0,r=-r):r>15&&(a=2,r-=16),1>o||o>Y||n!==G||8>r||r>15||0>e||e>9||0>s||s>Z)return i(t,H);8===r&&(r=9);var c=new v;return t.state=c,c.strm=t,c.wrap=a,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+at-1)/at),c.window=new O.Buf8(2*c.w_size),c.head=new O.Buf16(c.hash_size),c.prev=new O.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new O.Buf8(c.pending_buf_size),c.d_buf=c.lit_bufsize>>1,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=s,c.method=n,w(t)}function S(t,e){return x(t,e,G,V,X,Q)}function B(t,e){var n,a,h,f;if(!t||!t.state||e>$||0>e)return t?i(t,H):H;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===mt&&e!==R)return i(t,0===t.avail_out?L:H);if(a.strm=t,n=a.last_flush,a.last_flush=e,a.status===ft)if(2===a.wrap)t.adler=0,c(a,31),c(a,139),c(a,8),a.gzhead?(c(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),c(a,255&a.gzhead.time),c(a,a.gzhead.time>>8&255),c(a,a.gzhead.time>>16&255),c(a,a.gzhead.time>>24&255),c(a,9===a.level?2:a.strategy>=q||a.level<2?4:0),c(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(c(a,255&a.gzhead.extra.length),c(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=z(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=lt):(c(a,0),c(a,0),c(a,0),c(a,0),c(a,0),c(a,9===a.level?2:a.strategy>=q||a.level<2?4:0),c(a,kt),a.status=yt);else{var l=G+(a.w_bits-8<<4)<<8,d=-1;d=a.strategy>=q||a.level<2?0:a.level<6?1:6===a.level?2:3,l|=d<<6,0!==a.strstart&&(l|=ht),l+=31-l%31,a.status=yt,u(a,l),0!==a.strstart&&(u(a,t.adler>>>16),u(a,65535&t.adler)),t.adler=1}if(a.status===lt)if(a.gzhead.extra){for(h=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>h&&(t.adler=z(t.adler,a.pending_buf,a.pending-h,h)),s(t),h=a.pending,a.pending!==a.pending_buf_size));)c(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>h&&(t.adler=z(t.adler,a.pending_buf,a.pending-h,h)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=dt)}else a.status=dt;if(a.status===dt)if(a.gzhead.name){h=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>h&&(t.adler=z(t.adler,a.pending_buf,a.pending-h,h)),s(t),h=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,c(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>h&&(t.adler=z(t.adler,a.pending_buf,a.pending-h,h)),0===f&&(a.gzindex=0,a.status=pt)}else a.status=pt;if(a.status===pt)if(a.gzhead.comment){h=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>h&&(t.adler=z(t.adler,a.pending_buf,a.pending-h,h)),s(t),h=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,c(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>h&&(t.adler=z(t.adler,a.pending_buf,a.pending-h,h)),0===f&&(a.status=_t)}else a.status=_t;if(a.status===_t&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(t),a.pending+2<=a.pending_buf_size&&(c(a,255&t.adler),c(a,t.adler>>8&255),t.adler=0,a.status=yt)):a.status=yt),0!==a.pending){if(s(t),0===t.avail_out)return a.last_flush=-1,T}else if(0===t.avail_in&&r(e)<=r(n)&&e!==R)return i(t,L);if(a.status===mt&&0!==t.avail_in)return i(t,L);if(0!==t.avail_in||0!==a.lookahead||e!==D&&a.status!==mt){var p=a.strategy===q?m(a,e):a.strategy===W?y(a,e):C[a.level].func(a,e);if((p===bt||p===wt)&&(a.status=mt),p===gt||p===bt)return 0===t.avail_out&&(a.last_flush=-1),T;if(p===vt&&(e===j?I._tr_align(a):e!==$&&(I._tr_stored_block(a,0,0,!1),e===M&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(t),0===t.avail_out))return a.last_flush=-1,T}return e!==R?T:a.wrap<=0?F:(2===a.wrap?(c(a,255&t.adler),c(a,t.adler>>8&255),c(a,t.adler>>16&255),c(a,t.adler>>24&255),c(a,255&t.total_in),c(a,t.total_in>>8&255),c(a,t.total_in>>16&255),c(a,t.total_in>>24&255)):(u(a,t.adler>>>16),u(a,65535&t.adler)),s(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?T:F)}function E(t){var e;return t&&t.state?(e=t.state.status,e!==ft&&e!==lt&&e!==dt&&e!==pt&&e!==_t&&e!==yt&&e!==mt?i(t,H):(t.state=null,e===yt?i(t,K):T)):H}var C,O=t("../utils/common"),I=t("./trees"),A=t("./adler32"),z=t("./crc32"),P=t("./messages"),D=0,j=1,M=3,R=4,$=5,T=0,F=1,H=-2,K=-3,L=-5,N=-1,U=1,q=2,W=3,Z=4,Q=0,J=2,G=8,Y=9,V=15,X=8,tt=29,et=256,nt=et+1+tt,it=30,rt=19,ot=2*nt+1,st=15,at=3,ct=258,ut=ct+at+1,ht=32,ft=42,lt=69,dt=73,pt=91,_t=103,yt=113,mt=666,gt=1,vt=2,bt=3,wt=4,kt=3,xt=function(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r};C=[new xt(0,0,0,0,d),new xt(4,4,8,4,p),new xt(4,5,16,8,p),new xt(4,6,32,32,p),new xt(4,4,16,16,_),new xt(8,16,32,32,_),new xt(8,16,128,128,_),new xt(8,32,128,256,_),new xt(32,128,258,1024,_),new xt(32,258,258,4096,_)],n.deflateInit=S,n.deflateInit2=x,n.deflateReset=w,n.deflateResetKeep=b,n.deflateSetHeader=k,n.deflate=B,n.deflateEnd=E,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":73,"./adler32":75,"./crc32":77,"./messages":83,"./trees":84}],79:[function(t,e,n){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=i},{}],80:[function(t,e,n){"use strict";var i=30,r=12;e.exports=function(t,e){var n,o,s,a,c,u,h,f,l,d,p,_,y,m,g,v,b,w,k,x,S,B,E,C,O;n=t.state,o=t.next_in,C=t.input,s=o+(t.avail_in-5),a=t.next_out,O=t.output,c=a-(e-t.avail_out),u=a+(t.avail_out-257),h=n.dmax,f=n.wsize,l=n.whave,d=n.wnext,p=n.window,_=n.hold,y=n.bits,m=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;t:do{15>y&&(_+=C[o++]<<y,y+=8,_+=C[o++]<<y,y+=8),w=m[_&v];e:for(;;){if(k=w>>>24,_>>>=k,y-=k,k=w>>>16&255,0===k)O[a++]=65535&w;else{if(!(16&k)){if(0===(64&k)){w=m[(65535&w)+(_&(1<<k)-1)];continue e}if(32&k){n.mode=r;break t}t.msg="invalid literal/length code",n.mode=i;break t}x=65535&w,k&=15,k&&(k>y&&(_+=C[o++]<<y,y+=8),x+=_&(1<<k)-1,_>>>=k,y-=k),15>y&&(_+=C[o++]<<y,y+=8,_+=C[o++]<<y,y+=8),w=g[_&b];n:for(;;){if(k=w>>>24,_>>>=k,y-=k,k=w>>>16&255,!(16&k)){if(0===(64&k)){w=g[(65535&w)+(_&(1<<k)-1)];continue n}t.msg="invalid distance code",n.mode=i;break t}if(S=65535&w,k&=15,k>y&&(_+=C[o++]<<y,y+=8,k>y&&(_+=C[o++]<<y,y+=8)),S+=_&(1<<k)-1,S>h){t.msg="invalid distance too far back",n.mode=i;break t}if(_>>>=k,y-=k,k=a-c,S>k){if(k=S-k,k>l&&n.sane){t.msg="invalid distance too far back",n.mode=i;break t}if(B=0,E=p,0===d){if(B+=f-k,x>k){x-=k;do O[a++]=p[B++];while(--k);B=a-S,E=O}}else if(k>d){if(B+=f+d-k,k-=d,x>k){x-=k;do O[a++]=p[B++];while(--k);if(B=0,x>d){k=d,x-=k;do O[a++]=p[B++];while(--k);B=a-S,E=O}}}else if(B+=d-k,x>k){x-=k;do O[a++]=p[B++];while(--k);B=a-S,E=O}for(;x>2;)O[a++]=E[B++],O[a++]=E[B++],O[a++]=E[B++],x-=3;x&&(O[a++]=E[B++],x>1&&(O[a++]=E[B++]))}else{B=a-S;do O[a++]=O[B++],O[a++]=O[B++],O[a++]=O[B++],x-=3;while(x>2);x&&(O[a++]=O[B++],x>1&&(O[a++]=O[B++]))}break}}break}}while(s>o&&u>a);x=y>>3,o-=x,y-=x<<3,_&=(1<<y)-1,t.next_in=o,t.next_out=a,t.avail_in=s>o?5+(s-o):5-(o-s),t.avail_out=u>a?257+(u-a):257-(a-u),n.hold=_,n.bits=y}},{}],81:[function(t,e,n){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=R,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(pt),e.distcode=e.distdyn=new m.Buf32(_t),e.sane=1,e.back=-1,O):z}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):z}function a(t,e){var n,i;return t&&t.state?(i=t.state,0>e?(n=0,e=-e):(n=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?z:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,s(t))):z}function c(t,e){var n,i;return t?(i=new r,t.state=i,i.window=null,n=a(t,e),n!==O&&(t.state=null),n):z}function u(t){return c(t,mt)}function h(t){if(gt){var e;for(_=new m.Buf32(512),y=new m.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(w(x,t.lens,0,288,_,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;w(S,t.lens,0,32,y,0,t.work,{bits:5}),gt=!1}t.lencode=_,t.lenbits=9,t.distcode=y,t.distbits=5}function f(t,e,n,i){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new m.Buf8(o.wsize)),i>=o.wsize?(m.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),m.arraySet(o.window,e,n-i,r,o.wnext),i-=r,i?(m.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}function l(t,e){var n,r,o,s,a,c,u,l,d,p,_,y,pt,_t,yt,mt,gt,vt,bt,wt,kt,xt,St,Bt,Et=0,Ct=new m.Buf8(4),Ot=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return z;n=t.state,n.mode===Z&&(n.mode=Q),a=t.next_out,o=t.output,u=t.avail_out,s=t.next_in,r=t.input,c=t.avail_in,l=n.hold,d=n.bits,p=c,_=u,xt=O;t:for(;;)switch(n.mode){case R:if(0===n.wrap){n.mode=Q;break}for(;16>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if(2&n.wrap&&35615===l){n.check=0,Ct[0]=255&l,Ct[1]=l>>>8&255,n.check=v(n.check,Ct,2,0),l=0,d=0,n.mode=$;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=ft;break}if((15&l)!==M){t.msg="unknown compression method",n.mode=ft;break}if(l>>>=4,d-=4,kt=(15&l)+8,0===n.wbits)n.wbits=kt;else if(kt>n.wbits){t.msg="invalid window size",n.mode=ft;break}n.dmax=1<<kt,t.adler=n.check=1,n.mode=512&l?q:Z,l=0,d=0;break;case $:for(;16>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if(n.flags=l,(255&n.flags)!==M){t.msg="unknown compression method",n.mode=ft;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=ft;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&(Ct[0]=255&l,Ct[1]=l>>>8&255,n.check=v(n.check,Ct,2,0)),l=0,d=0,n.mode=T;case T:for(;32>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}n.head&&(n.head.time=l),512&n.flags&&(Ct[0]=255&l,Ct[1]=l>>>8&255,Ct[2]=l>>>16&255,Ct[3]=l>>>24&255,n.check=v(n.check,Ct,4,0)),l=0,d=0,n.mode=F;case F:for(;16>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&(Ct[0]=255&l,Ct[1]=l>>>8&255,n.check=v(n.check,Ct,2,0)),l=0,d=0,n.mode=H;case H:if(1024&n.flags){for(;16>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&(Ct[0]=255&l,Ct[1]=l>>>8&255,n.check=v(n.check,Ct,2,0)),l=0,d=0}else n.head&&(n.head.extra=null);n.mode=K;case K:if(1024&n.flags&&(y=n.length,y>c&&(y=c),y&&(n.head&&(kt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),m.arraySet(n.head.extra,r,s,y,kt)),512&n.flags&&(n.check=v(n.check,r,y,s)),c-=y,s+=y,n.length-=y),n.length))break t;n.length=0,n.mode=L;case L:if(2048&n.flags){if(0===c)break t;y=0;do kt=r[s+y++],n.head&&kt&&n.length<65536&&(n.head.name+=String.fromCharCode(kt));while(kt&&c>y);if(512&n.flags&&(n.check=v(n.check,r,y,s)),c-=y,s+=y,kt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=N;case N:if(4096&n.flags){if(0===c)break t;y=0;do kt=r[s+y++],n.head&&kt&&n.length<65536&&(n.head.comment+=String.fromCharCode(kt));while(kt&&c>y);if(512&n.flags&&(n.check=v(n.check,r,y,s)),c-=y,s+=y,kt)break t}else n.head&&(n.head.comment=null);n.mode=U;case U:if(512&n.flags){for(;16>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if(l!==(65535&n.check)){t.msg="header crc mismatch",n.mode=ft;break}l=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Z;break;case q:for(;32>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}t.adler=n.check=i(l),l=0,d=0,n.mode=W;case W:if(0===n.havedict)return t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=c,n.hold=l,n.bits=d,A;t.adler=n.check=1,n.mode=Z;case Z:if(e===E||e===C)break t;case Q:if(n.last){l>>>=7&d,d-=7&d,n.mode=ct;break}for(;3>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}switch(n.last=1&l,l>>>=1,d-=1,3&l){case 0:n.mode=J;break;case 1:if(h(n),n.mode=et,e===C){l>>>=2,d-=2;break t}break;case 2:n.mode=V;break;case 3:t.msg="invalid block type",n.mode=ft}l>>>=2,d-=2;break;case J:for(l>>>=7&d,d-=7&d;32>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if((65535&l)!==(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=ft;break}if(n.length=65535&l,l=0,d=0,n.mode=G,e===C)break t;case G:n.mode=Y;case Y:if(y=n.length){if(y>c&&(y=c),y>u&&(y=u),0===y)break t;m.arraySet(o,r,s,y,a),c-=y,s+=y,u-=y,a+=y,n.length-=y;break}n.mode=Z;break;case V:for(;14>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if(n.nlen=(31&l)+257,l>>>=5,d-=5,n.ndist=(31&l)+1,l>>>=5,d-=5,n.ncode=(15&l)+4,l>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=ft;break}n.have=0,n.mode=X;case X:for(;n.have<n.ncode;){for(;3>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}n.lens[Ot[n.have++]]=7&l,l>>>=3,d-=3}for(;n.have<19;)n.lens[Ot[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,St={bits:n.lenbits},xt=w(k,n.lens,0,19,n.lencode,0,n.work,St),n.lenbits=St.bits,xt){t.msg="invalid code lengths set",n.mode=ft;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.nlen+n.ndist;){for(;Et=n.lencode[l&(1<<n.lenbits)-1],yt=Et>>>24,mt=Et>>>16&255,gt=65535&Et,!(d>=yt);){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if(16>gt)l>>>=yt,d-=yt,n.lens[n.have++]=gt;else{if(16===gt){for(Bt=yt+2;Bt>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if(l>>>=yt,d-=yt,0===n.have){t.msg="invalid bit length repeat",n.mode=ft;break}kt=n.lens[n.have-1],y=3+(3&l),l>>>=2,d-=2}else if(17===gt){for(Bt=yt+3;Bt>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}l>>>=yt,d-=yt,kt=0,y=3+(7&l),l>>>=3,d-=3}else{for(Bt=yt+7;Bt>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}l>>>=yt,d-=yt,kt=0,y=11+(127&l),l>>>=7,d-=7}if(n.have+y>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=ft;break}for(;y--;)n.lens[n.have++]=kt}}if(n.mode===ft)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=ft;break}if(n.lenbits=9,St={bits:n.lenbits},xt=w(x,n.lens,0,n.nlen,n.lencode,0,n.work,St),n.lenbits=St.bits,xt){t.msg="invalid literal/lengths set",n.mode=ft;break}if(n.distbits=6,n.distcode=n.distdyn,St={bits:n.distbits},xt=w(S,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,St),n.distbits=St.bits,xt){t.msg="invalid distances set",n.mode=ft;break}if(n.mode=et,e===C)break t;case et:n.mode=nt;case nt:if(c>=6&&u>=258){t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=c,n.hold=l,n.bits=d,b(t,_),a=t.next_out,o=t.output,u=t.avail_out,s=t.next_in,r=t.input,c=t.avail_in,l=n.hold,d=n.bits,n.mode===Z&&(n.back=-1);break}for(n.back=0;Et=n.lencode[l&(1<<n.lenbits)-1],yt=Et>>>24,mt=Et>>>16&255,gt=65535&Et,!(d>=yt);){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if(mt&&0===(240&mt)){for(vt=yt,bt=mt,wt=gt;Et=n.lencode[wt+((l&(1<<vt+bt)-1)>>vt)],yt=Et>>>24,mt=Et>>>16&255,gt=65535&Et,!(d>=vt+yt);){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}l>>>=vt,d-=vt,n.back+=vt}if(l>>>=yt,d-=yt,n.back+=yt,n.length=gt,0===mt){n.mode=at;break}if(32&mt){n.back=-1,n.mode=Z;break}if(64&mt){t.msg="invalid literal/length code",n.mode=ft;break}n.extra=15&mt,n.mode=it;case it:if(n.extra){for(Bt=n.extra;Bt>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=rt;case rt:for(;Et=n.distcode[l&(1<<n.distbits)-1],yt=Et>>>24,mt=Et>>>16&255,gt=65535&Et,!(d>=yt);){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if(0===(240&mt)){for(vt=yt,bt=mt,wt=gt;Et=n.distcode[wt+((l&(1<<vt+bt)-1)>>vt)],yt=Et>>>24,mt=Et>>>16&255,gt=65535&Et,!(d>=vt+yt);){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}l>>>=vt,d-=vt,n.back+=vt}if(l>>>=yt,d-=yt,n.back+=yt,64&mt){t.msg="invalid distance code",n.mode=ft;break}n.offset=gt,n.extra=15&mt,n.mode=ot;case ot:if(n.extra){for(Bt=n.extra;Bt>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=ft;break}n.mode=st;case st:if(0===u)break t;if(y=_-u,n.offset>y){if(y=n.offset-y,y>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=ft;break}y>n.wnext?(y-=n.wnext,pt=n.wsize-y):pt=n.wnext-y,y>n.length&&(y=n.length),_t=n.window}else _t=o,pt=a-n.offset,y=n.length;y>u&&(y=u),u-=y,n.length-=y;do o[a++]=_t[pt++];while(--y);0===n.length&&(n.mode=nt);break;case at:if(0===u)break t;o[a++]=n.length,u--,n.mode=nt;break;case ct:if(n.wrap){for(;32>d;){if(0===c)break t;c--,l|=r[s++]<<d,d+=8}if(_-=u,t.total_out+=_,n.total+=_,_&&(t.adler=n.check=n.flags?v(n.check,o,_,a-_):g(n.check,o,_,a-_)),_=u,(n.flags?l:i(l))!==n.check){t.msg="incorrect data check",n.mode=ft;break}l=0,d=0}n.mode=ut;case ut:if(n.wrap&&n.flags){for(;32>d;){if(0===c)break t;c--,l+=r[s++]<<d,d+=8}if(l!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=ft;break}l=0,d=0}n.mode=ht;case ht:xt=I;break t;case ft:xt=P;break t;case lt:return D;case dt:default:return z}return t.next_out=a,t.avail_out=u,t.next_in=s,t.avail_in=c,n.hold=l,n.bits=d,(n.wsize||_!==t.avail_out&&n.mode<ft&&(n.mode<ct||e!==B))&&f(t,t.output,t.next_out,_-t.avail_out)?(n.mode=lt,D):(p-=t.avail_in,_-=t.avail_out,t.total_in+=p,t.total_out+=_,n.total+=_,n.wrap&&_&&(t.adler=n.check=n.flags?v(n.check,o,_,t.next_out-_):g(n.check,o,_,t.next_out-_)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Z?128:0)+(n.mode===et||n.mode===G?256:0),(0===p&&0===_||e===B)&&xt===O&&(xt=j),xt)}function d(t){if(!t||!t.state)return z;var e=t.state;return e.window&&(e.window=null),t.state=null,O}function p(t,e){var n;return t&&t.state?(n=t.state,0===(2&n.wrap)?z:(n.head=e,e.done=!1,O)):z}var _,y,m=t("../utils/common"),g=t("./adler32"),v=t("./crc32"),b=t("./inffast"),w=t("./inftrees"),k=0,x=1,S=2,B=4,E=5,C=6,O=0,I=1,A=2,z=-2,P=-3,D=-4,j=-5,M=8,R=1,$=2,T=3,F=4,H=5,K=6,L=7,N=8,U=9,q=10,W=11,Z=12,Q=13,J=14,G=15,Y=16,V=17,X=18,tt=19,et=20,nt=21,it=22,rt=23,ot=24,st=25,at=26,ct=27,ut=28,ht=29,ft=30,lt=31,dt=32,pt=852,_t=592,yt=15,mt=yt,gt=!0;n.inflateReset=s,n.inflateReset2=a,n.inflateResetKeep=o,n.inflateInit=u,n.inflateInit2=c,n.inflate=l,n.inflateEnd=d,n.inflateGetHeader=p,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":73,"./adler32":75,"./crc32":77,"./inffast":80,"./inftrees":82}],82:[function(t,e,n){"use strict";var i=t("../utils/common"),r=15,o=852,s=592,a=0,c=1,u=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,p,_,y,m,g){var v,b,w,k,x,S,B,E,C,O=g.bits,I=0,A=0,z=0,P=0,D=0,j=0,M=0,R=0,$=0,T=0,F=null,H=0,K=new i.Buf16(r+1),L=new i.Buf16(r+1),N=null,U=0;for(I=0;r>=I;I++)K[I]=0;for(A=0;p>A;A++)K[e[n+A]]++;for(D=O,P=r;P>=1&&0===K[P];P--);if(D>P&&(D=P),0===P)return _[y++]=20971520,_[y++]=20971520,g.bits=1,0;for(z=1;P>z&&0===K[z];z++);for(z>D&&(D=z),R=1,I=1;r>=I;I++)if(R<<=1,R-=K[I],0>R)return-1;if(R>0&&(t===a||1!==P))return-1;for(L[1]=0,I=1;r>I;I++)L[I+1]=L[I]+K[I];for(A=0;p>A;A++)0!==e[n+A]&&(m[L[e[n+A]]++]=A);if(t===a?(F=N=m,S=19):t===c?(F=h,H-=257,N=f,U-=257,S=256):(F=l,N=d,S=-1),T=0,A=0,I=z,x=y,j=D,M=0,w=-1,$=1<<D,k=$-1,t===c&&$>o||t===u&&$>s)return 1;for(var q=0;;){q++,B=I-M,m[A]<S?(E=0,C=m[A]):m[A]>S?(E=N[U+m[A]],C=F[H+m[A]]):(E=96,C=0),v=1<<I-M,b=1<<j,z=b;do b-=v,_[x+(T>>M)+b]=B<<24|E<<16|C|0;while(0!==b);for(v=1<<I-1;T&v;)v>>=1;if(0!==v?(T&=v-1,T+=v):T=0,A++,0===--K[I]){if(I===P)break;I=e[n+m[A]]}if(I>D&&(T&k)!==w){for(0===M&&(M=D),x+=z,j=I-M,R=1<<j;P>j+M&&(R-=K[j+M],!(0>=R));)j++,R<<=1;if($+=1<<j,t===c&&$>o||t===u&&$>s)return 1;w=T&k,_[w]=D<<24|j<<16|x-y|0}}return 0!==T&&(_[x+T]=I-M<<24|64<<16|0),g.bits=D,0}},{"../utils/common":73}],83:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error",
"-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],84:[function(t,e,n){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t){return 256>t?st[t]:st[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,n){t.bi_valid>Z-n?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>Z-t.bi_valid,t.bi_valid+=n-Z):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function a(t,e,n){s(t,n[2*e],n[2*e+1])}function c(t,e){var n=0;do n|=1&t,t>>>=1,n<<=1;while(--e>0);return n>>>1}function u(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function h(t,e){var n,i,r,o,s,a,c=e.dyn_tree,u=e.max_code,h=e.stat_desc.static_tree,f=e.stat_desc.has_stree,l=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,_=0;for(o=0;W>=o;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;q>n;n++)i=t.heap[n],o=c[2*c[2*i+1]+1]+1,o>p&&(o=p,_++),c[2*i+1]=o,i>u||(t.bl_count[o]++,s=0,i>=d&&(s=l[i-d]),a=c[2*i],t.opt_len+=a*(o+s),f&&(t.static_len+=a*(h[2*i+1]+s)));if(0!==_){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,_-=2}while(_>0);for(o=p;0!==o;o--)for(i=t.bl_count[o];0!==i;)r=t.heap[--n],r>u||(c[2*r+1]!==o&&(t.opt_len+=(o-c[2*r+1])*c[2*r],c[2*r+1]=o),i--)}}function f(t,e,n){var i,r,o=new Array(W+1),s=0;for(i=1;W>=i;i++)o[i]=s=s+n[i-1]<<1;for(r=0;e>=r;r++){var a=t[2*r+1];0!==a&&(t[2*r]=c(o[a]++,a))}}function l(){var t,e,n,i,r,o=new Array(W+1);for(n=0,i=0;H-1>i;i++)for(ct[i]=n,t=0;t<1<<X[i];t++)at[n++]=i;for(at[n-1]=i,r=0,i=0;16>i;i++)for(ut[i]=r,t=0;t<1<<tt[i];t++)st[r++]=i;for(r>>=7;N>i;i++)for(ut[i]=r<<7,t=0;t<1<<tt[i]-7;t++)st[256+r++]=i;for(e=0;W>=e;e++)o[e]=0;for(t=0;143>=t;)rt[2*t+1]=8,t++,o[8]++;for(;255>=t;)rt[2*t+1]=9,t++,o[9]++;for(;279>=t;)rt[2*t+1]=7,t++,o[7]++;for(;287>=t;)rt[2*t+1]=8,t++,o[8]++;for(f(rt,L+1,o),t=0;N>t;t++)ot[2*t+1]=5,ot[2*t]=c(t,5);ht=new dt(rt,X,K+1,L,W),ft=new dt(ot,tt,0,N,W),lt=new dt(new Array(0),et,0,U,Q)}function d(t){var e;for(e=0;L>e;e++)t.dyn_ltree[2*e]=0;for(e=0;N>e;e++)t.dyn_dtree[2*e]=0;for(e=0;U>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*J]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function _(t,e,n,i){p(t),i&&(o(t,n),o(t,~n)),A.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function y(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function m(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&y(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!y(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function g(t,e,n){var i,o,c,u,h=0;if(0!==t.last_lit)do i=t.pending_buf[t.d_buf+2*h]<<8|t.pending_buf[t.d_buf+2*h+1],o=t.pending_buf[t.l_buf+h],h++,0===i?a(t,o,e):(c=at[o],a(t,c+K+1,e),u=X[c],0!==u&&(o-=ct[c],s(t,o,u)),i--,c=r(i),a(t,c,n),u=tt[c],0!==u&&(i-=ut[c],s(t,i,u)));while(h<t.last_lit);a(t,J,e)}function v(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,c=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=q,n=0;c>n;n++)0!==o[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=2>u?++u:0,o[2*r]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)m(t,o,n);r=c;do n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],m(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,m(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],h(t,e),f(o,u,t.bl_count)}function b(t,e,n){var i,r,o=-1,s=e[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),e[2*(n+1)+1]=65535,i=0;n>=i;i++)r=s,s=e[2*(i+1)+1],++a<c&&r===s||(u>a?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*G]++):10>=a?t.bl_tree[2*Y]++:t.bl_tree[2*V]++,a=0,o=r,0===s?(c=138,u=3):r===s?(c=6,u=3):(c=7,u=4))}function w(t,e,n){var i,r,o=-1,c=e[1],u=0,h=7,f=4;for(0===c&&(h=138,f=3),i=0;n>=i;i++)if(r=c,c=e[2*(i+1)+1],!(++u<h&&r===c)){if(f>u){do a(t,r,t.bl_tree);while(0!==--u)}else 0!==r?(r!==o&&(a(t,r,t.bl_tree),u--),a(t,G,t.bl_tree),s(t,u-3,2)):10>=u?(a(t,Y,t.bl_tree),s(t,u-3,3)):(a(t,V,t.bl_tree),s(t,u-11,7));u=0,o=r,0===c?(h=138,f=3):r===c?(h=6,f=3):(h=7,f=4)}}function k(t){var e;for(b(t,t.dyn_ltree,t.l_desc.max_code),b(t,t.dyn_dtree,t.d_desc.max_code),v(t,t.bl_desc),e=U-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function x(t,e,n,i){var r;for(s(t,e-257,5),s(t,n-1,5),s(t,i-4,4),r=0;i>r;r++)s(t,t.bl_tree[2*nt[r]+1],3);w(t,t.dyn_ltree,e-1),w(t,t.dyn_dtree,n-1)}function S(t){var e,n=4093624447;for(e=0;31>=e;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return P;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return D;for(e=32;K>e;e++)if(0!==t.dyn_ltree[2*e])return D;return P}function B(t){_t||(l(),_t=!0),t.l_desc=new pt(t.dyn_ltree,ht),t.d_desc=new pt(t.dyn_dtree,ft),t.bl_desc=new pt(t.bl_tree,lt),t.bi_buf=0,t.bi_valid=0,d(t)}function E(t,e,n,i){s(t,(M<<1)+(i?1:0),3),_(t,e,n,!0)}function C(t){s(t,R<<1,3),a(t,J,rt),u(t)}function O(t,e,n,i){var r,o,a=0;t.level>0?(t.strm.data_type===j&&(t.strm.data_type=S(t)),v(t,t.l_desc),v(t,t.d_desc),a=k(t),r=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,r>=o&&(r=o)):r=o=n+5,r>=n+4&&-1!==e?E(t,e,n,i):t.strategy===z||o===r?(s(t,(R<<1)+(i?1:0),3),g(t,rt,ot)):(s(t,($<<1)+(i?1:0),3),x(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),g(t,t.dyn_ltree,t.dyn_dtree)),d(t),i&&p(t)}function I(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(at[n]+K+1)]++,t.dyn_dtree[2*r(e)]++),t.last_lit===t.lit_bufsize-1}var A=t("../utils/common"),z=4,P=0,D=1,j=2,M=0,R=1,$=2,T=3,F=258,H=29,K=256,L=K+1+H,N=30,U=19,q=2*L+1,W=15,Z=16,Q=7,J=256,G=16,Y=17,V=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],it=512,rt=new Array(2*(L+2));i(rt);var ot=new Array(2*N);i(ot);var st=new Array(it);i(st);var at=new Array(F-T+1);i(at);var ct=new Array(H);i(ct);var ut=new Array(N);i(ut);var ht,ft,lt,dt=function(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length},pt=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},_t=!1;n._tr_init=B,n._tr_stored_block=E,n._tr_flush_block=O,n._tr_tally=I,n._tr_align=C},{"../utils/common":73}],85:[function(t,e,n){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i},{}]},{},[2]);

 var COLLECTIONS = ['email', 'user'];

// initialize Forerunner DB
var fdb = new ForerunnerDB();
var db = fdb.db('emailTracking');

for (var i = 0; i < COLLECTIONS.length; i++) {
  db.collection(COLLECTIONS[i]).load(function (err) {
    if (err) {
      console.log('Error occured while loading a collection: ' + err);
    }
  });
}


chrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {
  if (request.method == 'getDeviceId') {
    var collection = db.collection('user');
    users = collection.find({});
    var user;
    if (users.length > 0) {
      user = users[0];
    }
    if (user.deviceId) {
      console.log('User deviceId', user.deviceId)
      sendResponse({
        success: true,
        deviceId: user.deviceId
      });
      return true;
    } else {
      sendResponse({
        success: false
      });
      return false;
    }
  } else if (request.method == 'storeData') {
    /*
    {
      doc: Object,
      collection: string
    }
    */
    var collection = db.collection(request.collection);
    if (!request.doc._id) {
      request.doc._id = uuid.v4().split('-').join('')
    }
    collection.insert(request.doc);

    // Persist the collection
    collection.save(function (err) {
      if (err) {
        console.log(err);
      }
      sendResponse({
        success: true
      });
      return true;
    });
  } else if (request.method == 'getData') {
    /*
    {
      collection: string,
      query: object
    }
    */
    var collection = db.collection(request.collection);
    var res = collection.findOne(request.query);
    if (res) {
      sendResponse({
        success: true,
        data: res
      })
    } else {
      sendResponse({
        success: false
      });
    }
    return true;
  } else if (request.method == 'updateData') {
    /*
    {
      collection: string,
      query: object,
      doc: object,
      overwrite: bool (optional)
    }
    */
    var collection = db.collection(request.collection);
    if (typeof request.overwrite != 'undefined' && request.overwrite) {
      var update = collection.update(request.query, {
        $overwrite: request.doc
      });
    } else {
      var update = collection.update(request.query, request.doc);
    }
    collection.save(function (err) {
      if (err) {
        console.log(err);
      }
      sendResponse({
        success: true
      });
      return true;
    });
  } else if (request.method == 'apiRequest') {
    var API_URL = 'replace with the url', API_METHOD = 'GET', API_ENDPOINT = '/', API_TOKEN = null, API_DATA = {};

    if (request.apiUrl) {
      API_URL = request.apiUrl;
    }
    if (request.endpoint) {
      API_ENDPOINT = request.endpoint;
    }
    if (request.authToken) {
      API_TOKEN = request.authToken;
    }
    API_URI = API_URL + API_ENDPOINT;
    if (request.queryParameter) {
      API_URI = API_URI + '?' + request.queryParameter;
    }
    if (request.apiMethod) {
      API_METHOD = request.apiMethod;
    }
    if (request.data) {
      API_DATA = JSON.stringify(request.data);
    }


    var xhttp = new XMLHttpRequest();
    xhttp.onload = function() {
      sendResponse({
        success: true,
        responseText: xhttp.responseText,
        status: xhttp.status
      });
    };
    xhttp.onerror = function() {
      sendResponse({
        success: false
      });
    };
    xhttp.open(API_METHOD, API_URI, true);
    if (API_TOKEN) {
      xhttp.setRequestHeader('Authorization', 'Bearer ' + API_TOKEN);
    }
    xhttp.setRequestHeader('Content-Type', 'application/json');
    xhttp.send(API_DATA);
    return true;
  } else {
    sendResponse({});
    return true;
  }
  return true;
});
chrome.runtime.onInstalled.addListener(function(details){
  if (details.reason == 'install') {
    // generate unique device id
    var deviceId = uuid.v4();

    var collection = db.collection('user');
    collection.insert({
      deviceId: deviceId
    });

    //code for setting up FCM Sender ID needs change.
    function registerWithFCM(registrationId) {
      if (chrome.runtime.lastError) {
        // When the registration fails, handle the error and retry the
        // registration later.
        return;
      }
          console.log(registrationId);
    }
    chrome.storage.local.get("registered", function(result) {
      // If already registered, bail out.
      if (result["registered"]) {
        return;
      }
      // Up to 100 senders are allowed.
      var senderIds = ["800684444034"];
      chrome.gcm.register(senderIds, registerWithFCM);
    });


    chrome.gcm.onMessage.addListener(function(message) {
      console.log(message);
      var notif = new Notification(message.data.message, {
        body: "to be replaced with the data from the server"
      });
    });

    //end of FCM



    collection.save(function (err) {
      if (err) {
        console.log(err);
      }
      // Open/Refresh gmail tab
      chrome.tabs.query({
        url: '*://mail.google.com/*'
      }, function (tabs) {
        if (tabs.length > 0) {
          chrome.tabs.reload(tabs[0].id, function () {
            chrome.tabs.update(tabs[0].id, {selected: true});
          });
        } else {
          // open tab
          chrome.tabs.create({
            url: 'https://mail.google.com',
            active: true
          });
        }
      });
    });

  }
});
